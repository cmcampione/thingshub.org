!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("axios"),require("socket.io-client")):"function"==typeof define&&define.amd?define(["axios","socket.io-client"],t):"object"==typeof exports?exports.thingshub=t(require("axios"),require("socket.io-client")):e.thingshub=t(e.axios,e.io)}(this,(function(e,t){return(()=>{var r={924:(e,t,r)=>{"use strict";var n=r(210),o=r(559),i=o(n("String.prototype.indexOf"));e.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&i(e,".prototype.")>-1?o(r):r}},559:(e,t,r)=>{"use strict";var n=r(612),o=r(210),i=o("%Function.prototype.apply%"),a=o("%Function.prototype.call%"),s=o("%Reflect.apply%",!0)||n.call(a,i),c=o("%Object.getOwnPropertyDescriptor%",!0),l=o("%Object.defineProperty%",!0),u=o("%Math.max%");if(l)try{l({},"a",{value:1})}catch(e){l=null}e.exports=function(e){var t=s(n,a,arguments);if(c&&l){var r=c(t,"length");r.configurable&&l(t,"length",{value:1+u(0,e.length-(arguments.length-1))})}return t};var p=function(){return s(n,i,arguments)};l?l(e.exports,"apply",{value:p}):e.exports.apply=p},289:(e,t,r)=>{"use strict";var n=r(215),o="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),i=Object.prototype.toString,a=Array.prototype.concat,s=Object.defineProperty,c=s&&function(){var e={};try{for(var t in s(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}(),l=function(e,t,r,n){var o;(!(t in e)||"function"==typeof(o=n)&&"[object Function]"===i.call(o)&&n())&&(c?s(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r)},u=function(e,t){var r=arguments.length>2?arguments[2]:{},i=n(t);o&&(i=a.call(i,Object.getOwnPropertySymbols(t)));for(var s=0;s<i.length;s+=1)l(e,i[s],t[i[s]],r[i[s]])};u.supportsDescriptors=!!c,e.exports=u},648:e=>{"use strict";var t="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,n=Object.prototype.toString,o="[object Function]";e.exports=function(e){var i=this;if("function"!=typeof i||n.call(i)!==o)throw new TypeError(t+i);for(var a,s=r.call(arguments,1),c=function(){if(this instanceof a){var t=i.apply(this,s.concat(r.call(arguments)));return Object(t)===t?t:this}return i.apply(e,s.concat(r.call(arguments)))},l=Math.max(0,i.length-s.length),u=[],p=0;p<l;p++)u.push("$"+p);if(a=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(c),i.prototype){var h=function(){};h.prototype=i.prototype,a.prototype=new h,h.prototype=null}return a}},612:(e,t,r)=>{"use strict";var n=r(648);e.exports=Function.prototype.bind||n},210:(e,t,r)=>{"use strict";var n,o=SyntaxError,i=Function,a=TypeError,s=function(e){try{return i('"use strict"; return ('+e+").constructor;")()}catch(e){}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch(e){c=null}var l=function(){throw new a},u=c?function(){try{return l}catch(e){try{return c(arguments,"callee").get}catch(e){return l}}}():l,p=r(405)(),h=Object.getPrototypeOf||function(e){return e.__proto__},f={},y="undefined"==typeof Uint8Array?n:h(Uint8Array),d={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":p?h([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":f,"%AsyncGenerator%":f,"%AsyncGeneratorFunction%":f,"%AsyncIteratorPrototype%":f,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":f,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":p?h(h([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&p?h((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&p?h((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":p?h(""[Symbol.iterator]()):n,"%Symbol%":p?Symbol:n,"%SyntaxError%":o,"%ThrowTypeError%":u,"%TypedArray%":y,"%TypeError%":a,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet},g=function e(t){var r;if("%AsyncFunction%"===t)r=s("async function () {}");else if("%GeneratorFunction%"===t)r=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=s("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&(r=h(o.prototype))}return d[t]=r,r},m={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},b=r(612),v=r(642),C=b.call(Function.call,Array.prototype.concat),S=b.call(Function.apply,Array.prototype.splice),w=b.call(Function.call,String.prototype.replace),T=b.call(Function.call,String.prototype.slice),j=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,A=/\\(\\)?/g,O=function(e){var t=T(e,0,1),r=T(e,-1);if("%"===t&&"%"!==r)throw new o("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new o("invalid intrinsic syntax, expected opening `%`");var n=[];return w(e,j,(function(e,t,r,o){n[n.length]=r?w(o,A,"$1"):t||e})),n},k=function(e,t){var r,n=e;if(v(m,n)&&(n="%"+(r=m[n])[0]+"%"),v(d,n)){var i=d[n];if(i===f&&(i=g(n)),void 0===i&&!t)throw new a("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new o("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new a('"allowMissing" argument must be a boolean');var r=O(e),n=r.length>0?r[0]:"",i=k("%"+n+"%",t),s=i.name,l=i.value,u=!1,p=i.alias;p&&(n=p[0],S(r,C([0,1],p)));for(var h=1,f=!0;h<r.length;h+=1){var y=r[h],g=T(y,0,1),m=T(y,-1);if(('"'===g||"'"===g||"`"===g||'"'===m||"'"===m||"`"===m)&&g!==m)throw new o("property names with quotes must have matching quotes");if("constructor"!==y&&f||(u=!0),v(d,s="%"+(n+="."+y)+"%"))l=d[s];else if(null!=l){if(!(y in l)){if(!t)throw new a("base intrinsic for "+e+" exists, but the property is not available.");return}if(c&&h+1>=r.length){var b=c(l,y);l=(f=!!b)&&"get"in b&&!("originalValue"in b.get)?b.get:l[y]}else f=v(l,y),l=l[y];f&&!u&&(d[s]=l)}}return l}},405:(e,t,r)=>{"use strict";var n="undefined"!=typeof Symbol&&Symbol,o=r(419);e.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&o()}},419:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},642:(e,t,r)=>{"use strict";var n=r(612);e.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},320:e=>{"use strict";var t,r,n=Function.prototype.toString,o="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof o&&"function"==typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw r}}),r={},o((function(){throw 42}),null,t)}catch(e){e!==r&&(o=null)}else o=null;var i=/^\s*class\b/,a=function(e){try{var t=n.call(e);return i.test(t)}catch(e){return!1}},s=Object.prototype.toString,c="function"==typeof Symbol&&!!Symbol.toStringTag,l="object"==typeof document&&void 0===document.all&&void 0!==document.all?document.all:{};e.exports=o?function(e){if(e===l)return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;try{o(e,null,t)}catch(e){if(e!==r)return!1}return!a(e)}:function(e){if(e===l)return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(c)return function(e){try{return!a(e)&&(n.call(e),!0)}catch(e){return!1}}(e);if(a(e))return!1;var t=s.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}},631:(e,t,r)=>{var n="function"==typeof Map&&Map.prototype,o=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i=n&&o&&"function"==typeof o.get?o.get:null,a=n&&Map.prototype.forEach,s="function"==typeof Set&&Set.prototype,c=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,l=s&&c&&"function"==typeof c.get?c.get:null,u=s&&Set.prototype.forEach,p="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,h="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,f="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,y=Boolean.prototype.valueOf,d=Object.prototype.toString,g=Function.prototype.toString,m=String.prototype.match,b="function"==typeof BigInt?BigInt.prototype.valueOf:null,v=Object.getOwnPropertySymbols,C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,S="function"==typeof Symbol&&"object"==typeof Symbol.iterator,w=Object.prototype.propertyIsEnumerable,T=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null),j=r(654).custom,A=j&&R(j)?j:null,O="function"==typeof Symbol&&void 0!==Symbol.toStringTag?Symbol.toStringTag:null;function k(e,t,r){var n="double"===(r.quoteStyle||t)?'"':"'";return n+e+n}function P(e){return String(e).replace(/"/g,"&quot;")}function x(e){return!("[object Array]"!==E(e)||O&&"object"==typeof e&&O in e)}function R(e){if(S)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!C)return!1;try{return C.call(e),!0}catch(e){}return!1}e.exports=function e(t,r,n,o){var s=r||{};if(_(s,"quoteStyle")&&"single"!==s.quoteStyle&&"double"!==s.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(_(s,"maxStringLength")&&("number"==typeof s.maxStringLength?s.maxStringLength<0&&s.maxStringLength!==1/0:null!==s.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var c=!_(s,"customInspect")||s.customInspect;if("boolean"!=typeof c&&"symbol"!==c)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(_(s,"indent")&&null!==s.indent&&"\t"!==s.indent&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return D(t,s);if("number"==typeof t)return 0===t?1/0/t>0?"0":"-0":String(t);if("bigint"==typeof t)return String(t)+"n";var d=void 0===s.depth?5:s.depth;if(void 0===n&&(n=0),n>=d&&d>0&&"object"==typeof t)return x(t)?"[Array]":"[Object]";var v,w=function(e,t){var r;if("\t"===e.indent)r="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;r=Array(e.indent+1).join(" ")}return{base:r,prev:Array(t+1).join(r)}}(s,n);if(void 0===o)o=[];else if(N(o,t)>=0)return"[Circular]";function j(t,r,i){if(r&&(o=o.slice()).push(r),i){var a={depth:s.depth};return _(s,"quoteStyle")&&(a.quoteStyle=s.quoteStyle),e(t,a,n+1,o)}return e(t,s,n+1,o)}if("function"==typeof t){var I=function(e){if(e.name)return e.name;var t=m.call(g.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),U=B(t,j);return"[Function"+(I?": "+I:" (anonymous)")+"]"+(U.length>0?" { "+U.join(", ")+" }":"")}if(R(t)){var W=S?String(t).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):C.call(t);return"object"!=typeof t||S?W:F(W)}if((v=t)&&"object"==typeof v&&("undefined"!=typeof HTMLElement&&v instanceof HTMLElement||"string"==typeof v.nodeName&&"function"==typeof v.getAttribute)){for(var L="<"+String(t.nodeName).toLowerCase(),$=t.attributes||[],G=0;G<$.length;G++)L+=" "+$[G].name+"="+k(P($[G].value),"double",s);return L+=">",t.childNodes&&t.childNodes.length&&(L+="..."),L+"</"+String(t.nodeName).toLowerCase()+">"}if(x(t)){if(0===t.length)return"[]";var K=B(t,j);return w&&!function(e){for(var t=0;t<e.length;t++)if(N(e[t],"\n")>=0)return!1;return!0}(K)?"["+V(K,w)+"]":"[ "+K.join(", ")+" ]"}if(function(e){return!("[object Error]"!==E(e)||O&&"object"==typeof e&&O in e)}(t)){var q=B(t,j);return 0===q.length?"["+String(t)+"]":"{ ["+String(t)+"] "+q.join(", ")+" }"}if("object"==typeof t&&c){if(A&&"function"==typeof t[A])return t[A]();if("symbol"!==c&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!i||!e||"object"!=typeof e)return!1;try{i.call(e);try{l.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var z=[];return a.call(t,(function(e,r){z.push(j(r,t,!0)+" => "+j(e,t))})),H("Map",i.call(t),z,w)}if(function(e){if(!l||!e||"object"!=typeof e)return!1;try{l.call(e);try{i.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var J=[];return u.call(t,(function(e){J.push(j(e,t))})),H("Set",l.call(t),J,w)}if(function(e){if(!p||!e||"object"!=typeof e)return!1;try{p.call(e,p);try{h.call(e,h)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return M("WeakMap");if(function(e){if(!h||!e||"object"!=typeof e)return!1;try{h.call(e,h);try{p.call(e,p)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return M("WeakSet");if(function(e){if(!f||!e||"object"!=typeof e)return!1;try{return f.call(e),!0}catch(e){}return!1}(t))return M("WeakRef");if(function(e){return!("[object Number]"!==E(e)||O&&"object"==typeof e&&O in e)}(t))return F(j(Number(t)));if(function(e){if(!e||"object"!=typeof e||!b)return!1;try{return b.call(e),!0}catch(e){}return!1}(t))return F(j(b.call(t)));if(function(e){return!("[object Boolean]"!==E(e)||O&&"object"==typeof e&&O in e)}(t))return F(y.call(t));if(function(e){return!("[object String]"!==E(e)||O&&"object"==typeof e&&O in e)}(t))return F(j(String(t)));if(!function(e){return!("[object Date]"!==E(e)||O&&"object"==typeof e&&O in e)}(t)&&!function(e){return!("[object RegExp]"!==E(e)||O&&"object"==typeof e&&O in e)}(t)){var Q=B(t,j),X=T?T(t)===Object.prototype:t instanceof Object||t.constructor===Object,Y=t instanceof Object?"":"null prototype",Z=!X&&O&&Object(t)===t&&O in t?E(t).slice(8,-1):Y?"Object":"",ee=(X||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(Z||Y?"["+[].concat(Z||[],Y||[]).join(": ")+"] ":"");return 0===Q.length?ee+"{}":w?ee+"{"+V(Q,w)+"}":ee+"{ "+Q.join(", ")+" }"}return String(t)};var I=Object.prototype.hasOwnProperty||function(e){return e in this};function _(e,t){return I.call(e,t)}function E(e){return d.call(e)}function N(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function D(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return D(e.slice(0,t.maxStringLength),t)+n}return k(e.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,U),"single",t)}function U(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+t.toString(16).toUpperCase()}function F(e){return"Object("+e+")"}function M(e){return e+" { ? }"}function H(e,t,r,n){return e+" ("+t+") {"+(n?V(r,n):r.join(", "))+"}"}function V(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+e.join(","+r)+"\n"+t.prev}function B(e,t){var r=x(e),n=[];if(r){n.length=e.length;for(var o=0;o<e.length;o++)n[o]=_(e,o)?t(e[o],e):""}var i,a="function"==typeof v?v(e):[];if(S){i={};for(var s=0;s<a.length;s++)i["$"+a[s]]=a[s]}for(var c in e)_(e,c)&&(r&&String(Number(c))===c&&c<e.length||S&&i["$"+c]instanceof Symbol||(/[^\w$]/.test(c)?n.push(t(c,e)+": "+t(e[c],e)):n.push(c+": "+t(e[c],e))));if("function"==typeof v)for(var l=0;l<a.length;l++)w.call(e,a[l])&&n.push("["+t(a[l])+"]: "+t(e[a[l]],e));return n}},987:(e,t,r)=>{"use strict";var n;if(!Object.keys){var o=Object.prototype.hasOwnProperty,i=Object.prototype.toString,a=r(414),s=Object.prototype.propertyIsEnumerable,c=!s.call({toString:null},"toString"),l=s.call((function(){}),"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],p=function(e){var t=e.constructor;return t&&t.prototype===e},h={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!h["$"+e]&&o.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{p(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();n=function(e){var t=null!==e&&"object"==typeof e,r="[object Function]"===i.call(e),n=a(e),s=t&&"[object String]"===i.call(e),h=[];if(!t&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var y=l&&r;if(s&&e.length>0&&!o.call(e,0))for(var d=0;d<e.length;++d)h.push(String(d));if(n&&e.length>0)for(var g=0;g<e.length;++g)h.push(String(g));else for(var m in e)y&&"prototype"===m||!o.call(e,m)||h.push(String(m));if(c)for(var b=function(e){if("undefined"==typeof window||!f)return p(e);try{return p(e)}catch(e){return!1}}(e),v=0;v<u.length;++v)b&&"constructor"===u[v]||!o.call(e,u[v])||h.push(u[v]);return h}}e.exports=n},215:(e,t,r)=>{"use strict";var n=Array.prototype.slice,o=r(414),i=Object.keys,a=i?function(e){return i(e)}:r(987),s=Object.keys;a.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return o(e)?s(n.call(e)):s(e)})}else Object.keys=a;return Object.keys||a},e.exports=a},414:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){var r=t.call(e),n="[object Arguments]"===r;return n||(n="[object Array]"!==r&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),n}},385:(e,t,r)=>{"use strict";r(971)();var n=r(787),o=r(655),i=r(633),a=function(e,t){return new e((function(e){e(t)}))},s=Promise,c=function(e){var t=this;if("Object"!==i(t))throw new TypeError("receiver is not an Object");var r=o(t,s),c=e,l=e;return n(e)&&(c=function(e,t){return function(r){var n=t();return a(e,n).then((function(){return r}))}}(r,e),l=function(e,t){return function(r){var n=t();return a(e,n).then((function(){throw r}))}}(r,e)),t.then(c,l)};if(Object.getOwnPropertyDescriptor){var l=Object.getOwnPropertyDescriptor(c,"name");l&&l.configurable&&Object.defineProperty(c,"name",{configurable:!0,value:"finally"})}e.exports=c},628:(e,t,r)=>{"use strict";var n=r(559),o=r(289),i=r(385),a=r(76),s=r(547),c=n(a());o(c,{getPolyfill:a,implementation:i,shim:s}),e.exports=c},76:(e,t,r)=>{"use strict";var n=r(971),o=r(385);e.exports=function(){return n(),"function"==typeof Promise.prototype.finally?Promise.prototype.finally:o}},971:e=>{"use strict";e.exports=function(){if("function"!=typeof Promise)throw new TypeError("`Promise.prototype.finally` requires a global `Promise` be available.")}},547:(e,t,r)=>{"use strict";var n=r(971),o=r(76),i=r(289);e.exports=function(){n();var e=o();return i(Promise.prototype,{finally:e},{finally:function(){return Promise.prototype.finally!==e}}),e}},798:e=>{"use strict";var t=String.prototype.replace,r=/%20/g,n="RFC3986";e.exports={default:n,formatters:{RFC1738:function(e){return t.call(e,r,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:n}},129:(e,t,r)=>{"use strict";var n=r(261),o=r(235),i=r(798);e.exports={formats:i,parse:o,stringify:n}},235:(e,t,r)=>{"use strict";var n=r(769),o=Object.prototype.hasOwnProperty,i=Array.isArray,a={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},c=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},l=function(e,t,r,n){if(e){var i=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,s=r.depth>0&&/(\[[^[\]]*])/.exec(i),l=s?i.slice(0,s.index):i,u=[];if(l){if(!r.plainObjects&&o.call(Object.prototype,l)&&!r.allowPrototypes)return;u.push(l)}for(var p=0;r.depth>0&&null!==(s=a.exec(i))&&p<r.depth;){if(p+=1,!r.plainObjects&&o.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(s[1])}return s&&u.push("["+i.slice(s.index)+"]"),function(e,t,r,n){for(var o=n?t:c(t,r),i=e.length-1;i>=0;--i){var a,s=e[i];if("[]"===s&&r.parseArrays)a=[].concat(o);else{a=r.plainObjects?Object.create(null):{};var l="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,u=parseInt(l,10);r.parseArrays||""!==l?!isNaN(u)&&s!==l&&String(u)===l&&u>=0&&r.parseArrays&&u<=r.arrayLimit?(a=[])[u]=o:"__proto__"!==l&&(a[l]=o):a={0:o}}o=a}return o}(u,t,r,n)}};e.exports=function(e,t){var r=function(e){if(!e)return a;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?a.charset:e.charset;return{allowDots:void 0===e.allowDots?a.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:a.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:a.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:a.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:a.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:a.comma,decoder:"function"==typeof e.decoder?e.decoder:a.decoder,delimiter:"string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:a.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:a.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:a.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:a.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:a.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var u="string"==typeof e?function(e,t){var r,l={},u=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,p=t.parameterLimit===1/0?void 0:t.parameterLimit,h=u.split(t.delimiter,p),f=-1,y=t.charset;if(t.charsetSentinel)for(r=0;r<h.length;++r)0===h[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===h[r]?y="utf-8":"utf8=%26%2310003%3B"===h[r]&&(y="iso-8859-1"),f=r,r=h.length);for(r=0;r<h.length;++r)if(r!==f){var d,g,m=h[r],b=m.indexOf("]="),v=-1===b?m.indexOf("="):b+1;-1===v?(d=t.decoder(m,a.decoder,y,"key"),g=t.strictNullHandling?null:""):(d=t.decoder(m.slice(0,v),a.decoder,y,"key"),g=n.maybeMap(c(m.slice(v+1),t),(function(e){return t.decoder(e,a.decoder,y,"value")}))),g&&t.interpretNumericEntities&&"iso-8859-1"===y&&(g=s(g)),m.indexOf("[]=")>-1&&(g=i(g)?[g]:g),o.call(l,d)?l[d]=n.combine(l[d],g):l[d]=g}return l}(e,r):e,p=r.plainObjects?Object.create(null):{},h=Object.keys(u),f=0;f<h.length;++f){var y=h[f],d=l(y,u[y],r,"string"==typeof e);p=n.merge(p,d,r)}return!0===r.allowSparse?p:n.compact(p)}},261:(e,t,r)=>{"use strict";var n=r(478),o=r(769),i=r(798),a=Object.prototype.hasOwnProperty,s={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},c=Array.isArray,l=String.prototype.split,u=Array.prototype.push,p=function(e,t){u.apply(e,c(t)?t:[t])},h=Date.prototype.toISOString,f=i.default,y={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:o.encode,encodeValuesOnly:!1,format:f,formatter:i.formatters[f],indices:!1,serializeDate:function(e){return h.call(e)},skipNulls:!1,strictNullHandling:!1},d={},g=function e(t,r,i,a,s,u,h,f,g,m,b,v,C,S,w){for(var T,j=t,A=w,O=0,k=!1;void 0!==(A=A.get(d))&&!k;){var P=A.get(t);if(O+=1,void 0!==P){if(P===O)throw new RangeError("Cyclic object value");k=!0}void 0===A.get(d)&&(O=0)}if("function"==typeof h?j=h(r,j):j instanceof Date?j=m(j):"comma"===i&&c(j)&&(j=o.maybeMap(j,(function(e){return e instanceof Date?m(e):e}))),null===j){if(a)return u&&!C?u(r,y.encoder,S,"key",b):r;j=""}if("string"==typeof(T=j)||"number"==typeof T||"boolean"==typeof T||"symbol"==typeof T||"bigint"==typeof T||o.isBuffer(j)){if(u){var x=C?r:u(r,y.encoder,S,"key",b);if("comma"===i&&C){for(var R=l.call(String(j),","),I="",_=0;_<R.length;++_)I+=(0===_?"":",")+v(u(R[_],y.encoder,S,"value",b));return[v(x)+"="+I]}return[v(x)+"="+v(u(j,y.encoder,S,"value",b))]}return[v(r)+"="+v(String(j))]}var E,N=[];if(void 0===j)return N;if("comma"===i&&c(j))E=[{value:j.length>0?j.join(",")||null:void 0}];else if(c(h))E=h;else{var D=Object.keys(j);E=f?D.sort(f):D}for(var U=0;U<E.length;++U){var F=E[U],M="object"==typeof F&&void 0!==F.value?F.value:j[F];if(!s||null!==M){var H=c(j)?"function"==typeof i?i(r,F):r:r+(g?"."+F:"["+F+"]");w.set(t,O);var V=n();V.set(d,w),p(N,e(M,H,i,a,s,u,h,f,g,m,b,v,C,S,V))}}return N};e.exports=function(e,t){var r,o=e,l=function(e){if(!e)return y;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||y.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=i.default;if(void 0!==e.format){if(!a.call(i.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=i.formatters[r],o=y.filter;return("function"==typeof e.filter||c(e.filter))&&(o=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:y.addQueryPrefix,allowDots:void 0===e.allowDots?y.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:y.charsetSentinel,delimiter:void 0===e.delimiter?y.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:y.encode,encoder:"function"==typeof e.encoder?e.encoder:y.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:y.encodeValuesOnly,filter:o,format:r,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:y.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:y.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:y.strictNullHandling}}(t);"function"==typeof l.filter?o=(0,l.filter)("",o):c(l.filter)&&(r=l.filter);var u,h=[];if("object"!=typeof o||null===o)return"";u=t&&t.arrayFormat in s?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var f=s[u];r||(r=Object.keys(o)),l.sort&&r.sort(l.sort);for(var d=n(),m=0;m<r.length;++m){var b=r[m];l.skipNulls&&null===o[b]||p(h,g(o[b],b,f,l.strictNullHandling,l.skipNulls,l.encode?l.encoder:null,l.filter,l.sort,l.allowDots,l.serializeDate,l.format,l.formatter,l.encodeValuesOnly,l.charset,d))}var v=h.join(l.delimiter),C=!0===l.addQueryPrefix?"?":"";return l.charsetSentinel&&("iso-8859-1"===l.charset?C+="utf8=%26%2310003%3B&":C+="utf8=%E2%9C%93&"),v.length>0?C+v:""}},769:(e,t,r)=>{"use strict";var n=r(798),o=Object.prototype.hasOwnProperty,i=Array.isArray,a=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),s=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r};e.exports={arrayToObject:s,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var o=t[n],a=o.obj[o.prop],s=Object.keys(a),c=0;c<s.length;++c){var l=s[c],u=a[l];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(t.push({obj:a,prop:l}),r.push(u))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(i(r)){for(var n=[],o=0;o<r.length;++o)void 0!==r[o]&&n.push(r[o]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r,o,i){if(0===e.length)return e;var s=e;if("symbol"==typeof e?s=Symbol.prototype.toString.call(e):"string"!=typeof e&&(s=String(e)),"iso-8859-1"===r)return escape(s).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var c="",l=0;l<s.length;++l){var u=s.charCodeAt(l);45===u||46===u||95===u||126===u||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||i===n.RFC1738&&(40===u||41===u)?c+=s.charAt(l):u<128?c+=a[u]:u<2048?c+=a[192|u>>6]+a[128|63&u]:u<55296||u>=57344?c+=a[224|u>>12]+a[128|u>>6&63]+a[128|63&u]:(l+=1,u=65536+((1023&u)<<10|1023&s.charCodeAt(l)),c+=a[240|u>>18]+a[128|u>>12&63]+a[128|u>>6&63]+a[128|63&u])}return c},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(i(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function e(t,r,n){if(!r)return t;if("object"!=typeof r){if(i(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(n&&(n.plainObjects||n.allowPrototypes)||!o.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var a=t;return i(t)&&!i(r)&&(a=s(t,n)),i(t)&&i(r)?(r.forEach((function(r,i){if(o.call(t,i)){var a=t[i];a&&"object"==typeof a&&r&&"object"==typeof r?t[i]=e(a,r,n):t.push(r)}else t[i]=r})),t):Object.keys(r).reduce((function(t,i){var a=r[i];return o.call(t,i)?t[i]=e(t[i],a,n):t[i]=a,t}),a)}}},478:(e,t,r)=>{"use strict";var n=r(210),o=r(924),i=r(631),a=n("%TypeError%"),s=n("%WeakMap%",!0),c=n("%Map%",!0),l=o("WeakMap.prototype.get",!0),u=o("WeakMap.prototype.set",!0),p=o("WeakMap.prototype.has",!0),h=o("Map.prototype.get",!0),f=o("Map.prototype.set",!0),y=o("Map.prototype.has",!0),d=function(e,t){for(var r,n=e;null!==(r=n.next);n=r)if(r.key===t)return n.next=r.next,r.next=e.next,e.next=r,r};e.exports=function(){var e,t,r,n={assert:function(e){if(!n.has(e))throw new a("Side channel does not contain "+i(e))},get:function(n){if(s&&n&&("object"==typeof n||"function"==typeof n)){if(e)return l(e,n)}else if(c){if(t)return h(t,n)}else if(r)return function(e,t){var r=d(e,t);return r&&r.value}(r,n)},has:function(n){if(s&&n&&("object"==typeof n||"function"==typeof n)){if(e)return p(e,n)}else if(c){if(t)return y(t,n)}else if(r)return function(e,t){return!!d(e,t)}(r,n);return!1},set:function(n,o){s&&n&&("object"==typeof n||"function"==typeof n)?(e||(e=new s),u(e,n,o)):c?(t||(t=new c),f(t,n,o)):(r||(r={key:{},next:null}),function(e,t,r){var n=d(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}}(r,n,o))}};return n}},300:t=>{"use strict";t.exports=e},613:e=>{"use strict";e.exports=t},654:()=>{},912:(e,t,r)=>{"use strict";var n=r(210)("%Array%"),o=!n.isArray&&r(924)("Object.prototype.toString");e.exports=n.isArray||function(e){return"[object Array]"===o(e)}},950:(e,t,r)=>{"use strict";var n=r(210)("%TypeError%"),o=r(435),i=r(682),a=r(334),s=r(527),c=r(746),l=r(305),u=r(484),p=r(916),h=r(633);e.exports=function(e,t,r){if("Object"!==h(e))throw new n("Assertion failed: Type(O) is not Object");if(!l(t))throw new n("Assertion failed: IsPropertyKey(P) is not true");var f=o({Type:h,IsDataDescriptor:c,IsAccessorDescriptor:s},r)?r:p(r);if(!o({Type:h,IsDataDescriptor:c,IsAccessorDescriptor:s},f))throw new n("Assertion failed: Desc is not a valid Property Descriptor");return i(c,u,a,e,t,f)}},334:(e,t,r)=>{"use strict";var n=r(188),o=r(633);e.exports=function(e){if(void 0===e)return e;n(o,"Property Descriptor","Desc",e);var t={};return"[[Value]]"in e&&(t.value=e["[[Value]]"]),"[[Writable]]"in e&&(t.writable=e["[[Writable]]"]),"[[Get]]"in e&&(t.get=e["[[Get]]"]),"[[Set]]"in e&&(t.set=e["[[Set]]"]),"[[Enumerable]]"in e&&(t.enumerable=e["[[Enumerable]]"]),"[[Configurable]]"in e&&(t.configurable=e["[[Configurable]]"]),t}},527:(e,t,r)=>{"use strict";var n=r(642),o=r(188),i=r(633);e.exports=function(e){return void 0!==e&&(o(i,"Property Descriptor","Desc",e),!(!n(e,"[[Get]]")&&!n(e,"[[Set]]")))}},787:(e,t,r)=>{"use strict";e.exports=r(320)},974:(e,t,r)=>{"use strict";var n=r(445)("%Reflect.construct%",!0),o=r(950);try{o({},"",{"[[Get]]":function(){}})}catch(e){o=null}if(o&&n){var i={},a={};o(a,"length",{"[[Get]]":function(){throw i},"[[Enumerable]]":!0}),e.exports=function(e){try{n(e,a)}catch(e){return e===i}}}else e.exports=function(e){return"function"==typeof e&&!!e.prototype}},746:(e,t,r)=>{"use strict";var n=r(642),o=r(188),i=r(633);e.exports=function(e){return void 0!==e&&(o(i,"Property Descriptor","Desc",e),!(!n(e,"[[Value]]")&&!n(e,"[[Writable]]")))}},305:e=>{"use strict";e.exports=function(e){return"string"==typeof e||"symbol"==typeof e}},484:(e,t,r)=>{"use strict";var n=r(86);e.exports=function(e,t){return e===t?0!==e||1/e==1/t:n(e)&&n(t)}},655:(e,t,r)=>{"use strict";var n=r(210),o=n("%Symbol.species%",!0),i=n("%TypeError%"),a=r(974),s=r(633);e.exports=function(e,t){if("Object"!==s(e))throw new i("Assertion failed: Type(O) is not Object");var r=e.constructor;if(void 0===r)return t;if("Object"!==s(r))throw new i("O.constructor is not an Object");var n=o?r[o]:void 0;if(null==n)return t;if(a(n))return n;throw new i("no constructor found")}},731:e=>{"use strict";e.exports=function(e){return!!e}},916:(e,t,r)=>{"use strict";var n=r(642),o=r(210)("%TypeError%"),i=r(633),a=r(731),s=r(787);e.exports=function(e){if("Object"!==i(e))throw new o("ToPropertyDescriptor requires an object");var t={};if(n(e,"enumerable")&&(t["[[Enumerable]]"]=a(e.enumerable)),n(e,"configurable")&&(t["[[Configurable]]"]=a(e.configurable)),n(e,"value")&&(t["[[Value]]"]=e.value),n(e,"writable")&&(t["[[Writable]]"]=a(e.writable)),n(e,"get")){var r=e.get;if(void 0!==r&&!s(r))throw new o("getter must be a function");t["[[Get]]"]=r}if(n(e,"set")){var c=e.set;if(void 0!==c&&!s(c))throw new o("setter must be a function");t["[[Set]]"]=c}if((n(t,"[[Get]]")||n(t,"[[Set]]"))&&(n(t,"[[Value]]")||n(t,"[[Writable]]")))throw new o("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return t}},633:(e,t,r)=>{"use strict";var n=r(951);e.exports=function(e){return"symbol"==typeof e?"Symbol":"bigint"==typeof e?"BigInt":n(e)}},951:e=>{"use strict";e.exports=function(e){return null===e?"Null":void 0===e?"Undefined":"function"==typeof e||"object"==typeof e?"Object":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"string"==typeof e?"String":void 0}},445:(e,t,r)=>{"use strict";e.exports=r(210)},682:(e,t,r)=>{"use strict";var n=r(210)("%Object.defineProperty%",!0);if(n)try{n({},"a",{value:1})}catch(e){n=null}var o=Object.defineProperty&&0===Object.defineProperty([],"length",{value:1}).length,i=o&&r(912),a=r(924)("Object.prototype.propertyIsEnumerable");e.exports=function(e,t,r,s,c,l){if(!n){if(!e(l))return!1;if(!l["[[Configurable]]"]||!l["[[Writable]]"])return!1;if(c in s&&a(s,c)!==!!l["[[Enumerable]]"])return!1;var u=l["[[Value]]"];return s[c]=u,t(s[c],u)}return o&&"length"===c&&"[[Value]]"in l&&i(s)&&s.length!==l["[[Value]]"]?(s.length=l["[[Value]]"],s.length===l["[[Value]]"]):(n(s,c,r(l)),!0)}},188:(e,t,r)=>{"use strict";var n=r(210),o=n("%TypeError%"),i=n("%SyntaxError%"),a=r(642),s={"Property Descriptor":function(e,t){if("Object"!==e(t))return!1;var r={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var n in t)if(a(t,n)&&!r[n])return!1;var i=a(t,"[[Value]]"),s=a(t,"[[Get]]")||a(t,"[[Set]]");if(i&&s)throw new o("Property Descriptors may not be both accessor and data descriptors");return!0}};e.exports=function(e,t,r,n){var a=s[t];if("function"!=typeof a)throw new i("unknown record type: "+t);if(!a(e,n))throw new o(r+" must be a "+t)}},86:e=>{"use strict";e.exports=Number.isNaN||function(e){return e!=e}},435:(e,t,r)=>{"use strict";var n=r(210),o=r(642),i=n("%TypeError%");e.exports=function(e,t){if("Object"!==e.Type(t))return!1;var r={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var n in t)if(o(t,n)&&!r[n])return!1;if(e.IsDataDescriptor(t)&&e.IsAccessorDescriptor(t))throw new i("Property Descriptors may not be both accessor and data descriptors");return!0}}},n={};function o(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={exports:{}};return r[e](i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{"use strict";o.r(i),o.d(i,{AccountDataContext:()=>F,AccountManager:()=>M,DefaultThingPos:()=>g,EmailDTO:()=>v,Helpers:()=>R,HttpRequestCanceler:()=>x,RealtimeConnectionStates:()=>T,RealtimeConnector:()=>k,RegisterByOnlyEmailDTO:()=>b,RegisterByOnlyEmailStatus:()=>m,SocketIORealtimeConnector:()=>P,Thing:()=>H,ThingDTO:()=>w,ThingDeletedStates:()=>t,ThingKind:()=>d,ThingUserChangeClaims:()=>f,ThingUserReadClaims:()=>p,ThingUserRoles:()=>n,ThingUserStates:()=>s,ThingUserVisibility:()=>l,ThingsDataContext:()=>V,ThingsManager:()=>B,UserDTO:()=>C,UserInfoDTO:()=>S,th:()=>L,validateThingDeletedStatus:()=>r,validateThingUserChangeClaims:()=>y,validateThingUserReadClaims:()=>h,validateThingUserRoles:()=>a,validateThingUserStatus:()=>c,validateThingUserVisibility:()=>u});var e=o(628);const t={NoMatter:0,Ok:1,Deleted:2};function r(e){switch(e){case t.NoMatter:case t.Ok:case t.Deleted:return!0}return!1}const n={NoMatter:0,Administrator:1,User:2};function a(e){switch(e){case n.NoMatter:case n.Administrator:case n.User:return!0}return!1}const s={NoMatter:0,Ok:1,WaitForAuth:2,Deleted:4};function c(e){switch(e){case s.NoMatter:case s.Ok:case s.WaitForAuth:case s.Deleted:return!0}return!1}const l={NoMatter:0,Visible:1,Hidden:2};function u(e){switch(e){case l.NoMatter:case l.Visible:case l.Hidden:return!0}return!1}const p={NoClaims:0,CanReadCreationDate:2,CanReadName:4,CanReadDescription:8,CanReadKind:16,CanReadValue:32,CanReadDeletedStatus:64,CanReadPublicReadClaims:2048,CanReadPublicChangeClaims:4096,CanReadEveryoneReadClaims:8192,CanReadEveryoneChangeClaims:16384,CanReadThingUserRights:128,CanReadThingUserRole:256,CanReadThingUserStatus:512,CanReadThingUserVisibility:32768,CanReadThingUserReadClaims:1024,CanReadThingUserChangeClaims:1};function h(e){return e<=p.AllClaims&&e>=p.NoClaims}p.AllClaims=p.CanReadThingUserChangeClaims|p.CanReadCreationDate|p.CanReadName|p.CanReadDescription|p.CanReadKind|p.CanReadValue|p.CanReadDeletedStatus|p.CanReadThingUserRights|p.CanReadThingUserRole|p.CanReadThingUserVisibility|p.CanReadThingUserStatus|p.CanReadThingUserReadClaims|p.CanReadPublicReadClaims|p.CanReadPublicChangeClaims|p.CanReadEveryoneReadClaims|p.CanReadEveryoneChangeClaims;const f={NoClaims:0,CanDeleteThing:1,CanChangeName:2,CanChangeDescription:4,CanChangeKind:8,CanChangeValue:16,CanChangeDeletedStatus:32,CanChangePublicReadClaims:4096,CanChangePublicChangeClaims:8192,CanChangeEveryoneReadClaims:16384,CanChangeEveryoneChangeClaims:32768,CanAddThingUserRights:64,CanDeleteThingUserRights:128,CanChangeThingUserRole:256,CanChangeThingUserStatus:512,CanChangeThingUserVisibility:524288,CanChangeThingUserReadClaims:1024,CanChangeThingUserChangeClaims:2048,CanAddChildrenThing:65536,CanRemoveChildrenThing:131072,CanOtherUsersChangeMyThingPos:262144};function y(e){return e<=f.AllClaims&&e>=f.NoClaims}f.AllClaims=f.CanDeleteThing|f.CanChangeName|f.CanChangeDescription|f.CanChangeKind|f.CanChangeValue|f.CanChangeDeletedStatus|f.CanAddThingUserRights|f.CanDeleteThingUserRights|f.CanChangeThingUserRole|f.CanChangeThingUserVisibility|f.CanChangeThingUserStatus|f.CanChangeThingUserReadClaims|f.CanChangeThingUserChangeClaims|f.CanChangePublicReadClaims|f.CanChangePublicChangeClaims|f.CanChangeEveryoneReadClaims|f.CanChangeEveryoneChangeClaims|f.CanAddChildrenThing|f.CanRemoveChildrenThing|f.CanOtherUsersChangeMyThingPos;const d={NoMatter:"0",genericId:"1",genericTxt:"the bees are laborious"},g=Number.MAX_SAFE_INTEGER,m={UserAlreadyRegistered:1,ConfirmPendingEmailSent:2};class b{constructor(e,t,r){this.email=e,this.confirmationToken=t,this.status=r}}class v{constructor(e){this.value=e.email,this.isConfimed=e.isConfimed}}class C{constructor(e,t){this.id=e._id,this.name=e.name,t&&(this.emails=[],this.username=e.userName,e.emails.foreach((e=>this.emails.push(new v(e)))),this.masterApiKey=e.masterApiKey)}}class S{constructor(){this.id="",this.name="the bees are laborious"}}class w{constructor(){this.id="",this.creationDate=null,this.name="",this.kind=d.genericId,this.pos=0,this.deletedStatus=t.NoMatter,this.deletedDate=null,this.publicReadClaims=p.NoClaims,this.publicChangeClaims=f.NoClaims,this.everyoneReadClaims=p.NoClaims,this.everyoneChangeClaims=f.NoClaims,this.value={},this.userStatus=s.NoMatter,this.userRole=n.NoMatter,this.userVisibility=l.NoMatter,this.userReadClaims=p.NoClaims,this.userChangeClaims=f.NoClaims,this.usersInfos=[]}}var T,j=o(300),A=o.n(j),O=o(613);!function(e){e[e.Connecting=0]="Connecting",e[e.Connected=1]="Connected",e[e.Reconnecting=2]="Reconnecting",e[e.Disconnected=4]="Disconnected"}(T||(T={}));class k{constructor(e,t,r,n,o){this.connectionStatus=4,this.url="",this.authHook=null,this.errorHook=null,this.stateChangedHook=null,this.connectErrorHook=null,this.url=e,this.authHook=t,this.errorHook=r,this.connectErrorHook=n,this.stateChangedHook=o}on_connectionStatusChange(e){this.connectionStatus!=e&&(this.connectionStatus=e,this.stateChangedHook&&this.stateChangedHook(e))}subscribe(){}unsubscribe(){}setHook(e,t){}remHook(e,t){}async api(){return await A().get(this.url+"/api")}}class P extends k{constructor(e,t,r,n,o){super(e,t,r,n,o),this.socket=null}on_error(e){this.errorHook&&this.errorHook(e)}on_connect_error(e){this.connectErrorHook&&this.connectErrorHook(e)}on_connect(){this.on_connectionStatusChange&&this.on_connectionStatusChange(1)}on_disconnect(e){this.on_connectionStatusChange&&this.on_connectionStatusChange(4)}subscribe(){if(this.socket)return;let e=this.url;this.authHook&&(e+="?"+this.authHook()),this.socket=(0,O.io)(e),this.socket.on("error",(e=>this.on_error(e))),this.socket.on("connect_error",(e=>this.on_connect_error(e))),this.socket.on("connect",(()=>this.on_connect())),this.socket.on("disconnect",(e=>this.on_disconnect(e)))}unsubscribe(){this.socket&&(this.socket.disconnect(),this.socket=null)}setHook(e,t){this.socket&&this.socket.on(e,t)}remHook(e,t){this.socket&&this.socket.off(e,t)}}class x{constructor(){this.cancelerToken=void 0,this.executor=null,this.reset()}cancel(){this.executor&&this.executor()}reset(){this.executor=null,this.cancelerToken=new(A().CancelToken)((e=>{this.executor=e}))}}class R{static getRangeItemsFromResponse(e){var t=e.headers["content-range"],r=0,n=0,o=0;if(t){var i=t.split("/");if(0!=i.length){var a=i[0].split(" ");if(2==a.length){var s=a[1].split("-");2==s.length&&(r=parseInt(s[0]),n=parseInt(s[1]))}2==i.length&&(o=parseInt(i[1]))}}return{top:r,skip:n,totalItems:o}}}var I=o(129);function _(e){this.message=e}_.prototype=new Error,_.prototype.name="InvalidCharacterError";var E="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new _("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,o=0,i=0,a="";n=t.charAt(i++);~n&&(r=o%4?64*r+n:n,o++%4)?a+=String.fromCharCode(255&r>>(-2*o&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return a};function N(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(E(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return E(t)}}function D(e){this.message=e}D.prototype=new Error,D.prototype.name="InvalidTokenError";const U=function(e,t){if("string"!=typeof e)throw new D("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(N(e.split(".")[r]))}catch(e){throw new D("Invalid token specified: "+e.message)}};class F{constructor(e,t){this.accountUrl="",this.accountUrl=e.api+"/account",A().interceptors.request.use((async e=>{if(!t)return e;if(!t.isLoggedIn())return e;if(!t.isAccessTokenExpired())return e.headers={...e.headers,...t.getSecurityHeader()},e;try{return await t.refreshToken(),e.headers={...e.headers,...t.getSecurityHeader()},e}catch(e){throw t.resetApp(),e}}),(function(e){return Promise.reject(e)}))}async login({username:e,password:t}){const r={username:e,password:t},n=await A().post(this.accountUrl+"/login",I.stringify(r),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}),o=U(n.data.access_token);return{accessToken:n.data.access_token,id:o.sub,name:o.name,exp:o.exp,iat:o.iat}}async loginBasic({username:e,password:t}){return(await A().post(this.accountUrl+"/login","grant_type=client_credentials",{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa(e+":"+t)}})).data}async logout(){return(await A().get(this.accountUrl+"/logout")).data}}class M{constructor(e,t,r,n){this._appName=null,this._accessToken=null,this._userId=null,this._userName=null,this.deltaTime=0,this._apiKey=null,this.defaultAccountActionControl={isLoggedIn:()=>null!==this.getSecurityHeader(),isAccessTokenExpired:()=>this.isAccessTokenExpired,getSecurityHeader:()=>this.getSecurityHeader(),refreshToken:()=>Promise.reject(),resetApp:()=>console.log("resetApp")},this.getSecurityHeader=()=>this.apiKey?{thapikey:this.apiKey}:this.accessToken?{Authorization:"Bearer "+this.accessToken}:null,this.getSecurityToken=()=>this.apiKey?"token="+this.apiKey:this.accessToken?"token="+this.accessToken:null,this._appName=e;let o=n||this.defaultAccountActionControl;this.accountDataContext=new F(t,o),this.getLoginData(r),this.apiKey||this.accessToken&&this.isAccessTokenExpired&&this.resetLoginData()}resetLoginData(){this._accessToken=null,this._userId=null,this._userName=null,"undefined"!=typeof localStorage&&(localStorage.removeItem(this._appName+"_Remember"),localStorage.removeItem(this._appName+"_AccessToken"),sessionStorage.removeItem(this._appName+"_AccessToken"),localStorage.removeItem(this._appName+"_DeltaTime"),sessionStorage.removeItem(this._appName+"_DeltaTime"),localStorage.removeItem(this._appName+"_UserId"),sessionStorage.removeItem(this._appName+"_UserId"),localStorage.removeItem(this._appName+"_Username"),sessionStorage.removeItem(this._appName+"_Username"))}setLoginData(e,t){this._apiKey=null,this._accessToken=e.accessToken,this._userId=e.id,this._userName=e.name,this.deltaTime=Math.floor(Date.now()/1e3)-e.iat,"undefined"!=typeof localStorage&&(sessionStorage.setItem(this._appName+"_AccessToken",this._accessToken),sessionStorage.setItem(this._appName+"_UserId",this._userId),sessionStorage.setItem(this._appName+"_Username",this._userName),sessionStorage.setItem(this._appName+"_DeltaTime",this.deltaTime.toString()),localStorage.setItem(this._appName+"_Remember",1==t?"true":"false"),0!=t&&(localStorage.setItem(this._appName+"_AccessToken",this._accessToken),localStorage.setItem(this._appName+"_UserId",this._userId),localStorage.setItem(this._appName+"_Username",this._userName),localStorage.setItem(this._appName+"_DeltaTime",this.deltaTime.toString())))}getLoginData(e){if(e)return this.resetLoginData(),void(this._apiKey=e);if("undefined"==typeof localStorage)return;this._apiKey=null,this._accessToken=sessionStorage.getItem(this._appName+"_AccessToken"),this._userId=sessionStorage.getItem(this._appName+"_UserId"),this._userName=sessionStorage.getItem(this._appName+"_Username");let t=sessionStorage.getItem(this._appName+"_DeltaTime");this.deltaTime=t?parseInt(t):0,0!=this.remember&&(this._accessToken=localStorage.getItem(this._appName+"_AccessToken"),this._userId=localStorage.getItem(this._appName+"_UserId"),this._userName=localStorage.getItem(this._appName+"_Username"),t=localStorage.getItem(this._appName+"_DeltaTime"),this.deltaTime=t?parseInt(t):0)}get apiKey(){return this._apiKey}get accessToken(){return this._accessToken}get isAccessTokenExpired(){return!this.apiKey&&(!this.accessToken||U(this.accessToken).exp+this.deltaTime<Math.floor(Date.now()/1e3))}get isLoggedIn(){return!!this.apiKey||!!this.accessToken&&!this.isAccessTokenExpired}get remember(){return"undefined"!=typeof localStorage&&"true"==localStorage.getItem(this._appName+"_Remember")}async login(e,t,r){this._apiKey=null,this.resetLoginData();const n=await this.accountDataContext.login({username:e,password:t});return this.setLoginData(n,r),n}async logout(){try{return await this.accountDataContext.logout()}catch(e){throw e}finally{this._apiKey=null,this.resetLoginData()}}}class H{constructor(e){this.childrenSkip=0,this.childrenTotalItems=Number.MAX_SAFE_INTEGER,this.children=[],this.id="",this.creationDate=null,this.name="",this.kind="",this.pos=0,this.deletedStatus=0,this.deletedDate=null,this.publicReadClaims=0,this.publicChangeClaims=0,this.everyoneReadClaims=0,this.everyoneChangeClaims=0,this.userStatus=0,this.userRole=0,this.userVisibility=0,this.userReadClaims=0,this.userChangeClaims=0,this.usersInfos=[],this.value={},e&&(Object.assign(this,e),e.value&&(this.value=e.value))}addThingChild(e){this.children.unshift(new H(e))}collapse(){this.childrenSkip=0,this.children.splice(0,this.children.length)}shallowCopy(){let e=new H;return Object.assign(e,this),e}}class V{constructor(e){this.apiEndPointAddress="",this.apiEndPointAddress=e.api}thingsUrl(e){return this.apiEndPointAddress+"/things/"+(e||"")}thingsValueUrl(e){return this.apiEndPointAddress+"/things/"+e+"/value"}thingsCmdUrl(e){return this.apiEndPointAddress+"/things/"+e+"/cmd"}thingsPositionsUrl(){return this.apiEndPointAddress+"/things/positions"}thingChildrenUrl(e,t){return this.apiEndPointAddress+"/things/"+e+"/childrenIds/"+(t||"")}thingDeleteChildUrl(e,t){return this.apiEndPointAddress+"/things/"+e+"/childrenIds/"+t}async getThing(e){return(await A().get(this.thingsUrl(e))).data}getThings(e,t){var r=this.thingsUrl()+"?"+(e.parentThingId?"&parentThingId="+e.parentThingId:"")+(e.thingFilter?"&thingFilter="+JSON.stringify(e.thingFilter):"")+(e.valueFilter?"&valueFilter="+JSON.stringify(e.valueFilter):"")+(e.orderBy?"&orderBy="+e.orderBy:"")+(e.skip?"&skip="+e.skip:"")+(e.top?"&top="+e.top:"");return A().get(r,{cancelToken:t?t.cancelerToken:void 0}).then((function(e){return{things:e.data,itemsRange:R.getRangeItemsFromResponse(e)}})).catch((function(e){throw A().isCancel(e)&&console.log("Request canceled",e.message),e})).finally((function(){}))}async createThing(e){return(await A().post(this.thingsUrl(),e)).data}async updateThing(e,t){return(await A().put(this.thingsUrl(e),t)).data}async deleteThing(e){return(await A().delete(this.thingsUrl(e))).data}async getThingChildrenIds(e){return(await A().get(this.thingChildrenUrl(e))).data}async addChildToParent(e,t){return(await A().post(this.thingChildrenUrl(e),JSON.stringify(t))).data}async deleteThingChild(e,t){return(await A().delete(this.thingDeleteChildUrl(e,t))).data}async getThingValue(e){return(await A().get(this.thingsValueUrl(e))).data}async putThingValue(e,t,r){let n=t?this.thingsCmdUrl(e):this.thingsValueUrl(e);return(await A().put(n,r)).data}async putThingsPositions(e){return(await A().put(this.thingsPositionsUrl(),e)).data}}class B{constructor(e,t,r,n,o){this.mainThing=e,this.thingKind=t,this.thingClaims=r,this.thingsDataContext=n,this.realtimeConnector=o,this.onCreateThing=e=>{e.kind!==this.thingKind||this.mainThing.addThingChild(e)},this.onUpdateThingValue=(e,t,r)=>{let n=this.searchThingById(e);n&&(r||(n.value=t))};let i=this.thingKind?{$and:[{kind:this.thingKind},{deletedStatus:1}]}:{deletedStatus:1};this.getThingsParams={parentThingId:null,thingFilter:i,top:10,skip:0,orderBy:null,valueFilter:null},this.getChindrenThingsParams={parentThingId:null,thingFilter:{deletedStatus:1},top:10,skip:0,orderBy:null,valueFilter:null}}reset(){this.mainThing.children.splice(0,this.mainThing.children.length),this.mainThing.childrenSkip=0,this.mainThing.childrenTotalItems=Number.MAX_SAFE_INTEGER,this.mainThing.usersInfos.splice(0,this.mainThing.usersInfos.length)}init(){this.realtimeConnector.setHook("onCreateThing",this.onCreateThing),this.realtimeConnector.setHook("onUpdateThingValue",this.onUpdateThingValue)}done(){this.realtimeConnector.remHook("onUpdateThingValue",this.onUpdateThingValue),this.realtimeConnector.remHook("onCreateThing",this.onCreateThing)}searchThingById(e){return this.mainThing.children.find((t=>t.id===e))}async getThings(e,t){let r,n=[];try{r=await this.thingsDataContext.getThings(e,t);for(let e=0;e<r.things.length;e++){var o=new H(r.things[e]);n.push(o)}}catch(e){throw e}return{things:n,itemsRange:r.itemsRange}}async getMoreThingChildren(e,t,r){t.skip=e.childrenSkip,t.parentThingId=e.id;const n=await this.getThings(t,r);e.childrenTotalItems=n.itemsRange.totalItems,e.childrenSkip=e.childrenSkip+t.top,e.childrenSkip>e.childrenTotalItems&&(e.childrenSkip=e.childrenTotalItems);for(var o=0;o<n.things.length;o++)e.children.push(n.things[o]);return n}async getMoreThings(e){let t=this;var r=await this.getMoreThingChildren(this.mainThing,this.getThingsParams,e);let n=[];for(let o=0;o<r.things.length;o++)n.push(t.getMoreThingChildren(r.things[o],t.getChindrenThingsParams,e));return Promise.all(n)}getThingsTotalItems(){return this.mainThing.childrenTotalItems}async getThing(e){const t=await this.thingsDataContext.getThing(e);return new H(t)}async putThingValue(e,t,r){return await this.thingsDataContext.putThingValue(e,t,r)}}class W{constructor(e,t,r){this.endPointAddress={server:"https://api.thingshub.org:3000",api:"https://api.thingshub.org:3000/api"},this.thingsManagerClaims={publicReadClaims:0,publicChangeClaims:0,everyoneReadClaims:0,everyoneChangeClaims:0,creatorUserReadClaims:65535,creatorUserChangeClaims:1048575},this.onError=e=>console.log(e),this.onConnectError=e=>console.log(e),this.onStateChanged=e=>console.log(e),this.endPointAddress.server=e+":3000",this.endPointAddress.api=e+":3000/api",this.accountManager=new M("thingshub",this.endPointAddress,t),this.realTimeConnector=new P(this.endPointAddress.server,this.accountManager.getSecurityToken,this.onError,this.onConnectError,this.onStateChanged),this.realTimeConnector.subscribe(),this.mainThing=new H,this.things=this.mainThing.children,this.thingsDatacontext=new V(this.endPointAddress),this.thingsManager=new B(this.mainThing,r,this.thingsManagerClaims,this.thingsDatacontext,this.realTimeConnector),this.httpRequestCanceler=new x}on(e,t){return this.realTimeConnector.setHook(e,t),this}off(e,t){return this.realTimeConnector.remHook(e,t),this}get(){return this.thingsManager.getMoreThings(this.httpRequestCanceler).then(),this}cancel(){return this.httpRequestCanceler.cancel(),this}}const L=(e,t,r="first thing")=>new W(e,t,r);(0,e.shim)()})(),i})()}));
//# sourceMappingURL=thingshub.js.map