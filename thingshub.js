!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("axios"),require("socket.io-client")):"function"==typeof define&&define.amd?define(["axios","socket.io-client"],t):"object"==typeof exports?exports.thingshub=t(require("axios"),require("socket.io-client")):e.thingshub=t(e.axios,e.io)}(this,((e,t)=>(()=>{var r={1924:(e,t,r)=>{"use strict";var n=r(210),o=r(5559),i=o(n("String.prototype.indexOf"));e.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&i(e,".prototype.")>-1?o(r):r}},5559:(e,t,r)=>{"use strict";var n=r(8612),o=r(210),i=o("%Function.prototype.apply%"),a=o("%Function.prototype.call%"),s=o("%Reflect.apply%",!0)||n.call(a,i),c=o("%Object.getOwnPropertyDescriptor%",!0),l=o("%Object.defineProperty%",!0),u=o("%Math.max%");if(l)try{l({},"a",{value:1})}catch(e){l=null}e.exports=function(e){var t=s(n,a,arguments);return c&&l&&c(t,"length").configurable&&l(t,"length",{value:1+u(0,e.length-(arguments.length-1))}),t};var p=function(){return s(n,i,arguments)};l?l(e.exports,"apply",{value:p}):e.exports.apply=p},4289:(e,t,r)=>{"use strict";var n=r(2215),o="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),i=Object.prototype.toString,a=Array.prototype.concat,s=Object.defineProperty,c=r(1044)(),l=s&&c,u=function(e,t,r,n){if(t in e)if(!0===n){if(e[t]===r)return}else if("function"!=typeof(o=n)||"[object Function]"!==i.call(o)||!n())return;var o;l?s(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r},p=function(e,t){var r=arguments.length>2?arguments[2]:{},i=n(t);o&&(i=a.call(i,Object.getOwnPropertySymbols(t)));for(var s=0;s<i.length;s+=1)u(e,i[s],t[i[s]],r[i[s]])};p.supportsDescriptors=!!l,e.exports=p},7648:e=>{"use strict";var t=Array.prototype.slice,r=Object.prototype.toString;e.exports=function(e){var n=this;if("function"!=typeof n||"[object Function]"!==r.call(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var o,i=t.call(arguments,1),a=Math.max(0,n.length-i.length),s=[],c=0;c<a;c++)s.push("$"+c);if(o=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof o){var r=n.apply(this,i.concat(t.call(arguments)));return Object(r)===r?r:this}return n.apply(e,i.concat(t.call(arguments)))})),n.prototype){var l=function(){};l.prototype=n.prototype,o.prototype=new l,l.prototype=null}return o}},8612:(e,t,r)=>{"use strict";var n=r(7648);e.exports=Function.prototype.bind||n},210:(e,t,r)=>{"use strict";var n,o=SyntaxError,i=Function,a=TypeError,s=function(e){try{return i('"use strict"; return ('+e+").constructor;")()}catch(e){}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch(e){c=null}var l=function(){throw new a},u=c?function(){try{return l}catch(e){try{return c(arguments,"callee").get}catch(e){return l}}}():l,p=r(1405)(),h=Object.getPrototypeOf||function(e){return e.__proto__},f={},y="undefined"==typeof Uint8Array?n:h(Uint8Array),d={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":p?h([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":f,"%AsyncGenerator%":f,"%AsyncGeneratorFunction%":f,"%AsyncIteratorPrototype%":f,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":f,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":p?h(h([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&p?h((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&p?h((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":p?h(""[Symbol.iterator]()):n,"%Symbol%":p?Symbol:n,"%SyntaxError%":o,"%ThrowTypeError%":u,"%TypedArray%":y,"%TypeError%":a,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet};try{null.error}catch(e){var g=h(h(e));d["%Error.prototype%"]=g}var m=function e(t){var r;if("%AsyncFunction%"===t)r=s("async function () {}");else if("%GeneratorFunction%"===t)r=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=s("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&(r=h(o.prototype))}return d[t]=r,r},b={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},v=r(8612),C=r(7642),S=v.call(Function.call,Array.prototype.concat),w=v.call(Function.apply,Array.prototype.splice),T=v.call(Function.call,String.prototype.replace),A=v.call(Function.call,String.prototype.slice),j=v.call(Function.call,RegExp.prototype.exec),O=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,k=/\\(\\)?/g,P=function(e,t){var r,n=e;if(C(b,n)&&(n="%"+(r=b[n])[0]+"%"),C(d,n)){var i=d[n];if(i===f&&(i=m(n)),void 0===i&&!t)throw new a("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new o("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new a('"allowMissing" argument must be a boolean');if(null===j(/^%?[^%]*%?$/,e))throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=A(e,0,1),r=A(e,-1);if("%"===t&&"%"!==r)throw new o("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new o("invalid intrinsic syntax, expected opening `%`");var n=[];return T(e,O,(function(e,t,r,o){n[n.length]=r?T(o,k,"$1"):t||e})),n}(e),n=r.length>0?r[0]:"",i=P("%"+n+"%",t),s=i.name,l=i.value,u=!1,p=i.alias;p&&(n=p[0],w(r,S([0,1],p)));for(var h=1,f=!0;h<r.length;h+=1){var y=r[h],g=A(y,0,1),m=A(y,-1);if(('"'===g||"'"===g||"`"===g||'"'===m||"'"===m||"`"===m)&&g!==m)throw new o("property names with quotes must have matching quotes");if("constructor"!==y&&f||(u=!0),C(d,s="%"+(n+="."+y)+"%"))l=d[s];else if(null!=l){if(!(y in l)){if(!t)throw new a("base intrinsic for "+e+" exists, but the property is not available.");return}if(c&&h+1>=r.length){var b=c(l,y);l=(f=!!b)&&"get"in b&&!("originalValue"in b.get)?b.get:l[y]}else f=C(l,y),l=l[y];f&&!u&&(d[s]=l)}}return l}},1044:(e,t,r)=>{"use strict";var n=r(210)("%Object.defineProperty%",!0),o=function(){if(n)try{return n({},"a",{value:1}),!0}catch(e){return!1}return!1};o.hasArrayLengthDefineBug=function(){if(!o())return null;try{return 1!==n([],"length",{value:1}).length}catch(e){return!0}},e.exports=o},1405:(e,t,r)=>{"use strict";var n="undefined"!=typeof Symbol&&Symbol,o=r(5419);e.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&o()}},5419:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},7642:(e,t,r)=>{"use strict";var n=r(8612);e.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},5320:e=>{"use strict";var t,r,n=Function.prototype.toString,o="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof o&&"function"==typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw r}}),r={},o((function(){throw 42}),null,t)}catch(e){e!==r&&(o=null)}else o=null;var i=/^\s*class\b/,a=function(e){try{var t=n.call(e);return i.test(t)}catch(e){return!1}},s=function(e){try{return!a(e)&&(n.call(e),!0)}catch(e){return!1}},c=Object.prototype.toString,l="function"==typeof Symbol&&!!Symbol.toStringTag,u=!(0 in[,]),p=function(){return!1};if("object"==typeof document){var h=document.all;c.call(h)===c.call(document.all)&&(p=function(e){if((u||!e)&&(void 0===e||"object"==typeof e))try{var t=c.call(e);return("[object HTMLAllCollection]"===t||"[object HTML document.all class]"===t||"[object HTMLCollection]"===t||"[object Object]"===t)&&null==e("")}catch(e){}return!1})}e.exports=o?function(e){if(p(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;try{o(e,null,t)}catch(e){if(e!==r)return!1}return!a(e)&&s(e)}:function(e){if(p(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if(l)return s(e);if(a(e))return!1;var t=c.call(e);return!("[object Function]"!==t&&"[object GeneratorFunction]"!==t&&!/^\[object HTML/.test(t))&&s(e)}},631:(e,t,r)=>{var n="function"==typeof Map&&Map.prototype,o=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i=n&&o&&"function"==typeof o.get?o.get:null,a=n&&Map.prototype.forEach,s="function"==typeof Set&&Set.prototype,c=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,l=s&&c&&"function"==typeof c.get?c.get:null,u=s&&Set.prototype.forEach,p="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,h="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,f="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,y=Boolean.prototype.valueOf,d=Object.prototype.toString,g=Function.prototype.toString,m=String.prototype.match,b=String.prototype.slice,v=String.prototype.replace,C=String.prototype.toUpperCase,S=String.prototype.toLowerCase,w=RegExp.prototype.test,T=Array.prototype.concat,A=Array.prototype.join,j=Array.prototype.slice,O=Math.floor,k="function"==typeof BigInt?BigInt.prototype.valueOf:null,P=Object.getOwnPropertySymbols,x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,R="function"==typeof Symbol&&"object"==typeof Symbol.iterator,I="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol.toStringTag,1)?Symbol.toStringTag:null,E=Object.prototype.propertyIsEnumerable,_=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function N(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||w.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var n=e<0?-O(-e):O(e);if(n!==e){var o=String(n),i=b.call(t,o.length+1);return v.call(o,r,"$&_")+"."+v.call(v.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return v.call(t,r,"$&_")}var D=r(4654),U=D.custom,M=L(U)?U:null;function F(e,t,r){var n="double"===(r.quoteStyle||t)?'"':"'";return n+e+n}function H(e){return v.call(String(e),/"/g,"&quot;")}function B(e){return!("[object Array]"!==G(e)||I&&"object"==typeof e&&I in e)}function V(e){return!("[object RegExp]"!==G(e)||I&&"object"==typeof e&&I in e)}function L(e){if(R)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!x)return!1;try{return x.call(e),!0}catch(e){}return!1}e.exports=function e(t,r,n,o){var s=r||{};if($(s,"quoteStyle")&&"single"!==s.quoteStyle&&"double"!==s.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if($(s,"maxStringLength")&&("number"==typeof s.maxStringLength?s.maxStringLength<0&&s.maxStringLength!==1/0:null!==s.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var c=!$(s,"customInspect")||s.customInspect;if("boolean"!=typeof c&&"symbol"!==c)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if($(s,"indent")&&null!==s.indent&&"\t"!==s.indent&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if($(s,"numericSeparator")&&"boolean"!=typeof s.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var d=s.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return q(t,s);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var C=String(t);return d?N(t,C):C}if("bigint"==typeof t){var w=String(t)+"n";return d?N(t,w):w}var O=void 0===s.depth?5:s.depth;if(void 0===n&&(n=0),n>=O&&O>0&&"object"==typeof t)return B(t)?"[Array]":"[Object]";var P,U=function(e,t){var r;if("\t"===e.indent)r="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;r=A.call(Array(e.indent+1)," ")}return{base:r,prev:A.call(Array(t+1),r)}}(s,n);if(void 0===o)o=[];else if(K(o,t)>=0)return"[Circular]";function W(t,r,i){if(r&&(o=j.call(o)).push(r),i){var a={depth:s.depth};return $(s,"quoteStyle")&&(a.quoteStyle=s.quoteStyle),e(t,a,n+1,o)}return e(t,s,n+1,o)}if("function"==typeof t&&!V(t)){var z=function(e){if(e.name)return e.name;var t=m.call(g.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),ee=Z(t,W);return"[Function"+(z?": "+z:" (anonymous)")+"]"+(ee.length>0?" { "+A.call(ee,", ")+" }":"")}if(L(t)){var te=R?v.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):x.call(t);return"object"!=typeof t||R?te:J(te)}if((P=t)&&"object"==typeof P&&("undefined"!=typeof HTMLElement&&P instanceof HTMLElement||"string"==typeof P.nodeName&&"function"==typeof P.getAttribute)){for(var re="<"+S.call(String(t.nodeName)),ne=t.attributes||[],oe=0;oe<ne.length;oe++)re+=" "+ne[oe].name+"="+F(H(ne[oe].value),"double",s);return re+=">",t.childNodes&&t.childNodes.length&&(re+="..."),re+"</"+S.call(String(t.nodeName))+">"}if(B(t)){if(0===t.length)return"[]";var ie=Z(t,W);return U&&!function(e){for(var t=0;t<e.length;t++)if(K(e[t],"\n")>=0)return!1;return!0}(ie)?"["+Y(ie,U)+"]":"[ "+A.call(ie,", ")+" ]"}if(function(e){return!("[object Error]"!==G(e)||I&&"object"==typeof e&&I in e)}(t)){var ae=Z(t,W);return"cause"in Error.prototype||!("cause"in t)||E.call(t,"cause")?0===ae.length?"["+String(t)+"]":"{ ["+String(t)+"] "+A.call(ae,", ")+" }":"{ ["+String(t)+"] "+A.call(T.call("[cause]: "+W(t.cause),ae),", ")+" }"}if("object"==typeof t&&c){if(M&&"function"==typeof t[M]&&D)return D(t,{depth:O-n});if("symbol"!==c&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!i||!e||"object"!=typeof e)return!1;try{i.call(e);try{l.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var se=[];return a&&a.call(t,(function(e,r){se.push(W(r,t,!0)+" => "+W(e,t))})),X("Map",i.call(t),se,U)}if(function(e){if(!l||!e||"object"!=typeof e)return!1;try{l.call(e);try{i.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var ce=[];return u&&u.call(t,(function(e){ce.push(W(e,t))})),X("Set",l.call(t),ce,U)}if(function(e){if(!p||!e||"object"!=typeof e)return!1;try{p.call(e,p);try{h.call(e,h)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return Q("WeakMap");if(function(e){if(!h||!e||"object"!=typeof e)return!1;try{h.call(e,h);try{p.call(e,p)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return Q("WeakSet");if(function(e){if(!f||!e||"object"!=typeof e)return!1;try{return f.call(e),!0}catch(e){}return!1}(t))return Q("WeakRef");if(function(e){return!("[object Number]"!==G(e)||I&&"object"==typeof e&&I in e)}(t))return J(W(Number(t)));if(function(e){if(!e||"object"!=typeof e||!k)return!1;try{return k.call(e),!0}catch(e){}return!1}(t))return J(W(k.call(t)));if(function(e){return!("[object Boolean]"!==G(e)||I&&"object"==typeof e&&I in e)}(t))return J(y.call(t));if(function(e){return!("[object String]"!==G(e)||I&&"object"==typeof e&&I in e)}(t))return J(W(String(t)));if(!function(e){return!("[object Date]"!==G(e)||I&&"object"==typeof e&&I in e)}(t)&&!V(t)){var le=Z(t,W),ue=_?_(t)===Object.prototype:t instanceof Object||t.constructor===Object,pe=t instanceof Object?"":"null prototype",he=!ue&&I&&Object(t)===t&&I in t?b.call(G(t),8,-1):pe?"Object":"",fe=(ue||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(he||pe?"["+A.call(T.call([],he||[],pe||[]),": ")+"] ":"");return 0===le.length?fe+"{}":U?fe+"{"+Y(le,U)+"}":fe+"{ "+A.call(le,", ")+" }"}return String(t)};var W=Object.prototype.hasOwnProperty||function(e){return e in this};function $(e,t){return W.call(e,t)}function G(e){return d.call(e)}function K(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function q(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return q(b.call(e,0,t.maxStringLength),t)+n}return F(v.call(v.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,z),"single",t)}function z(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+C.call(t.toString(16))}function J(e){return"Object("+e+")"}function Q(e){return e+" { ? }"}function X(e,t,r,n){return e+" ("+t+") {"+(n?Y(r,n):A.call(r,", "))+"}"}function Y(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+A.call(e,","+r)+"\n"+t.prev}function Z(e,t){var r=B(e),n=[];if(r){n.length=e.length;for(var o=0;o<e.length;o++)n[o]=$(e,o)?t(e[o],e):""}var i,a="function"==typeof P?P(e):[];if(R){i={};for(var s=0;s<a.length;s++)i["$"+a[s]]=a[s]}for(var c in e)$(e,c)&&(r&&String(Number(c))===c&&c<e.length||R&&i["$"+c]instanceof Symbol||(w.call(/[^\w$]/,c)?n.push(t(c,e)+": "+t(e[c],e)):n.push(c+": "+t(e[c],e))));if("function"==typeof P)for(var l=0;l<a.length;l++)E.call(e,a[l])&&n.push("["+t(a[l])+"]: "+t(e[a[l]],e));return n}},8987:(e,t,r)=>{"use strict";var n;if(!Object.keys){var o=Object.prototype.hasOwnProperty,i=Object.prototype.toString,a=r(1414),s=Object.prototype.propertyIsEnumerable,c=!s.call({toString:null},"toString"),l=s.call((function(){}),"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],p=function(e){var t=e.constructor;return t&&t.prototype===e},h={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!h["$"+e]&&o.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{p(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();n=function(e){var t=null!==e&&"object"==typeof e,r="[object Function]"===i.call(e),n=a(e),s=t&&"[object String]"===i.call(e),h=[];if(!t&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var y=l&&r;if(s&&e.length>0&&!o.call(e,0))for(var d=0;d<e.length;++d)h.push(String(d));if(n&&e.length>0)for(var g=0;g<e.length;++g)h.push(String(g));else for(var m in e)y&&"prototype"===m||!o.call(e,m)||h.push(String(m));if(c)for(var b=function(e){if("undefined"==typeof window||!f)return p(e);try{return p(e)}catch(e){return!1}}(e),v=0;v<u.length;++v)b&&"constructor"===u[v]||!o.call(e,u[v])||h.push(u[v]);return h}}e.exports=n},2215:(e,t,r)=>{"use strict";var n=Array.prototype.slice,o=r(1414),i=Object.keys,a=i?function(e){return i(e)}:r(8987),s=Object.keys;a.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return o(e)?s(n.call(e)):s(e)})}else Object.keys=a;return Object.keys||a},e.exports=a},1414:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){var r=t.call(e),n="[object Arguments]"===r;return n||(n="[object Array]"!==r&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),n}},8385:(e,t,r)=>{"use strict";r(7971)();var n=r(5695),o=r(3582),i=r(7858),a=function(e,t){return new e((function(e){e(t)}))},s=Promise,c=function(e){var t=this;if("Object"!==i(t))throw new TypeError("receiver is not an Object");var r=o(t,s),c=e,l=e;return n(e)&&(c=function(e,t){return function(r){var n=t();return a(e,n).then((function(){return r}))}}(r,e),l=function(e,t){return function(r){var n=t();return a(e,n).then((function(){throw r}))}}(r,e)),t.then(c,l)};if(Object.getOwnPropertyDescriptor){var l=Object.getOwnPropertyDescriptor(c,"name");l&&l.configurable&&Object.defineProperty(c,"name",{configurable:!0,value:"finally"})}e.exports=c},7628:(e,t,r)=>{"use strict";var n=r(5559),o=r(4289),i=r(8385),a=r(8076),s=r(3547),c=n(a());o(c,{getPolyfill:a,implementation:i,shim:s}),e.exports=c},8076:(e,t,r)=>{"use strict";var n=r(7971),o=r(8385);e.exports=function(){return n(),"function"==typeof Promise.prototype.finally?Promise.prototype.finally:o}},7971:e=>{"use strict";e.exports=function(){if("function"!=typeof Promise)throw new TypeError("`Promise.prototype.finally` requires a global `Promise` be available.")}},3547:(e,t,r)=>{"use strict";var n=r(7971),o=r(8076),i=r(4289);e.exports=function(){n();var e=o();return i(Promise.prototype,{finally:e},{finally:function(){return Promise.prototype.finally!==e}}),e}},5798:e=>{"use strict";var t=String.prototype.replace,r=/%20/g,n="RFC3986";e.exports={default:n,formatters:{RFC1738:function(e){return t.call(e,r,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:n}},129:(e,t,r)=>{"use strict";var n=r(8261),o=r(5235),i=r(5798);e.exports={formats:i,parse:o,stringify:n}},5235:(e,t,r)=>{"use strict";var n=r(2769),o=Object.prototype.hasOwnProperty,i=Array.isArray,a={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},c=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},l=function(e,t,r,n){if(e){var i=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,s=r.depth>0&&/(\[[^[\]]*])/.exec(i),l=s?i.slice(0,s.index):i,u=[];if(l){if(!r.plainObjects&&o.call(Object.prototype,l)&&!r.allowPrototypes)return;u.push(l)}for(var p=0;r.depth>0&&null!==(s=a.exec(i))&&p<r.depth;){if(p+=1,!r.plainObjects&&o.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(s[1])}return s&&u.push("["+i.slice(s.index)+"]"),function(e,t,r,n){for(var o=n?t:c(t,r),i=e.length-1;i>=0;--i){var a,s=e[i];if("[]"===s&&r.parseArrays)a=[].concat(o);else{a=r.plainObjects?Object.create(null):{};var l="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,u=parseInt(l,10);r.parseArrays||""!==l?!isNaN(u)&&s!==l&&String(u)===l&&u>=0&&r.parseArrays&&u<=r.arrayLimit?(a=[])[u]=o:"__proto__"!==l&&(a[l]=o):a={0:o}}o=a}return o}(u,t,r,n)}};e.exports=function(e,t){var r=function(e){if(!e)return a;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?a.charset:e.charset;return{allowDots:void 0===e.allowDots?a.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:a.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:a.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:a.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:a.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:a.comma,decoder:"function"==typeof e.decoder?e.decoder:a.decoder,delimiter:"string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:a.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:a.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:a.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:a.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:a.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var u="string"==typeof e?function(e,t){var r,l={},u=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,p=t.parameterLimit===1/0?void 0:t.parameterLimit,h=u.split(t.delimiter,p),f=-1,y=t.charset;if(t.charsetSentinel)for(r=0;r<h.length;++r)0===h[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===h[r]?y="utf-8":"utf8=%26%2310003%3B"===h[r]&&(y="iso-8859-1"),f=r,r=h.length);for(r=0;r<h.length;++r)if(r!==f){var d,g,m=h[r],b=m.indexOf("]="),v=-1===b?m.indexOf("="):b+1;-1===v?(d=t.decoder(m,a.decoder,y,"key"),g=t.strictNullHandling?null:""):(d=t.decoder(m.slice(0,v),a.decoder,y,"key"),g=n.maybeMap(c(m.slice(v+1),t),(function(e){return t.decoder(e,a.decoder,y,"value")}))),g&&t.interpretNumericEntities&&"iso-8859-1"===y&&(g=s(g)),m.indexOf("[]=")>-1&&(g=i(g)?[g]:g),o.call(l,d)?l[d]=n.combine(l[d],g):l[d]=g}return l}(e,r):e,p=r.plainObjects?Object.create(null):{},h=Object.keys(u),f=0;f<h.length;++f){var y=h[f],d=l(y,u[y],r,"string"==typeof e);p=n.merge(p,d,r)}return!0===r.allowSparse?p:n.compact(p)}},8261:(e,t,r)=>{"use strict";var n=r(7478),o=r(2769),i=r(5798),a=Object.prototype.hasOwnProperty,s={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},c=Array.isArray,l=Array.prototype.push,u=function(e,t){l.apply(e,c(t)?t:[t])},p=Date.prototype.toISOString,h=i.default,f={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:o.encode,encodeValuesOnly:!1,format:h,formatter:i.formatters[h],indices:!1,serializeDate:function(e){return p.call(e)},skipNulls:!1,strictNullHandling:!1},y={},d=function e(t,r,i,a,s,l,p,h,d,g,m,b,v,C,S,w){for(var T,A=t,j=w,O=0,k=!1;void 0!==(j=j.get(y))&&!k;){var P=j.get(t);if(O+=1,void 0!==P){if(P===O)throw new RangeError("Cyclic object value");k=!0}void 0===j.get(y)&&(O=0)}if("function"==typeof h?A=h(r,A):A instanceof Date?A=m(A):"comma"===i&&c(A)&&(A=o.maybeMap(A,(function(e){return e instanceof Date?m(e):e}))),null===A){if(s)return p&&!C?p(r,f.encoder,S,"key",b):r;A=""}if("string"==typeof(T=A)||"number"==typeof T||"boolean"==typeof T||"symbol"==typeof T||"bigint"==typeof T||o.isBuffer(A))return p?[v(C?r:p(r,f.encoder,S,"key",b))+"="+v(p(A,f.encoder,S,"value",b))]:[v(r)+"="+v(String(A))];var x,R=[];if(void 0===A)return R;if("comma"===i&&c(A))C&&p&&(A=o.maybeMap(A,p)),x=[{value:A.length>0?A.join(",")||null:void 0}];else if(c(h))x=h;else{var I=Object.keys(A);x=d?I.sort(d):I}for(var E=a&&c(A)&&1===A.length?r+"[]":r,_=0;_<x.length;++_){var N=x[_],D="object"==typeof N&&void 0!==N.value?N.value:A[N];if(!l||null!==D){var U=c(A)?"function"==typeof i?i(E,N):E:E+(g?"."+N:"["+N+"]");w.set(t,O);var M=n();M.set(y,w),u(R,e(D,U,i,a,s,l,"comma"===i&&C&&c(A)?null:p,h,d,g,m,b,v,C,S,M))}}return R};e.exports=function(e,t){var r,o=e,l=function(e){if(!e)return f;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||f.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=i.default;if(void 0!==e.format){if(!a.call(i.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=i.formatters[r],o=f.filter;return("function"==typeof e.filter||c(e.filter))&&(o=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:f.addQueryPrefix,allowDots:void 0===e.allowDots?f.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:f.charsetSentinel,delimiter:void 0===e.delimiter?f.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:f.encode,encoder:"function"==typeof e.encoder?e.encoder:f.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:f.encodeValuesOnly,filter:o,format:r,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:f.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:f.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:f.strictNullHandling}}(t);"function"==typeof l.filter?o=(0,l.filter)("",o):c(l.filter)&&(r=l.filter);var p,h=[];if("object"!=typeof o||null===o)return"";p=t&&t.arrayFormat in s?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var y=s[p];if(t&&"commaRoundTrip"in t&&"boolean"!=typeof t.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var g="comma"===y&&t&&t.commaRoundTrip;r||(r=Object.keys(o)),l.sort&&r.sort(l.sort);for(var m=n(),b=0;b<r.length;++b){var v=r[b];l.skipNulls&&null===o[v]||u(h,d(o[v],v,y,g,l.strictNullHandling,l.skipNulls,l.encode?l.encoder:null,l.filter,l.sort,l.allowDots,l.serializeDate,l.format,l.formatter,l.encodeValuesOnly,l.charset,m))}var C=h.join(l.delimiter),S=!0===l.addQueryPrefix?"?":"";return l.charsetSentinel&&("iso-8859-1"===l.charset?S+="utf8=%26%2310003%3B&":S+="utf8=%E2%9C%93&"),C.length>0?S+C:""}},2769:(e,t,r)=>{"use strict";var n=r(5798),o=Object.prototype.hasOwnProperty,i=Array.isArray,a=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),s=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r};e.exports={arrayToObject:s,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var o=t[n],a=o.obj[o.prop],s=Object.keys(a),c=0;c<s.length;++c){var l=s[c],u=a[l];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(t.push({obj:a,prop:l}),r.push(u))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(i(r)){for(var n=[],o=0;o<r.length;++o)void 0!==r[o]&&n.push(r[o]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r,o,i){if(0===e.length)return e;var s=e;if("symbol"==typeof e?s=Symbol.prototype.toString.call(e):"string"!=typeof e&&(s=String(e)),"iso-8859-1"===r)return escape(s).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var c="",l=0;l<s.length;++l){var u=s.charCodeAt(l);45===u||46===u||95===u||126===u||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||i===n.RFC1738&&(40===u||41===u)?c+=s.charAt(l):u<128?c+=a[u]:u<2048?c+=a[192|u>>6]+a[128|63&u]:u<55296||u>=57344?c+=a[224|u>>12]+a[128|u>>6&63]+a[128|63&u]:(l+=1,u=65536+((1023&u)<<10|1023&s.charCodeAt(l)),c+=a[240|u>>18]+a[128|u>>12&63]+a[128|u>>6&63]+a[128|63&u])}return c},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(i(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function e(t,r,n){if(!r)return t;if("object"!=typeof r){if(i(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(n&&(n.plainObjects||n.allowPrototypes)||!o.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var a=t;return i(t)&&!i(r)&&(a=s(t,n)),i(t)&&i(r)?(r.forEach((function(r,i){if(o.call(t,i)){var a=t[i];a&&"object"==typeof a&&r&&"object"==typeof r?t[i]=e(a,r,n):t.push(r)}else t[i]=r})),t):Object.keys(r).reduce((function(t,i){var a=r[i];return o.call(t,i)?t[i]=e(t[i],a,n):t[i]=a,t}),a)}}},7478:(e,t,r)=>{"use strict";var n=r(210),o=r(1924),i=r(631),a=n("%TypeError%"),s=n("%WeakMap%",!0),c=n("%Map%",!0),l=o("WeakMap.prototype.get",!0),u=o("WeakMap.prototype.set",!0),p=o("WeakMap.prototype.has",!0),h=o("Map.prototype.get",!0),f=o("Map.prototype.set",!0),y=o("Map.prototype.has",!0),d=function(e,t){for(var r,n=e;null!==(r=n.next);n=r)if(r.key===t)return n.next=r.next,r.next=e.next,e.next=r,r};e.exports=function(){var e,t,r,n={assert:function(e){if(!n.has(e))throw new a("Side channel does not contain "+i(e))},get:function(n){if(s&&n&&("object"==typeof n||"function"==typeof n)){if(e)return l(e,n)}else if(c){if(t)return h(t,n)}else if(r)return function(e,t){var r=d(e,t);return r&&r.value}(r,n)},has:function(n){if(s&&n&&("object"==typeof n||"function"==typeof n)){if(e)return p(e,n)}else if(c){if(t)return y(t,n)}else if(r)return function(e,t){return!!d(e,t)}(r,n);return!1},set:function(n,o){s&&n&&("object"==typeof n||"function"==typeof n)?(e||(e=new s),u(e,n,o)):c?(t||(t=new c),f(t,n,o)):(r||(r={key:{},next:null}),function(e,t,r){var n=d(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}}(r,n,o))}};return n}},3300:t=>{"use strict";t.exports=e},5613:e=>{"use strict";e.exports=t},4654:()=>{},1667:(e,t,r)=>{"use strict";var n=r(210)("%TypeError%"),o=r(2435),i=r(3682),a=r(7435),s=r(4326),c=r(2780),l=r(134),u=r(8690),p=r(6223),h=r(7858);e.exports=function(e,t,r){if("Object"!==h(e))throw new n("Assertion failed: Type(O) is not Object");if(!l(t))throw new n("Assertion failed: IsPropertyKey(P) is not true");var f=o({Type:h,IsDataDescriptor:c,IsAccessorDescriptor:s},r)?r:p(r);if(!o({Type:h,IsDataDescriptor:c,IsAccessorDescriptor:s},f))throw new n("Assertion failed: Desc is not a valid Property Descriptor");return i(c,u,a,e,t,f)}},7435:(e,t,r)=>{"use strict";var n=r(2188),o=r(7141),i=r(7858);e.exports=function(e){return void 0!==e&&n(i,"Property Descriptor","Desc",e),o(e)}},4326:(e,t,r)=>{"use strict";var n=r(7642),o=r(2188),i=r(7858);e.exports=function(e){return void 0!==e&&(o(i,"Property Descriptor","Desc",e),!(!n(e,"[[Get]]")&&!n(e,"[[Set]]")))}},5695:(e,t,r)=>{"use strict";e.exports=r(5320)},6023:(e,t,r)=>{"use strict";var n=r(4445)("%Reflect.construct%",!0),o=r(1667);try{o({},"",{"[[Get]]":function(){}})}catch(e){o=null}if(o&&n){var i={},a={};o(a,"length",{"[[Get]]":function(){throw i},"[[Enumerable]]":!0}),e.exports=function(e){try{n(e,a)}catch(e){return e===i}}}else e.exports=function(e){return"function"==typeof e&&!!e.prototype}},2780:(e,t,r)=>{"use strict";var n=r(7642),o=r(2188),i=r(7858);e.exports=function(e){return void 0!==e&&(o(i,"Property Descriptor","Desc",e),!(!n(e,"[[Value]]")&&!n(e,"[[Writable]]")))}},134:e=>{"use strict";e.exports=function(e){return"string"==typeof e||"symbol"==typeof e}},8690:(e,t,r)=>{"use strict";var n=r(9086);e.exports=function(e,t){return e===t?0!==e||1/e==1/t:n(e)&&n(t)}},3582:(e,t,r)=>{"use strict";var n=r(210),o=n("%Symbol.species%",!0),i=n("%TypeError%"),a=r(6023),s=r(7858);e.exports=function(e,t){if("Object"!==s(e))throw new i("Assertion failed: Type(O) is not Object");var r=e.constructor;if(void 0===r)return t;if("Object"!==s(r))throw new i("O.constructor is not an Object");var n=o?r[o]:void 0;if(null==n)return t;if(a(n))return n;throw new i("no constructor found")}},4686:e=>{"use strict";e.exports=function(e){return!!e}},6223:(e,t,r)=>{"use strict";var n=r(7642),o=r(210)("%TypeError%"),i=r(7858),a=r(4686),s=r(5695);e.exports=function(e){if("Object"!==i(e))throw new o("ToPropertyDescriptor requires an object");var t={};if(n(e,"enumerable")&&(t["[[Enumerable]]"]=a(e.enumerable)),n(e,"configurable")&&(t["[[Configurable]]"]=a(e.configurable)),n(e,"value")&&(t["[[Value]]"]=e.value),n(e,"writable")&&(t["[[Writable]]"]=a(e.writable)),n(e,"get")){var r=e.get;if(void 0!==r&&!s(r))throw new o("getter must be a function");t["[[Get]]"]=r}if(n(e,"set")){var c=e.set;if(void 0!==c&&!s(c))throw new o("setter must be a function");t["[[Set]]"]=c}if((n(t,"[[Get]]")||n(t,"[[Set]]"))&&(n(t,"[[Value]]")||n(t,"[[Writable]]")))throw new o("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return t}},7858:(e,t,r)=>{"use strict";var n=r(3951);e.exports=function(e){return"symbol"==typeof e?"Symbol":"bigint"==typeof e?"BigInt":n(e)}},3951:e=>{"use strict";e.exports=function(e){return null===e?"Null":void 0===e?"Undefined":"function"==typeof e||"object"==typeof e?"Object":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"string"==typeof e?"String":void 0}},4445:(e,t,r)=>{"use strict";e.exports=r(210)},3682:(e,t,r)=>{"use strict";var n=r(1044),o=r(210),i=n()&&o("%Object.defineProperty%",!0),a=n.hasArrayLengthDefineBug(),s=a&&r(675),c=r(1924)("Object.prototype.propertyIsEnumerable");e.exports=function(e,t,r,n,o,l){if(!i){if(!e(l))return!1;if(!l["[[Configurable]]"]||!l["[[Writable]]"])return!1;if(o in n&&c(n,o)!==!!l["[[Enumerable]]"])return!1;var u=l["[[Value]]"];return n[o]=u,t(n[o],u)}return a&&"length"===o&&"[[Value]]"in l&&s(n)&&n.length!==l["[[Value]]"]?(n.length=l["[[Value]]"],n.length===l["[[Value]]"]):(i(n,o,r(l)),!0)}},675:(e,t,r)=>{"use strict";var n=r(210)("%Array%"),o=!n.isArray&&r(1924)("Object.prototype.toString");e.exports=n.isArray||function(e){return"[object Array]"===o(e)}},2188:(e,t,r)=>{"use strict";var n=r(210),o=n("%TypeError%"),i=n("%SyntaxError%"),a=r(7642),s={"Property Descriptor":function(e){var t={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var r in e)if(a(e,r)&&!t[r])return!1;var n=a(e,"[[Value]]"),i=a(e,"[[Get]]")||a(e,"[[Set]]");if(n&&i)throw new o("Property Descriptors may not be both accessor and data descriptors");return!0},"Match Record":r(4377),"Iterator Record":function(e){return a(e,"[[Iterator]]")&&a(e,"[[NextMethod]]")&&a(e,"[[Done]]")},"PromiseCapability Record":function(e){return e&&a(e,"[[Resolve]]")&&"function"==typeof e["[[Resolve]]"]&&a(e,"[[Reject]]")&&"function"==typeof e["[[Reject]]"]&&a(e,"[[Promise]]")&&e["[[Promise]]"]&&"function"==typeof e["[[Promise]]"].then},"AsyncGeneratorRequest Record":function(e){return e&&a(e,"[[Completion]]")&&a(e,"[[Capability]]")&&s["PromiseCapability Record"](e["[[Capability]]"])}};e.exports=function(e,t,r,n){var a=s[t];if("function"!=typeof a)throw new i("unknown record type: "+t);if("Object"!==e(n)||!a(n))throw new o(r+" must be a "+t)}},7141:e=>{"use strict";e.exports=function(e){if(void 0===e)return e;var t={};return"[[Value]]"in e&&(t.value=e["[[Value]]"]),"[[Writable]]"in e&&(t.writable=!!e["[[Writable]]"]),"[[Get]]"in e&&(t.get=e["[[Get]]"]),"[[Set]]"in e&&(t.set=e["[[Set]]"]),"[[Enumerable]]"in e&&(t.enumerable=!!e["[[Enumerable]]"]),"[[Configurable]]"in e&&(t.configurable=!!e["[[Configurable]]"]),t}},4377:(e,t,r)=>{"use strict";var n=r(7642);e.exports=function(e){return n(e,"[[StartIndex]]")&&n(e,"[[EndIndex]]")&&e["[[StartIndex]]"]>=0&&e["[[EndIndex]]"]>=e["[[StartIndex]]"]&&String(parseInt(e["[[StartIndex]]"],10))===String(e["[[StartIndex]]"])&&String(parseInt(e["[[EndIndex]]"],10))===String(e["[[EndIndex]]"])}},9086:e=>{"use strict";e.exports=Number.isNaN||function(e){return e!=e}},2435:(e,t,r)=>{"use strict";var n=r(210),o=r(7642),i=n("%TypeError%");e.exports=function(e,t){if("Object"!==e.Type(t))return!1;var r={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var n in t)if(o(t,n)&&!r[n])return!1;if(e.IsDataDescriptor(t)&&e.IsAccessorDescriptor(t))throw new i("Property Descriptors may not be both accessor and data descriptors");return!0}}},n={};function o(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={exports:{}};return r[e](i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{"use strict";o.r(i),o.d(i,{AccountDataContext:()=>M,AccountManager:()=>F,DefaultThingPos:()=>g,EmailDTO:()=>v,Helpers:()=>R,HttpRequestCanceler:()=>x,RealtimeConnectionStates:()=>T,RealtimeConnector:()=>k,RegisterByOnlyEmailDTO:()=>b,RegisterByOnlyEmailStatus:()=>m,SocketIORealtimeConnector:()=>P,Thing:()=>H,ThingDTO:()=>w,ThingDeletedStates:()=>t,ThingKind:()=>d,ThingUserChangeClaims:()=>f,ThingUserReadClaims:()=>p,ThingUserRoles:()=>n,ThingUserStates:()=>s,ThingUserVisibility:()=>l,ThingsDataContext:()=>B,ThingsManager:()=>V,UserDTO:()=>C,UserInfoDTO:()=>S,th:()=>W,validateThingDeletedStatus:()=>r,validateThingUserChangeClaims:()=>y,validateThingUserReadClaims:()=>h,validateThingUserRoles:()=>a,validateThingUserStatus:()=>c,validateThingUserVisibility:()=>u});var e=o(7628);const t={NoMatter:0,Ok:1,Deleted:2};function r(e){switch(e){case t.NoMatter:case t.Ok:case t.Deleted:return!0}return!1}const n={NoMatter:0,Administrator:1,User:2};function a(e){switch(e){case n.NoMatter:case n.Administrator:case n.User:return!0}return!1}const s={NoMatter:0,Ok:1,WaitForAuth:2,Deleted:4};function c(e){switch(e){case s.NoMatter:case s.Ok:case s.WaitForAuth:case s.Deleted:return!0}return!1}const l={NoMatter:0,Visible:1,Hidden:2};function u(e){switch(e){case l.NoMatter:case l.Visible:case l.Hidden:return!0}return!1}const p={NoClaims:0,CanReadCreationDate:2,CanReadName:4,CanReadDescription:8,CanReadKind:16,CanReadValue:32,CanReadDeletedStatus:64,CanReadPublicReadClaims:2048,CanReadPublicChangeClaims:4096,CanReadEveryoneReadClaims:8192,CanReadEveryoneChangeClaims:16384,CanReadThingUserRights:128,CanReadThingUserRole:256,CanReadThingUserStatus:512,CanReadThingUserVisibility:32768,CanReadThingUserReadClaims:1024,CanReadThingUserChangeClaims:1};function h(e){return e<=p.AllClaims&&e>=p.NoClaims}p.AllClaims=p.CanReadThingUserChangeClaims|p.CanReadCreationDate|p.CanReadName|p.CanReadDescription|p.CanReadKind|p.CanReadValue|p.CanReadDeletedStatus|p.CanReadThingUserRights|p.CanReadThingUserRole|p.CanReadThingUserVisibility|p.CanReadThingUserStatus|p.CanReadThingUserReadClaims|p.CanReadPublicReadClaims|p.CanReadPublicChangeClaims|p.CanReadEveryoneReadClaims|p.CanReadEveryoneChangeClaims;const f={NoClaims:0,CanDeleteThing:1,CanChangeName:2,CanChangeDescription:4,CanChangeKind:8,CanChangeValue:16,CanChangeDeletedStatus:32,CanChangePublicReadClaims:4096,CanChangePublicChangeClaims:8192,CanChangeEveryoneReadClaims:16384,CanChangeEveryoneChangeClaims:32768,CanAddThingUserRights:64,CanDeleteThingUserRights:128,CanChangeThingUserRole:256,CanChangeThingUserStatus:512,CanChangeThingUserVisibility:524288,CanChangeThingUserReadClaims:1024,CanChangeThingUserChangeClaims:2048,CanAddChildrenThing:65536,CanRemoveChildrenThing:131072,CanOtherUsersChangeMyThingPos:262144};function y(e){return e<=f.AllClaims&&e>=f.NoClaims}f.AllClaims=f.CanDeleteThing|f.CanChangeName|f.CanChangeDescription|f.CanChangeKind|f.CanChangeValue|f.CanChangeDeletedStatus|f.CanAddThingUserRights|f.CanDeleteThingUserRights|f.CanChangeThingUserRole|f.CanChangeThingUserVisibility|f.CanChangeThingUserStatus|f.CanChangeThingUserReadClaims|f.CanChangeThingUserChangeClaims|f.CanChangePublicReadClaims|f.CanChangePublicChangeClaims|f.CanChangeEveryoneReadClaims|f.CanChangeEveryoneChangeClaims|f.CanAddChildrenThing|f.CanRemoveChildrenThing|f.CanOtherUsersChangeMyThingPos;const d={NoMatter:"0",genericId:"1",genericTxt:"the bees are laborious"},g=Number.MAX_SAFE_INTEGER,m={UserAlreadyRegistered:1,ConfirmPendingEmailSent:2};class b{constructor(e,t,r){this.email=e,this.confirmationToken=t,this.status=r}}class v{constructor(e){this.value=e.email,this.isConfimed=e.isConfimed}}class C{constructor(e,t){this.id=e._id,this.name=e.name,t&&(this.emails=[],this.username=e.userName,e.emails.foreach((e=>this.emails.push(new v(e)))),this.masterApiKey=e.masterApiKey)}}class S{constructor(){this.id="",this.name="the bees are laborious"}}class w{constructor(){this.id="",this.creationDate=null,this.name="",this.kind=d.genericId,this.pos=0,this.deletedStatus=t.NoMatter,this.deletedDate=null,this.publicReadClaims=p.NoClaims,this.publicChangeClaims=f.NoClaims,this.everyoneReadClaims=p.NoClaims,this.everyoneChangeClaims=f.NoClaims,this.value={},this.userStatus=s.NoMatter,this.userRole=n.NoMatter,this.userVisibility=l.NoMatter,this.userReadClaims=p.NoClaims,this.userChangeClaims=f.NoClaims,this.usersInfos=[]}}var T,A=o(3300),j=o.n(A),O=o(5613);!function(e){e[e.Connecting=0]="Connecting",e[e.Connected=1]="Connected",e[e.Reconnecting=2]="Reconnecting",e[e.Disconnected=4]="Disconnected"}(T||(T={}));class k{on_connectionStatusChange(e){this.connectionStatus!=e&&(this.connectionStatus=e,this.stateChangedHook&&this.stateChangedHook(e))}subscribe(){}unsubscribe(){}setHook(e,t){}remHook(e,t){}constructor(e,t,r,n,o){this.connectionStatus=4,this.url="",this.authHook=null,this.errorHook=null,this.stateChangedHook=null,this.connectErrorHook=null,this.url=e,this.authHook=t,this.errorHook=r,this.connectErrorHook=n,this.stateChangedHook=o}async api(){return await j().get(this.url+"/api")}}class P extends k{constructor(e,t,r,n,o){super(e,t,r,n,o),this.socket=null}on_error(e){this.errorHook&&this.errorHook(e)}on_connect_error(e){this.connectErrorHook&&this.connectErrorHook(e)}on_connect(){this.on_connectionStatusChange&&this.on_connectionStatusChange(1)}on_disconnect(e){this.on_connectionStatusChange&&this.on_connectionStatusChange(4)}subscribe(){if(this.socket)return;let e=this.url;this.authHook&&(e+="?"+this.authHook()),this.socket=(0,O.io)(e),this.socket.on("error",(e=>this.on_error(e))),this.socket.on("connect_error",(e=>this.on_connect_error(e))),this.socket.on("connect",(()=>this.on_connect())),this.socket.on("disconnect",(e=>this.on_disconnect(e)))}unsubscribe(){this.socket&&(this.socket.disconnect(),this.socket=null)}setHook(e,t){this.socket&&this.socket.on(e,t)}remHook(e,t){this.socket&&this.socket.off(e,t)}}class x{constructor(){this.cancelerToken=void 0,this.executor=null,this.reset()}cancel(){this.executor&&this.executor()}reset(){this.executor=null,this.cancelerToken=new(j().CancelToken)((e=>{this.executor=e}))}}class R{static getRangeItemsFromResponse(e){var t=e.headers["content-range"],r=0,n=0,o=0;if(t){var i=t.split("/");if(0!=i.length){var a=i[0].split(" ");if(2==a.length){var s=a[1].split("-");2==s.length&&(r=parseInt(s[0]),n=parseInt(s[1]))}2==i.length&&(o=parseInt(i[1]))}}return{top:r,skip:n,totalItems:o}}}var I=o(129);function E(e){this.message=e}E.prototype=new Error,E.prototype.name="InvalidCharacterError";var _="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new E("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,o=0,i=0,a="";n=t.charAt(i++);~n&&(r=o%4?64*r+n:n,o++%4)?a+=String.fromCharCode(255&r>>(-2*o&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return a};function N(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(_(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return _(t)}}function D(e){this.message=e}D.prototype=new Error,D.prototype.name="InvalidTokenError";const U=function(e,t){if("string"!=typeof e)throw new D("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(N(e.split(".")[r]))}catch(e){throw new D("Invalid token specified: "+e.message)}};class M{constructor(e,t){this.accountUrl="",this.accountUrl=e.api+"/account",j().interceptors.request.use((async e=>{if(!t)return e;if(!t.isLoggedIn())return e;if(!t.isAccessTokenExpired())return e.headers={...e.headers,...t.getSecurityHeader()},e;try{return await t.refreshToken(),e.headers={...e.headers,...t.getSecurityHeader()},e}catch(e){throw t.resetApp(),e}}),(function(e){return Promise.reject(e)}))}async login({username:e,password:t}){const r={username:e,password:t},n=await j().post(this.accountUrl+"/login",I.stringify(r),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}),o=U(n.data.access_token);return{accessToken:n.data.access_token,id:o.sub,name:o.name,exp:o.exp,iat:o.iat}}async loginBasic({username:e,password:t}){return(await j().post(this.accountUrl+"/login","grant_type=client_credentials",{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa(e+":"+t)}})).data}async logout(){return(await j().get(this.accountUrl+"/logout")).data}}class F{resetLoginData(){this._accessToken=null,this._userId=null,this._userName=null,"undefined"!=typeof localStorage&&(localStorage.removeItem(this._appName+"_Remember"),localStorage.removeItem(this._appName+"_AccessToken"),sessionStorage.removeItem(this._appName+"_AccessToken"),localStorage.removeItem(this._appName+"_DeltaTime"),sessionStorage.removeItem(this._appName+"_DeltaTime"),localStorage.removeItem(this._appName+"_UserId"),sessionStorage.removeItem(this._appName+"_UserId"),localStorage.removeItem(this._appName+"_Username"),sessionStorage.removeItem(this._appName+"_Username"))}setLoginData(e,t){this._apiKey=null,this._accessToken=e.accessToken,this._userId=e.id,this._userName=e.name,this.deltaTime=Math.floor(Date.now()/1e3)-e.iat,"undefined"!=typeof localStorage&&(sessionStorage.setItem(this._appName+"_AccessToken",this._accessToken),sessionStorage.setItem(this._appName+"_UserId",this._userId),sessionStorage.setItem(this._appName+"_Username",this._userName),sessionStorage.setItem(this._appName+"_DeltaTime",this.deltaTime.toString()),localStorage.setItem(this._appName+"_Remember",1==t?"true":"false"),0!=t&&(localStorage.setItem(this._appName+"_AccessToken",this._accessToken),localStorage.setItem(this._appName+"_UserId",this._userId),localStorage.setItem(this._appName+"_Username",this._userName),localStorage.setItem(this._appName+"_DeltaTime",this.deltaTime.toString())))}getLoginData(e){if(e)return this.resetLoginData(),void(this._apiKey=e);if("undefined"==typeof localStorage)return;this._apiKey=null,this._accessToken=sessionStorage.getItem(this._appName+"_AccessToken"),this._userId=sessionStorage.getItem(this._appName+"_UserId"),this._userName=sessionStorage.getItem(this._appName+"_Username");let t=sessionStorage.getItem(this._appName+"_DeltaTime");this.deltaTime=t?parseInt(t):0,0!=this.remember&&(this._accessToken=localStorage.getItem(this._appName+"_AccessToken"),this._userId=localStorage.getItem(this._appName+"_UserId"),this._userName=localStorage.getItem(this._appName+"_Username"),t=localStorage.getItem(this._appName+"_DeltaTime"),this.deltaTime=t?parseInt(t):0)}constructor(e,t,r,n){this._appName=null,this._accessToken=null,this._userId=null,this._userName=null,this.deltaTime=0,this._apiKey=null,this.defaultAccountActionControl={isLoggedIn:()=>null!==this.getSecurityHeader(),isAccessTokenExpired:()=>this.isAccessTokenExpired,getSecurityHeader:()=>this.getSecurityHeader(),refreshToken:()=>Promise.reject(),resetApp:()=>console.log("resetApp")},this.getSecurityHeader=()=>this.apiKey?{thapikey:this.apiKey}:this.accessToken?{Authorization:"Bearer "+this.accessToken}:null,this.getSecurityToken=()=>this.apiKey?"token="+this.apiKey:this.accessToken?"token="+this.accessToken:null,this._appName=e;let o=n||this.defaultAccountActionControl;this.accountDataContext=new M(t,o),this.getLoginData(r),this.apiKey||this.accessToken&&this.isAccessTokenExpired&&this.resetLoginData()}get apiKey(){return this._apiKey}get accessToken(){return this._accessToken}get isAccessTokenExpired(){return!this.apiKey&&(!this.accessToken||U(this.accessToken).exp+this.deltaTime<Math.floor(Date.now()/1e3))}get isLoggedIn(){return!!this.apiKey||!!this.accessToken&&!this.isAccessTokenExpired}get remember(){return"undefined"!=typeof localStorage&&"true"==localStorage.getItem(this._appName+"_Remember")}async login(e,t,r){this._apiKey=null,this.resetLoginData();const n=await this.accountDataContext.login({username:e,password:t});return this.setLoginData(n,r),n}async logout(){try{return await this.accountDataContext.logout()}catch(e){throw e}finally{this._apiKey=null,this.resetLoginData()}}}class H{constructor(e){this.childrenSkip=0,this.childrenTotalItems=Number.MAX_SAFE_INTEGER,this.children=[],this.id="",this.creationDate=null,this.name="",this.kind="",this.pos=0,this.deletedStatus=0,this.deletedDate=null,this.publicReadClaims=0,this.publicChangeClaims=0,this.everyoneReadClaims=0,this.everyoneChangeClaims=0,this.userStatus=0,this.userRole=0,this.userVisibility=0,this.userReadClaims=0,this.userChangeClaims=0,this.usersInfos=[],this.value={},e&&(Object.assign(this,e),e.value&&(this.value=e.value))}addThingChild(e){this.children.unshift(new H(e))}collapse(){this.childrenSkip=0,this.children.splice(0,this.children.length)}shallowCopy(){let e=new H;return Object.assign(e,this),e}}class B{thingsUrl(e){return this.apiEndPointAddress+"/things/"+(e||"")}thingsValueUrl(e){return this.apiEndPointAddress+"/things/"+e+"/value"}thingsCmdUrl(e){return this.apiEndPointAddress+"/things/"+e+"/cmd"}thingsPositionsUrl(){return this.apiEndPointAddress+"/things/positions"}thingChildrenUrl(e,t){return this.apiEndPointAddress+"/things/"+e+"/childrenIds/"+(t||"")}thingDeleteChildUrl(e,t){return this.apiEndPointAddress+"/things/"+e+"/childrenIds/"+t}constructor(e){this.apiEndPointAddress="",this.apiEndPointAddress=e.api}async getThing(e){return(await j().get(this.thingsUrl(e))).data}getThings(e,t){var r=this.thingsUrl()+"?"+(e.parentThingId?"&parentThingId="+e.parentThingId:"")+(e.thingFilter?"&thingFilter="+JSON.stringify(e.thingFilter):"")+(e.valueFilter?"&valueFilter="+JSON.stringify(e.valueFilter):"")+(e.orderBy?"&orderBy="+e.orderBy:"")+(e.skip?"&skip="+e.skip:"")+(e.top?"&top="+e.top:"");return j().get(r,{cancelToken:t?t.cancelerToken:void 0}).then((function(e){return{things:e.data,itemsRange:R.getRangeItemsFromResponse(e)}})).catch((function(e){throw j().isCancel(e)&&console.log("Request canceled",e.message),e})).finally((function(){}))}async createThing(e){return(await j().post(this.thingsUrl(),e)).data}async updateThing(e,t){return(await j().put(this.thingsUrl(e),t)).data}async deleteThing(e){return(await j().delete(this.thingsUrl(e))).data}async getThingChildrenIds(e){return(await j().get(this.thingChildrenUrl(e))).data}async addChildToParent(e,t){return(await j().post(this.thingChildrenUrl(e),JSON.stringify(t))).data}async deleteThingChild(e,t){return(await j().delete(this.thingDeleteChildUrl(e,t))).data}async getThingValue(e){return(await j().get(this.thingsValueUrl(e))).data}async putThingValue(e,t,r){let n=t?this.thingsCmdUrl(e):this.thingsValueUrl(e);return(await j().put(n,r)).data}async putThingsPositions(e){return(await j().put(this.thingsPositionsUrl(),e)).data}}class V{constructor(e,t,r,n,o){this.mainThing=e,this.thingKind=t,this.thingClaims=r,this.thingsDataContext=n,this.realtimeConnector=o,this.onCreateThing=e=>{e.kind!==this.thingKind||this.mainThing.addThingChild(e)},this.onUpdateThingValue=(e,t,r)=>{let n=this.searchThingById(e);n&&(r||(n.value=t))};let i=this.thingKind?{$and:[{kind:this.thingKind},{deletedStatus:1}]}:{deletedStatus:1};this.getThingsParams={parentThingId:null,thingFilter:i,top:10,skip:0,orderBy:null,valueFilter:null},this.getChindrenThingsParams={parentThingId:null,thingFilter:{deletedStatus:1},top:10,skip:0,orderBy:null,valueFilter:null}}reset(){this.mainThing.children.splice(0,this.mainThing.children.length),this.mainThing.childrenSkip=0,this.mainThing.childrenTotalItems=Number.MAX_SAFE_INTEGER,this.mainThing.usersInfos.splice(0,this.mainThing.usersInfos.length)}init(){this.realtimeConnector.setHook("onCreateThing",this.onCreateThing),this.realtimeConnector.setHook("onUpdateThingValue",this.onUpdateThingValue)}done(){this.realtimeConnector.remHook("onUpdateThingValue",this.onUpdateThingValue),this.realtimeConnector.remHook("onCreateThing",this.onCreateThing)}searchThingById(e){return this.mainThing.children.find((t=>t.id===e))}async getThings(e,t){let r,n=[];try{r=await this.thingsDataContext.getThings(e,t);for(let e=0;e<r.things.length;e++){var o=new H(r.things[e]);n.push(o)}}catch(e){throw e}return{things:n,itemsRange:r.itemsRange}}async getMoreThingChildren(e,t,r){t.skip=e.childrenSkip,t.parentThingId=e.id;const n=await this.getThings(t,r);e.childrenTotalItems=n.itemsRange.totalItems,e.childrenSkip=e.childrenSkip+t.top,e.childrenSkip>e.childrenTotalItems&&(e.childrenSkip=e.childrenTotalItems);for(var o=0;o<n.things.length;o++)e.children.push(n.things[o]);return n}async getMoreThings(e){let t=this;var r=await this.getMoreThingChildren(this.mainThing,this.getThingsParams,e);let n=[];for(let o=0;o<r.things.length;o++)n.push(t.getMoreThingChildren(r.things[o],t.getChindrenThingsParams,e));return Promise.all(n)}getThingsTotalItems(){return this.mainThing.childrenTotalItems}async getThing(e){const t=await this.thingsDataContext.getThing(e);return new H(t)}async putThingValue(e,t,r){return await this.thingsDataContext.putThingValue(e,t,r)}}class L{constructor(e,t,r){this.endPointAddress={server:"https://api.thingshub.org:3000",api:"https://api.thingshub.org:3000/api"},this.thingsManagerClaims={publicReadClaims:0,publicChangeClaims:0,everyoneReadClaims:0,everyoneChangeClaims:0,creatorUserReadClaims:65535,creatorUserChangeClaims:1048575},this.onError=e=>console.log(e),this.onConnectError=e=>console.log(e),this.onStateChanged=e=>console.log(e),this.endPointAddress.server=e+":3000",this.endPointAddress.api=e+":3000/api",this.accountManager=new F("thingshub",this.endPointAddress,t),this.realTimeConnector=new P(this.endPointAddress.server,this.accountManager.getSecurityToken,this.onError,this.onConnectError,this.onStateChanged),this.realTimeConnector.subscribe(),this.mainThing=new H,this.things=this.mainThing.children,this.thingsDatacontext=new B(this.endPointAddress),this.thingsManager=new V(this.mainThing,r,this.thingsManagerClaims,this.thingsDatacontext,this.realTimeConnector),this.httpRequestCanceler=new x}on(e,t){return this.realTimeConnector.setHook(e,t),this}off(e,t){return this.realTimeConnector.remHook(e,t),this}get(){return this.thingsManager.getMoreThings(this.httpRequestCanceler).then(),this}cancel(){return this.httpRequestCanceler.cancel(),this}}const W=(e,t,r="first thing")=>new L(e,t,r);(0,e.shim)()})(),i})()));
//# sourceMappingURL=thingshub.js.map