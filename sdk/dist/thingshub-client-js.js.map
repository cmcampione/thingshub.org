{"version":3,"sources":["webpack:///webpack/bootstrap 13a4f5384170941dd302","webpack:///./src/index.ts","webpack:///./src/connector.ts","webpack:///external \"axios\"","webpack:///external \"io\""],"names":[],"mappings":"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","file":"thingshub-client-js.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 13a4f5384170941dd302","export * from \"./connector\"; \n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","import axios, { AxiosRequestConfig, AxiosPromise } from \"axios\";\r\nimport * as socketIo from \"socket.io-client\";\r\n\r\nexport const enum ConnectionStates {\r\n    Connecting = 0,\r\n    Connected = 1,\r\n    Reconnecting = 2,\r\n    Disconnected = 4\r\n}\r\n\r\nexport class Connector {\r\n\r\n    protected connectionStatus : ConnectionStates = ConnectionStates.Disconnected;\r\n\r\n    protected url: string = \"\";\r\n    \r\n    protected authHook: () => void = null;\r\n\r\n    protected errorHook: (error: any) => void = null;\r\n    protected stateChangedHook: (newState: ConnectionStates) => void = null;\r\n    protected subscribeFailHook: () => void = null;\r\n\r\n    protected on_connectionStatusChange(newState : ConnectionStates) {\r\n        if (this.connectionStatus == newState)\r\n            return;\r\n        \r\n        this.connectionStatus = newState;\r\n        this.stateChangedHook(newState);\r\n    }\r\n\r\n    public subscribe() : void {}\r\n    public unsubscribe() : void {}\r\n\r\n    public setHook(eventName : string, hook : (...msg: any[]) => void) : void {}\r\n    public remHook(eventName : any, hook : (...msg: any[]) => void) : void {}\r\n\r\n    constructor(url : string,\r\n        authHook : () => void,\r\n        errorHook : (error) => void,\r\n        stateChangedHook : (change: ConnectionStates) => void, \r\n        subscribeFailHook : () => void) {\r\n\r\n            this.url = url;\r\n\r\n            this.authHook = authHook;\r\n            this.errorHook = errorHook;\r\n            this.stateChangedHook = stateChangedHook;\r\n            this.subscribeFailHook = subscribeFailHook;\r\n    }\r\n\r\n    public api() : Promise<any | any> {\r\n        return axios.get(this.url + \"/api\")\r\n        .then((response : any) => {return response; });\r\n    }\r\n}\r\n\r\nexport class SocketIOConnector extends Connector\r\n{\r\n    private socket : SocketIOClient.Socket = null;\r\n    \r\n    constructor(url : string,\r\n        authHook : () => void,\r\n        errorHook : (error) => void,\r\n        stateChangedHook : (change: ConnectionStates) => void, \r\n        subscribeFailHook : () => void) {\r\n            super(url, authHook, errorHook, stateChangedHook, subscribeFailHook);\r\n    }\r\n\r\n    private on_error(error) {\r\n        if (this.errorHook)\r\n            this.errorHook(error);\r\n    }\r\n\r\n    private on_connect_error(error) {\r\n        if (this.subscribeFailHook)\r\n            this.subscribeFailHook();\r\n    }\r\n    private on_connect() {\r\n        if (this.on_connectionStatusChange)\r\n            this.on_connectionStatusChange(ConnectionStates.Connected);\r\n    }\r\n\r\n    private on_disconnect(reason) {\r\n        if (this.on_connectionStatusChange)\r\n            this.on_connectionStatusChange(ConnectionStates.Disconnected);\r\n    }\r\n\r\n    public subscribe() : void {\r\n        if (this.socket)\r\n            return;\r\n\r\n        let fullUrl = this.url + \"?\" + this.authHook();\r\n        this.socket = socketIo(fullUrl);\r\n\r\n        this.socket.on(\"error\", error => this.on_error(error));\r\n\r\n        this.socket.on(\"connect_error\", error => this.on_connect_error(error));\r\n        this.socket.on(\"connect\", () => this.on_connect());\r\n        this.socket.on(\"disconnect\", reason => this.on_disconnect(reason));\r\n    }\r\n    public unsubscribe() : void {\r\n        if (!this.socket)\r\n            return;\r\n\r\n        this.socket.disconnect();\r\n    }\r\n\r\n    public setHook(eventName : string, hook : (...msg: any[]) => void) : void {\r\n        this.socket.on(eventName, hook);\r\n    }\r\n    public remHook(eventName : any, hook : (...msg: any[]) => void) : void {\r\n        this.socket.off(eventName, hook);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/connector.ts","module.exports = axios;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"axios\"\n// module id = 2\n// module chunks = 0","module.exports = io;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"io\"\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}