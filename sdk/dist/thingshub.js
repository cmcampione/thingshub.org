!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("axios"),require("socket.io-client")):"function"==typeof define&&define.amd?define(["axios","socket.io-client"],t):"object"==typeof exports?exports.thingshub=t(require("axios"),require("socket.io-client")):e.thingshub=t(e.axios,e.io)}(this,(function(e,t){return(()=>{var r={924:(e,t,r)=>{"use strict";var n=r(210),o=r(559),i=o(n("String.prototype.indexOf"));e.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&i(e,".prototype.")>-1?o(r):r}},559:(e,t,r)=>{"use strict";var n=r(612),o=r(210),i=o("%Function.prototype.apply%"),a=o("%Function.prototype.call%"),s=o("%Reflect.apply%",!0)||n.call(a,i),c=o("%Object.defineProperty%",!0);if(c)try{c({},"a",{value:1})}catch(e){c=null}e.exports=function(){return s(n,a,arguments)};var l=function(){return s(n,i,arguments)};c?c(e.exports,"apply",{value:l}):e.exports.apply=l},289:(e,t,r)=>{"use strict";var n=r(215),o="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),i=Object.prototype.toString,a=Array.prototype.concat,s=Object.defineProperty,c=s&&function(){var e={};try{for(var t in s(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}(),l=function(e,t,r,n){var o;(!(t in e)||"function"==typeof(o=n)&&"[object Function]"===i.call(o)&&n())&&(c?s(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r)},p=function(e,t){var r=arguments.length>2?arguments[2]:{},i=n(t);o&&(i=a.call(i,Object.getOwnPropertySymbols(t)));for(var s=0;s<i.length;s+=1)l(e,i[s],t[i[s]],r[i[s]])};p.supportsDescriptors=!!c,e.exports=p},476:(e,t,r)=>{"use strict";var n=r(769)("%TypeError%"),o=r(146),i=r(509),a=r(709),s=r(335),c=r(852),l=r(18),p=r(446),u=r(495),y=r(100);e.exports=function(e,t,r){if("Object"!==y(e))throw new n("Assertion failed: Type(O) is not Object");if(!l(t))throw new n("Assertion failed: IsPropertyKey(P) is not true");var f=o({Type:y,IsDataDescriptor:c,IsAccessorDescriptor:s},r)?r:u(r);if(!o({Type:y,IsDataDescriptor:c,IsAccessorDescriptor:s},f))throw new n("Assertion failed: Desc is not a valid Property Descriptor");return i(c,p,a,e,t,f)}},709:(e,t,r)=>{"use strict";var n=r(179),o=r(100);e.exports=function(e){if(void 0===e)return e;n(o,"Property Descriptor","Desc",e);var t={};return"[[Value]]"in e&&(t.value=e["[[Value]]"]),"[[Writable]]"in e&&(t.writable=e["[[Writable]]"]),"[[Get]]"in e&&(t.get=e["[[Get]]"]),"[[Set]]"in e&&(t.set=e["[[Set]]"]),"[[Enumerable]]"in e&&(t.enumerable=e["[[Enumerable]]"]),"[[Configurable]]"in e&&(t.configurable=e["[[Configurable]]"]),t}},335:(e,t,r)=>{"use strict";var n=r(642),o=r(179),i=r(100);e.exports=function(e){return void 0!==e&&(o(i,"Property Descriptor","Desc",e),!(!n(e,"[[Get]]")&&!n(e,"[[Set]]")))}},763:(e,t,r)=>{"use strict";e.exports=r(320)},522:(e,t,r)=>{"use strict";var n=r(769)("%Reflect.construct%",!0),o=r(476);try{o({},"",{"[[Get]]":function(){}})}catch(e){o=null}if(o&&n){var i={},a={};o(a,"length",{"[[Get]]":function(){throw i},"[[Enumerable]]":!0}),e.exports=function(e){try{n(e,a)}catch(e){return e===i}}}else e.exports=function(e){return"function"==typeof e&&!!e.prototype}},852:(e,t,r)=>{"use strict";var n=r(642),o=r(179),i=r(100);e.exports=function(e){return void 0!==e&&(o(i,"Property Descriptor","Desc",e),!(!n(e,"[[Value]]")&&!n(e,"[[Writable]]")))}},18:e=>{"use strict";e.exports=function(e){return"string"==typeof e||"symbol"==typeof e}},446:(e,t,r)=>{"use strict";var n=r(214);e.exports=function(e,t){return e===t?0!==e||1/e==1/t:n(e)&&n(t)}},776:(e,t,r)=>{"use strict";var n=r(769),o=n("%Symbol.species%",!0),i=n("%TypeError%"),a=r(522),s=r(100);e.exports=function(e,t){if("Object"!==s(e))throw new i("Assertion failed: Type(O) is not Object");var r=e.constructor;if(void 0===r)return t;if("Object"!==s(r))throw new i("O.constructor is not an Object");var n=o?r[o]:void 0;if(null==n)return t;if(a(n))return n;throw new i("no constructor found")}},283:e=>{"use strict";e.exports=function(e){return!!e}},495:(e,t,r)=>{"use strict";var n=r(642),o=r(769)("%TypeError%"),i=r(100),a=r(283),s=r(763);e.exports=function(e){if("Object"!==i(e))throw new o("ToPropertyDescriptor requires an object");var t={};if(n(e,"enumerable")&&(t["[[Enumerable]]"]=a(e.enumerable)),n(e,"configurable")&&(t["[[Configurable]]"]=a(e.configurable)),n(e,"value")&&(t["[[Value]]"]=e.value),n(e,"writable")&&(t["[[Writable]]"]=a(e.writable)),n(e,"get")){var r=e.get;if(void 0!==r&&!s(r))throw new o("getter must be a function");t["[[Get]]"]=r}if(n(e,"set")){var c=e.set;if(void 0!==c&&!s(c))throw new o("setter must be a function");t["[[Set]]"]=c}if((n(t,"[[Get]]")||n(t,"[[Set]]"))&&(n(t,"[[Value]]")||n(t,"[[Writable]]")))throw new o("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return t}},100:(e,t,r)=>{"use strict";var n=r(276);e.exports=function(e){return"symbol"==typeof e?"Symbol":n(e)}},276:e=>{"use strict";e.exports=function(e){return null===e?"Null":void 0===e?"Undefined":"function"==typeof e||"object"==typeof e?"Object":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"string"==typeof e?"String":void 0}},769:(e,t,r)=>{"use strict";var n,o=TypeError,i=Object.getOwnPropertyDescriptor;if(i)try{i({},"")}catch(e){i=null}var a=function(){throw new o},s=i?function(){try{return a}catch(e){try{return i(arguments,"callee").get}catch(e){return a}}}():a,c=r(405)(),l=Object.getPrototypeOf||function(e){return e.__proto__},p=n,u="undefined"==typeof Uint8Array?n:l(Uint8Array),y={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":c?l([][Symbol.iterator]()):n,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":undefined,"%AsyncFunctionPrototype%":n,"%AsyncGenerator%":n,"%AsyncGeneratorFunction%":undefined,"%AsyncGeneratorPrototype%":n,"%AsyncIteratorPrototype%":p&&c&&Symbol.asyncIterator?p[Symbol.asyncIterator]():n,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?n:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?n:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?n:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?n:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":n,"%GeneratorFunction%":undefined,"%GeneratorPrototype%":n,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?n:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?n:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?n:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":c?l(l([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%JSONParse%":"object"==typeof JSON?JSON.parse:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&c?l((new Map)[Symbol.iterator]()):n,"%MapPrototype%":"undefined"==typeof Map?n:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%PromisePrototype%":"undefined"==typeof Promise?n:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?n:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?n:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?n:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?n:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&c?l((new Set)[Symbol.iterator]()):n,"%SetPrototype%":"undefined"==typeof Set?n:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":c?l(""[Symbol.iterator]()):n,"%StringPrototype%":String.prototype,"%Symbol%":c?Symbol:n,"%SymbolPrototype%":c?Symbol.prototype:n,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":s,"%TypedArray%":u,"%TypedArrayPrototype%":u?u.prototype:n,"%TypeError%":o,"%TypeErrorPrototype%":o.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?n:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?n:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?n:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?n:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?n:WeakSet.prototype},f=r(612).call(Function.call,String.prototype.replace),h=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,d=/\\(\\)?/g,g=function(e){var t=[];return f(e,h,(function(e,r,n,o){t[t.length]=n?f(o,d,"$1"):r||e})),t},m=function(e,t){if(!(e in y))throw new SyntaxError("intrinsic "+e+" does not exist!");if(void 0===y[e]&&!t)throw new o("intrinsic "+e+" exists, but is not available. Please file an issue!");return y[e]};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new TypeError('"allowMissing" argument must be a boolean');for(var r=g(e),n=m("%"+(r.length>0?r[0]:"")+"%",t),a=1;a<r.length;a+=1)if(null!=n)if(i&&a+1>=r.length){var s=i(n,r[a]);if(!t&&!(r[a]in n))throw new o("base intrinsic for "+e+" exists, but the property is not available.");n=s&&"get"in s&&!("originalValue"in s.get)?s.get:n[r[a]]}else n=n[r[a]];return n}},509:(e,t,r)=>{"use strict";var n=r(769)("%Object.defineProperty%",!0);if(n)try{n({},"a",{value:1})}catch(e){n=null}var o=r(914)("Object.prototype.propertyIsEnumerable");e.exports=function(e,t,r,i,a,s){if(!n){if(!e(s))return!1;if(!s["[[Configurable]]"]||!s["[[Writable]]"])return!1;if(a in i&&o(i,a)!==!!s["[[Enumerable]]"])return!1;var c=s["[[Value]]"];return i[a]=c,t(i[a],c)}return n(i,a,r(s)),!0}},179:(e,t,r)=>{"use strict";var n=r(769),o=n("%TypeError%"),i=n("%SyntaxError%"),a=r(642),s={"Property Descriptor":function(e,t){if("Object"!==e(t))return!1;var r={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var n in t)if(a(t,n)&&!r[n])return!1;var i=a(t,"[[Value]]"),s=a(t,"[[Get]]")||a(t,"[[Set]]");if(i&&s)throw new o("Property Descriptors may not be both accessor and data descriptors");return!0}};e.exports=function(e,t,r,n){var a=s[t];if("function"!=typeof a)throw new i("unknown record type: "+t);if(!a(e,n))throw new o(r+" must be a "+t)}},147:(e,t,r)=>{"use strict";var n=r(612),o=r(769),i=o("%Function.prototype.apply%"),a=o("%Function.prototype.call%"),s=o("%Reflect.apply%",!0)||n.call(a,i),c=o("%Object.defineProperty%",!0);if(c)try{c({},"a",{value:1})}catch(e){c=null}e.exports=function(){return s(n,a,arguments)};var l=function(){return s(n,i,arguments)};c?c(e.exports,"apply",{value:l}):e.exports.apply=l},914:(e,t,r)=>{"use strict";var n=r(769),o=r(147),i=o(n("String.prototype.indexOf"));e.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&i(e,".prototype.")?o(r):r}},214:e=>{"use strict";e.exports=Number.isNaN||function(e){return e!=e}},146:(e,t,r)=>{"use strict";var n=r(769),o=r(642),i=n("%TypeError%");e.exports=function(e,t){if("Object"!==e.Type(t))return!1;var r={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var n in t)if(o(t,n)&&!r[n])return!1;if(e.IsDataDescriptor(t)&&e.IsAccessorDescriptor(t))throw new i("Property Descriptors may not be both accessor and data descriptors");return!0}},648:e=>{"use strict";var t="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,n=Object.prototype.toString,o="[object Function]";e.exports=function(e){var i=this;if("function"!=typeof i||n.call(i)!==o)throw new TypeError(t+i);for(var a,s=r.call(arguments,1),c=function(){if(this instanceof a){var t=i.apply(this,s.concat(r.call(arguments)));return Object(t)===t?t:this}return i.apply(e,s.concat(r.call(arguments)))},l=Math.max(0,i.length-s.length),p=[],u=0;u<l;u++)p.push("$"+u);if(a=Function("binder","return function ("+p.join(",")+"){ return binder.apply(this,arguments); }")(c),i.prototype){var y=function(){};y.prototype=i.prototype,a.prototype=new y,y.prototype=null}return a}},612:(e,t,r)=>{"use strict";var n=r(648);e.exports=Function.prototype.bind||n},210:(e,t,r)=>{"use strict";var n,o=SyntaxError,i=Function,a=TypeError,s=function(e){try{return i('"use strict"; return ('+e+").constructor;")()}catch(e){}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch(e){c=null}var l=function(){throw new a},p=c?function(){try{return l}catch(e){try{return c(arguments,"callee").get}catch(e){return l}}}():l,u=r(405)(),y=Object.getPrototypeOf||function(e){return e.__proto__},f={},h="undefined"==typeof Uint8Array?n:y(Uint8Array),d={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":u?y([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":f,"%AsyncGenerator%":f,"%AsyncGeneratorFunction%":f,"%AsyncIteratorPrototype%":f,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":f,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":u?y(y([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&u?y((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&u?y((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":u?y(""[Symbol.iterator]()):n,"%Symbol%":u?Symbol:n,"%SyntaxError%":o,"%ThrowTypeError%":p,"%TypedArray%":h,"%TypeError%":a,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet},g=function e(t){var r;if("%AsyncFunction%"===t)r=s("async function () {}");else if("%GeneratorFunction%"===t)r=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=s("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&(r=y(o.prototype))}return d[t]=r,r},m={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},b=r(612),v=r(642),S=b.call(Function.call,Array.prototype.concat),C=b.call(Function.apply,Array.prototype.splice),A=b.call(Function.call,String.prototype.replace),w=b.call(Function.call,String.prototype.slice),P=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,T=/\\(\\)?/g,O=function(e){var t=w(e,0,1),r=w(e,-1);if("%"===t&&"%"!==r)throw new o("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new o("invalid intrinsic syntax, expected opening `%`");var n=[];return A(e,P,(function(e,t,r,o){n[n.length]=r?A(o,T,"$1"):t||e})),n},j=function(e,t){var r,n=e;if(v(m,n)&&(n="%"+(r=m[n])[0]+"%"),v(d,n)){var i=d[n];if(i===f&&(i=g(n)),void 0===i&&!t)throw new a("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new o("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new a('"allowMissing" argument must be a boolean');var r=O(e),n=r.length>0?r[0]:"",i=j("%"+n+"%",t),s=i.name,l=i.value,p=!1,u=i.alias;u&&(n=u[0],C(r,S([0,1],u)));for(var y=1,f=!0;y<r.length;y+=1){var h=r[y],g=w(h,0,1),m=w(h,-1);if(('"'===g||"'"===g||"`"===g||'"'===m||"'"===m||"`"===m)&&g!==m)throw new o("property names with quotes must have matching quotes");if("constructor"!==h&&f||(p=!0),v(d,s="%"+(n+="."+h)+"%"))l=d[s];else if(null!=l){if(!(h in l)){if(!t)throw new a("base intrinsic for "+e+" exists, but the property is not available.");return}if(c&&y+1>=r.length){var b=c(l,h);l=(f=!!b)&&"get"in b&&!("originalValue"in b.get)?b.get:l[h]}else f=v(l,h),l=l[h];f&&!p&&(d[s]=l)}}return l}},405:(e,t,r)=>{"use strict";var n=r.g.Symbol,o=r(419);e.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&o()}},419:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},642:(e,t,r)=>{"use strict";var n=r(612);e.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},320:e=>{"use strict";var t,r,n=Function.prototype.toString,o="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof o&&"function"==typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw r}}),r={},o((function(){throw 42}),null,t)}catch(e){e!==r&&(o=null)}else o=null;var i=/^\s*class\b/,a=function(e){try{var t=n.call(e);return i.test(t)}catch(e){return!1}},s=Object.prototype.toString,c="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=o?function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;try{o(e,null,t)}catch(e){if(e!==r)return!1}return!a(e)}:function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(c)return function(e){try{return!a(e)&&(n.call(e),!0)}catch(e){return!1}}(e);if(a(e))return!1;var t=s.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}},631:(e,t,r)=>{var n="function"==typeof Map&&Map.prototype,o=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i=n&&o&&"function"==typeof o.get?o.get:null,a=n&&Map.prototype.forEach,s="function"==typeof Set&&Set.prototype,c=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,l=s&&c&&"function"==typeof c.get?c.get:null,p=s&&Set.prototype.forEach,u="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,y="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,f=Boolean.prototype.valueOf,h=Object.prototype.toString,d=Function.prototype.toString,g=String.prototype.match,m="function"==typeof BigInt?BigInt.prototype.valueOf:null,b=Object.getOwnPropertySymbols,v="function"==typeof Symbol?Symbol.prototype.toString:null,S=Object.prototype.propertyIsEnumerable,C=r(654).custom,A=C&&O(C)?C:null;function w(e,t,r){var n="double"===(r.quoteStyle||t)?'"':"'";return n+e+n}function P(e){return String(e).replace(/"/g,"&quot;")}function T(e){return"[object Array]"===I(e)}function O(e){return"[object Symbol]"===I(e)}e.exports=function e(t,r,n,o){var s=r||{};if(k(s,"quoteStyle")&&"single"!==s.quoteStyle&&"double"!==s.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(k(s,"maxStringLength")&&("number"==typeof s.maxStringLength?s.maxStringLength<0&&s.maxStringLength!==1/0:null!==s.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var c=!k(s,"customInspect")||s.customInspect;if("boolean"!=typeof c)throw new TypeError('option "customInspect", if provided, must be `true` or `false`');if(k(s,"indent")&&null!==s.indent&&"\t"!==s.indent&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return E(t,s);if("number"==typeof t)return 0===t?1/0/t>0?"0":"-0":String(t);if("bigint"==typeof t)return String(t)+"n";var h=void 0===s.depth?5:s.depth;if(void 0===n&&(n=0),n>=h&&h>0&&"object"==typeof t)return T(t)?"[Array]":"[Object]";var b,S=function(e,t){var r;if("\t"===e.indent)r="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;r=Array(e.indent+1).join(" ")}return{base:r,prev:Array(t+1).join(r)}}(s,n);if(void 0===o)o=[];else if(x(o,t)>=0)return"[Circular]";function C(t,r,i){if(r&&(o=o.slice()).push(r),i){var a={depth:s.depth};return k(s,"quoteStyle")&&(a.quoteStyle=s.quoteStyle),e(t,a,n+1,o)}return e(t,s,n+1,o)}if("function"==typeof t){var j=function(e){if(e.name)return e.name;var t=g.call(d.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),R=F(t,C);return"[Function"+(j?": "+j:" (anonymous)")+"]"+(R.length>0?" { "+R.join(", ")+" }":"")}if(O(t)){var M=v.call(t);return"object"==typeof t?U(M):M}if((b=t)&&"object"==typeof b&&("undefined"!=typeof HTMLElement&&b instanceof HTMLElement||"string"==typeof b.nodeName&&"function"==typeof b.getAttribute)){for(var B="<"+String(t.nodeName).toLowerCase(),V=t.attributes||[],H=0;H<V.length;H++)B+=" "+V[H].name+"="+w(P(V[H].value),"double",s);return B+=">",t.childNodes&&t.childNodes.length&&(B+="..."),B+"</"+String(t.nodeName).toLowerCase()+">"}if(T(t)){if(0===t.length)return"[]";var W=F(t,C);return S&&!function(e){for(var t=0;t<e.length;t++)if(x(e[t],"\n")>=0)return!1;return!0}(W)?"["+D(W,S)+"]":"[ "+W.join(", ")+" ]"}if(function(e){return"[object Error]"===I(e)}(t)){var L=F(t,C);return 0===L.length?"["+String(t)+"]":"{ ["+String(t)+"] "+L.join(", ")+" }"}if("object"==typeof t&&c){if(A&&"function"==typeof t[A])return t[A]();if("function"==typeof t.inspect)return t.inspect()}if(function(e){if(!i||!e||"object"!=typeof e)return!1;try{i.call(e);try{l.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var G=[];return a.call(t,(function(e,r){G.push(C(r,t,!0)+" => "+C(e,t))})),_("Map",i.call(t),G,S)}if(function(e){if(!l||!e||"object"!=typeof e)return!1;try{l.call(e);try{i.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var $=[];return p.call(t,(function(e){$.push(C(e,t))})),_("Set",l.call(t),$,S)}if(function(e){if(!u||!e||"object"!=typeof e)return!1;try{u.call(e,u);try{y.call(e,y)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return N("WeakMap");if(function(e){if(!y||!e||"object"!=typeof e)return!1;try{y.call(e,y);try{u.call(e,u)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return N("WeakSet");if(function(e){return"[object Number]"===I(e)}(t))return U(C(Number(t)));if(function(e){return"[object BigInt]"===I(e)}(t))return U(C(m.call(t)));if(function(e){return"[object Boolean]"===I(e)}(t))return U(f.call(t));if(function(e){return"[object String]"===I(e)}(t))return U(C(String(t)));if(!function(e){return"[object Date]"===I(e)}(t)&&!function(e){return"[object RegExp]"===I(e)}(t)){var K=F(t,C);return 0===K.length?"{}":S?"{"+D(K,S)+"}":"{ "+K.join(", ")+" }"}return String(t)};var j=Object.prototype.hasOwnProperty||function(e){return e in this};function k(e,t){return j.call(e,t)}function I(e){return h.call(e)}function x(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function E(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return E(e.slice(0,t.maxStringLength),t)+n}return w(e.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,R),"single",t)}function R(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+t.toString(16).toUpperCase()}function U(e){return"Object("+e+")"}function N(e){return e+" { ? }"}function _(e,t,r,n){return e+" ("+t+") {"+(n?D(r,n):r.join(", "))+"}"}function D(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+e.join(","+r)+"\n"+t.prev}function F(e,t){var r=T(e),n=[];if(r){n.length=e.length;for(var o=0;o<e.length;o++)n[o]=k(e,o)?t(e[o],e):""}for(var i in e)k(e,i)&&(r&&String(Number(i))===i&&i<e.length||(/[^\w$]/.test(i)?n.push(t(i,e)+": "+t(e[i],e)):n.push(i+": "+t(e[i],e))));if("function"==typeof b)for(var a=b(e),s=0;s<a.length;s++)S.call(e,a[s])&&n.push("["+t(a[s])+"]: "+t(e[a[s]],e));return n}},987:(e,t,r)=>{"use strict";var n;if(!Object.keys){var o=Object.prototype.hasOwnProperty,i=Object.prototype.toString,a=r(414),s=Object.prototype.propertyIsEnumerable,c=!s.call({toString:null},"toString"),l=s.call((function(){}),"prototype"),p=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(e){var t=e.constructor;return t&&t.prototype===e},y={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!y["$"+e]&&o.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{u(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();n=function(e){var t=null!==e&&"object"==typeof e,r="[object Function]"===i.call(e),n=a(e),s=t&&"[object String]"===i.call(e),y=[];if(!t&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var h=l&&r;if(s&&e.length>0&&!o.call(e,0))for(var d=0;d<e.length;++d)y.push(String(d));if(n&&e.length>0)for(var g=0;g<e.length;++g)y.push(String(g));else for(var m in e)h&&"prototype"===m||!o.call(e,m)||y.push(String(m));if(c)for(var b=function(e){if("undefined"==typeof window||!f)return u(e);try{return u(e)}catch(e){return!1}}(e),v=0;v<p.length;++v)b&&"constructor"===p[v]||!o.call(e,p[v])||y.push(p[v]);return y}}e.exports=n},215:(e,t,r)=>{"use strict";var n=Array.prototype.slice,o=r(414),i=Object.keys,a=i?function(e){return i(e)}:r(987),s=Object.keys;a.shim=function(){return Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return o(e)?s(n.call(e)):s(e)}):Object.keys=a,Object.keys||a},e.exports=a},414:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){var r=t.call(e),n="[object Arguments]"===r;return n||(n="[object Array]"!==r&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),n}},385:(e,t,r)=>{"use strict";r(971)();var n=r(763),o=r(776),i=r(100),a=function(e,t){return new e((function(e){e(t)}))},s=Promise,c=function(e){var t=this;if("Object"!==i(t))throw new TypeError("receiver is not an Object");var r=o(t,s),c=e,l=e;return n(e)&&(c=function(e,t){return function(r){var n=t();return a(e,n).then((function(){return r}))}}(r,e),l=function(e,t){return function(r){var n=t();return a(e,n).then((function(){throw r}))}}(r,e)),t.then(c,l)};if(Object.getOwnPropertyDescriptor){var l=Object.getOwnPropertyDescriptor(c,"name");l&&l.configurable&&Object.defineProperty(c,"name",{configurable:!0,value:"finally"})}e.exports=c},628:(e,t,r)=>{"use strict";var n=r(612),o=r(289),i=r(385),a=r(76),s=r(547),c=n.call(Function.call,a());o(c,{getPolyfill:a,implementation:i,shim:s}),e.exports=c},76:(e,t,r)=>{"use strict";var n=r(971),o=r(385);e.exports=function(){return n(),"function"==typeof Promise.prototype.finally?Promise.prototype.finally:o}},971:e=>{"use strict";e.exports=function(){if("function"!=typeof Promise)throw new TypeError("`Promise.prototype.finally` requires a global `Promise` be available.")}},547:(e,t,r)=>{"use strict";var n=r(971),o=r(76),i=r(289);e.exports=function(){n();var e=o();return i(Promise.prototype,{finally:e},{finally:function(){return Promise.prototype.finally!==e}}),e}},798:e=>{"use strict";var t=String.prototype.replace,r=/%20/g,n="RFC3986";e.exports={default:n,formatters:{RFC1738:function(e){return t.call(e,r,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:n}},129:(e,t,r)=>{"use strict";var n=r(261),o=r(235),i=r(798);e.exports={formats:i,parse:o,stringify:n}},235:(e,t,r)=>{"use strict";var n=r(896),o=Object.prototype.hasOwnProperty,i=Array.isArray,a={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},c=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},l=function(e,t,r,n){if(e){var i=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,s=r.depth>0&&/(\[[^[\]]*])/.exec(i),l=s?i.slice(0,s.index):i,p=[];if(l){if(!r.plainObjects&&o.call(Object.prototype,l)&&!r.allowPrototypes)return;p.push(l)}for(var u=0;r.depth>0&&null!==(s=a.exec(i))&&u<r.depth;){if(u+=1,!r.plainObjects&&o.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;p.push(s[1])}return s&&p.push("["+i.slice(s.index)+"]"),function(e,t,r,n){for(var o=n?t:c(t,r),i=e.length-1;i>=0;--i){var a,s=e[i];if("[]"===s&&r.parseArrays)a=[].concat(o);else{a=r.plainObjects?Object.create(null):{};var l="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,p=parseInt(l,10);r.parseArrays||""!==l?!isNaN(p)&&s!==l&&String(p)===l&&p>=0&&r.parseArrays&&p<=r.arrayLimit?(a=[])[p]=o:a[l]=o:a={0:o}}o=a}return o}(p,t,r,n)}};e.exports=function(e,t){var r=function(e){if(!e)return a;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?a.charset:e.charset;return{allowDots:void 0===e.allowDots?a.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:a.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:a.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:a.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:a.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:a.comma,decoder:"function"==typeof e.decoder?e.decoder:a.decoder,delimiter:"string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:a.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:a.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:a.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:a.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:a.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var p="string"==typeof e?function(e,t){var r,l={},p=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,u=t.parameterLimit===1/0?void 0:t.parameterLimit,y=p.split(t.delimiter,u),f=-1,h=t.charset;if(t.charsetSentinel)for(r=0;r<y.length;++r)0===y[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===y[r]?h="utf-8":"utf8=%26%2310003%3B"===y[r]&&(h="iso-8859-1"),f=r,r=y.length);for(r=0;r<y.length;++r)if(r!==f){var d,g,m=y[r],b=m.indexOf("]="),v=-1===b?m.indexOf("="):b+1;-1===v?(d=t.decoder(m,a.decoder,h,"key"),g=t.strictNullHandling?null:""):(d=t.decoder(m.slice(0,v),a.decoder,h,"key"),g=n.maybeMap(c(m.slice(v+1),t),(function(e){return t.decoder(e,a.decoder,h,"value")}))),g&&t.interpretNumericEntities&&"iso-8859-1"===h&&(g=s(g)),m.indexOf("[]=")>-1&&(g=i(g)?[g]:g),o.call(l,d)?l[d]=n.combine(l[d],g):l[d]=g}return l}(e,r):e,u=r.plainObjects?Object.create(null):{},y=Object.keys(p),f=0;f<y.length;++f){var h=y[f],d=l(h,p[h],r,"string"==typeof e);u=n.merge(u,d,r)}return!0===r.allowSparse?u:n.compact(u)}},261:(e,t,r)=>{"use strict";var n=r(478),o=r(896),i=r(798),a=Object.prototype.hasOwnProperty,s={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},c=Array.isArray,l=Array.prototype.push,p=function(e,t){l.apply(e,c(t)?t:[t])},u=Date.prototype.toISOString,y=i.default,f={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:o.encode,encodeValuesOnly:!1,format:y,formatter:i.formatters[y],indices:!1,serializeDate:function(e){return u.call(e)},skipNulls:!1,strictNullHandling:!1},h=function e(t,r,i,a,s,l,u,y,h,d,g,m,b,v,S){var C,A=t;if(S.has(t))throw new RangeError("Cyclic object value");if("function"==typeof u?A=u(r,A):A instanceof Date?A=d(A):"comma"===i&&c(A)&&(A=o.maybeMap(A,(function(e){return e instanceof Date?d(e):e}))),null===A){if(a)return l&&!b?l(r,f.encoder,v,"key",g):r;A=""}if("string"==typeof(C=A)||"number"==typeof C||"boolean"==typeof C||"symbol"==typeof C||"bigint"==typeof C||o.isBuffer(A))return l?[m(b?r:l(r,f.encoder,v,"key",g))+"="+m(l(A,f.encoder,v,"value",g))]:[m(r)+"="+m(String(A))];var w,P=[];if(void 0===A)return P;if("comma"===i&&c(A))w=[{value:A.length>0?A.join(",")||null:void 0}];else if(c(u))w=u;else{var T=Object.keys(A);w=y?T.sort(y):T}for(var O=0;O<w.length;++O){var j=w[O],k="object"==typeof j&&void 0!==j.value?j.value:A[j];if(!s||null!==k){var I=c(A)?"function"==typeof i?i(r,j):r:r+(h?"."+j:"["+j+"]");S.set(t,!0);var x=n();p(P,e(k,I,i,a,s,l,u,y,h,d,g,m,b,v,x))}}return P};e.exports=function(e,t){var r,o=e,l=function(e){if(!e)return f;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||f.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=i.default;if(void 0!==e.format){if(!a.call(i.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=i.formatters[r],o=f.filter;return("function"==typeof e.filter||c(e.filter))&&(o=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:f.addQueryPrefix,allowDots:void 0===e.allowDots?f.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:f.charsetSentinel,delimiter:void 0===e.delimiter?f.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:f.encode,encoder:"function"==typeof e.encoder?e.encoder:f.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:f.encodeValuesOnly,filter:o,format:r,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:f.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:f.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:f.strictNullHandling}}(t);"function"==typeof l.filter?o=(0,l.filter)("",o):c(l.filter)&&(r=l.filter);var u,y=[];if("object"!=typeof o||null===o)return"";u=t&&t.arrayFormat in s?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var d=s[u];r||(r=Object.keys(o)),l.sort&&r.sort(l.sort);for(var g=n(),m=0;m<r.length;++m){var b=r[m];l.skipNulls&&null===o[b]||p(y,h(o[b],b,d,l.strictNullHandling,l.skipNulls,l.encode?l.encoder:null,l.filter,l.sort,l.allowDots,l.serializeDate,l.format,l.formatter,l.encodeValuesOnly,l.charset,g))}var v=y.join(l.delimiter),S=!0===l.addQueryPrefix?"?":"";return l.charsetSentinel&&("iso-8859-1"===l.charset?S+="utf8=%26%2310003%3B&":S+="utf8=%E2%9C%93&"),v.length>0?S+v:""}},896:(e,t,r)=>{"use strict";var n=r(798),o=Object.prototype.hasOwnProperty,i=Array.isArray,a=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),s=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r};e.exports={arrayToObject:s,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var o=t[n],a=o.obj[o.prop],s=Object.keys(a),c=0;c<s.length;++c){var l=s[c],p=a[l];"object"==typeof p&&null!==p&&-1===r.indexOf(p)&&(t.push({obj:a,prop:l}),r.push(p))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(i(r)){for(var n=[],o=0;o<r.length;++o)void 0!==r[o]&&n.push(r[o]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r,o,i){if(0===e.length)return e;var s=e;if("symbol"==typeof e?s=Symbol.prototype.toString.call(e):"string"!=typeof e&&(s=String(e)),"iso-8859-1"===r)return escape(s).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var c="",l=0;l<s.length;++l){var p=s.charCodeAt(l);45===p||46===p||95===p||126===p||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||i===n.RFC1738&&(40===p||41===p)?c+=s.charAt(l):p<128?c+=a[p]:p<2048?c+=a[192|p>>6]+a[128|63&p]:p<55296||p>=57344?c+=a[224|p>>12]+a[128|p>>6&63]+a[128|63&p]:(l+=1,p=65536+((1023&p)<<10|1023&s.charCodeAt(l)),c+=a[240|p>>18]+a[128|p>>12&63]+a[128|p>>6&63]+a[128|63&p])}return c},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(i(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function e(t,r,n){if(!r)return t;if("object"!=typeof r){if(i(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(n&&(n.plainObjects||n.allowPrototypes)||!o.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var a=t;return i(t)&&!i(r)&&(a=s(t,n)),i(t)&&i(r)?(r.forEach((function(r,i){if(o.call(t,i)){var a=t[i];a&&"object"==typeof a&&r&&"object"==typeof r?t[i]=e(a,r,n):t.push(r)}else t[i]=r})),t):Object.keys(r).reduce((function(t,i){var a=r[i];return o.call(t,i)?t[i]=e(t[i],a,n):t[i]=a,t}),a)}}},478:(e,t,r)=>{"use strict";var n=r(210),o=r(924),i=r(631),a=n("%TypeError%"),s=n("%WeakMap%",!0),c=n("%Map%",!0),l=o("WeakMap.prototype.get",!0),p=o("WeakMap.prototype.set",!0),u=o("WeakMap.prototype.has",!0),y=o("Map.prototype.get",!0),f=o("Map.prototype.set",!0),h=o("Map.prototype.has",!0),d=function(e,t){for(var r,n=e;null!==(r=n.next);n=r)if(r.key===t)return n.next=r.next,r.next=e.next,e.next=r,r};e.exports=function(){var e,t,r,n={assert:function(e){if(!n.has(e))throw new a("Side channel does not contain "+i(e))},get:function(n){if(s&&n&&("object"==typeof n||"function"==typeof n)){if(e)return l(e,n)}else if(c){if(t)return y(t,n)}else if(r)return function(e,t){var r=d(e,t);return r&&r.value}(r,n)},has:function(n){if(s&&n&&("object"==typeof n||"function"==typeof n)){if(e)return u(e,n)}else if(c){if(t)return h(t,n)}else if(r)return function(e,t){return!!d(e,t)}(r,n);return!1},set:function(n,o){s&&n&&("object"==typeof n||"function"==typeof n)?(e||(e=new s),p(e,n,o)):c?(t||(t=new c),f(t,n,o)):(r||(r={key:{},next:null}),function(e,t,r){var n=d(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}}(r,n,o))}};return n}},376:t=>{"use strict";t.exports=e},469:e=>{"use strict";e.exports=t},654:()=>{}},n={};function o(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={exports:{}};return r[e](i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{"use strict";o.r(i),o.d(i,{AccountDataContext:()=>F,AccountManager:()=>M,DefaultThingPos:()=>g,EmailDTO:()=>v,Helpers:()=>x,HttpRequestCanceler:()=>I,RealtimeConnectionStates:()=>w,RealtimeConnector:()=>j,RegisterByOnlyEmailDTO:()=>b,RegisterByOnlyEmailStatus:()=>m,SocketIORealtimeConnector:()=>k,Thing:()=>B,ThingDTO:()=>A,ThingDeletedStates:()=>t,ThingKind:()=>d,ThingUserChangeClaims:()=>f,ThingUserReadClaims:()=>u,ThingUserRoles:()=>n,ThingUserStates:()=>s,ThingUserVisibility:()=>l,ThingsDataContext:()=>V,ThingsManager:()=>H,UserDTO:()=>S,UserInfoDTO:()=>C,th:()=>L,validateThingDeletedStatus:()=>r,validateThingUserChangeClaims:()=>h,validateThingUserReadClaims:()=>y,validateThingUserRoles:()=>a,validateThingUserStatus:()=>c,validateThingUserVisibility:()=>p});var e=o(628);const t={NoMatter:0,Ok:1,Deleted:2};function r(e){switch(e){case t.NoMatter:case t.Ok:case t.Deleted:return!0}return!1}const n={NoMatter:0,Administrator:1,User:2};function a(e){switch(e){case n.NoMatter:case n.Administrator:case n.User:return!0}return!1}const s={NoMatter:0,Ok:1,WaitForAuth:2,Deleted:4};function c(e){switch(e){case s.NoMatter:case s.Ok:case s.WaitForAuth:case s.Deleted:return!0}return!1}const l={NoMatter:0,Visible:1,Hidden:2};function p(e){switch(e){case l.NoMatter:case l.Visible:case l.Hidden:return!0}return!1}const u={NoClaims:0,CanReadCreationDate:2,CanReadName:4,CanReadDescription:8,CanReadKind:16,CanReadValue:32,CanReadDeletedStatus:64,CanReadPublicReadClaims:2048,CanReadPublicChangeClaims:4096,CanReadEveryoneReadClaims:8192,CanReadEveryoneChangeClaims:16384,CanReadThingUserRights:128,CanReadThingUserRole:256,CanReadThingUserStatus:512,CanReadThingUserVisibility:32768,CanReadThingUserReadClaims:1024,CanReadThingUserChangeClaims:1};function y(e){return e<=u.AllClaims&&e>=u.NoClaims}u.AllClaims=u.CanReadThingUserChangeClaims|u.CanReadCreationDate|u.CanReadName|u.CanReadDescription|u.CanReadKind|u.CanReadValue|u.CanReadDeletedStatus|u.CanReadThingUserRights|u.CanReadThingUserRole|u.CanReadThingUserVisibility|u.CanReadThingUserStatus|u.CanReadThingUserReadClaims|u.CanReadPublicReadClaims|u.CanReadPublicChangeClaims|u.CanReadEveryoneReadClaims|u.CanReadEveryoneChangeClaims;const f={NoClaims:0,CanDeleteThing:1,CanChangeName:2,CanChangeDescription:4,CanChangeKind:8,CanChangeValue:16,CanChangeDeletedStatus:32,CanChangePublicReadClaims:4096,CanChangePublicChangeClaims:8192,CanChangeEveryoneReadClaims:16384,CanChangeEveryoneChangeClaims:32768,CanAddThingUserRights:64,CanDeleteThingUserRights:128,CanChangeThingUserRole:256,CanChangeThingUserStatus:512,CanChangeThingUserVisibility:524288,CanChangeThingUserReadClaims:1024,CanChangeThingUserChangeClaims:2048,CanAddChildrenThing:65536,CanRemoveChildrenThing:131072,CanOtherUsersChangeMyThingPos:262144};function h(e){return e<=f.AllClaims&&e>=f.NoClaims}f.AllClaims=f.CanDeleteThing|f.CanChangeName|f.CanChangeDescription|f.CanChangeKind|f.CanChangeValue|f.CanChangeDeletedStatus|f.CanAddThingUserRights|f.CanDeleteThingUserRights|f.CanChangeThingUserRole|f.CanChangeThingUserVisibility|f.CanChangeThingUserStatus|f.CanChangeThingUserReadClaims|f.CanChangeThingUserChangeClaims|f.CanChangePublicReadClaims|f.CanChangePublicChangeClaims|f.CanChangeEveryoneReadClaims|f.CanChangeEveryoneChangeClaims|f.CanAddChildrenThing|f.CanRemoveChildrenThing;const d={NoMatter:"0",genericId:"1",genericTxt:"the bees are laborious"},g=Number.MAX_SAFE_INTEGER,m={UserAlreadyRegistered:1,ConfirmPendingEmailSent:2};class b{constructor(e,t,r){this.email=e,this.confirmationToken=t,this.status=r}}class v{constructor(e){this.value=e.email,this.isConfimed=e.isConfimed}}class S{constructor(e,t){this.id=e._id,this.name=e.name,t&&(this.emails=[],this.username=e.userName,e.emails.foreach((e=>this.emails.push(new v(e)))),this.masterApiKey=e.masterApiKey)}}class C{constructor(){this.id="",this.name="the bees are laborious"}}class A{constructor(){this.id="",this.creationDate=null,this.name="",this.kind=d.genericId,this.pos=0,this.deletedStatus=t.NoMatter,this.deletedDate=null,this.publicReadClaims=u.NoClaims,this.publicChangeClaims=f.NoClaims,this.everyoneReadClaims=u.NoClaims,this.everyoneChangeClaims=f.NoClaims,this.value={},this.userStatus=s.NoMatter,this.userRole=n.NoMatter,this.userVisibility=l.NoMatter,this.userReadClaims=u.NoClaims,this.userChangeClaims=f.NoClaims,this.usersInfos=[]}}var w,P=o(376),T=o.n(P),O=o(469);!function(e){e[e.Connecting=0]="Connecting",e[e.Connected=1]="Connected",e[e.Reconnecting=2]="Reconnecting",e[e.Disconnected=4]="Disconnected"}(w||(w={}));class j{constructor(e,t,r,n,o){this.connectionStatus=4,this.url="",this.authHook=null,this.errorHook=null,this.stateChangedHook=null,this.connectErrorHook=null,this.url=e,this.authHook=t,this.errorHook=r,this.connectErrorHook=n,this.stateChangedHook=o}on_connectionStatusChange(e){this.connectionStatus!=e&&(this.connectionStatus=e,this.stateChangedHook&&this.stateChangedHook(e))}subscribe(){}unsubscribe(){}setHook(e,t){}remHook(e,t){}async api(){return await T().get(this.url+"/api")}}class k extends j{constructor(e,t,r,n,o){super(e,t,r,n,o),this.socket=null}on_error(e){this.errorHook&&this.errorHook(e)}on_connect_error(e){this.connectErrorHook&&this.connectErrorHook(e)}on_connect(){this.on_connectionStatusChange&&this.on_connectionStatusChange(1)}on_disconnect(e){this.on_connectionStatusChange&&this.on_connectionStatusChange(4)}subscribe(){if(this.socket)return;let e=this.url;this.authHook&&(e+="?"+this.authHook()),this.socket=(0,O.io)(e),this.socket.on("error",(e=>this.on_error(e))),this.socket.on("connect_error",(e=>this.on_connect_error(e))),this.socket.on("connect",(()=>this.on_connect())),this.socket.on("disconnect",(e=>this.on_disconnect(e)))}unsubscribe(){this.socket&&(this.socket.disconnect(),this.socket=null)}setHook(e,t){this.socket&&this.socket.on(e,t)}remHook(e,t){this.socket&&this.socket.off(e,t)}}class I{constructor(){this.cancelerToken=void 0,this.executor=null,this.reset()}cancel(){this.executor&&this.executor()}reset(){this.executor=null,this.cancelerToken=new(T().CancelToken)((e=>{this.executor=e}))}}class x{static getRangeItemsFromResponse(e){var t=e.headers["content-range"],r=0,n=0,o=0;if(t){var i=t.split("/");if(0!=i.length){var a=i[0].split(" ");if(2==a.length){var s=a[1].split("-");2==s.length&&(r=parseInt(s[0]),n=parseInt(s[1]))}2==i.length&&(o=parseInt(i[1]))}}return{top:r,skip:n,totalItems:o}}}var E=o(129);function R(e){this.message=e}R.prototype=new Error,R.prototype.name="InvalidCharacterError";var U="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new R("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,o=0,i=0,a="";n=t.charAt(i++);~n&&(r=o%4?64*r+n:n,o++%4)?a+=String.fromCharCode(255&r>>(-2*o&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return a};function N(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(U(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return U(t)}}function _(e){this.message=e}_.prototype=new Error,_.prototype.name="InvalidTokenError";const D=function(e,t){if("string"!=typeof e)throw new _("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(N(e.split(".")[r]))}catch(e){throw new _("Invalid token specified: "+e.message)}};class F{constructor(e,t){this.accountUrl="",this.accountUrl=e.api+"/account",T().interceptors.request.use((async e=>{if(!t)return e;if(!t.isLoggedIn())return e;if(!t.isAccessTokenExpired())return e.headers={...e.headers,...t.getSecurityHeader()},e;try{return await t.refreshToken(),e.headers={...e.headers,...t.getSecurityHeader()},e}catch(e){throw t.resetApp(),e}}),(function(e){return Promise.reject(e)}))}async login({username:e,password:t}){const r={username:e,password:t},n=await T().post(this.accountUrl+"/login",E.stringify(r),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}),o=D(n.data.access_token);return{accessToken:n.data.access_token,id:o.sub,name:o.name,exp:o.exp,iat:o.iat}}async loginBasic({username:e,password:t}){return(await T().post(this.accountUrl+"/login","grant_type=client_credentials",{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa(e+":"+t)}})).data}async logout(){return(await T().get(this.accountUrl+"/logout")).data}}class M{constructor(e,t,r,n){this._appName=null,this._accessToken=null,this._userId=null,this._userName=null,this.deltaTime=0,this._apiKey=null,this.defaultAccountActionControl={isLoggedIn:()=>null!==this.getSecurityHeader(),isAccessTokenExpired:()=>this.isAccessTokenExpired,getSecurityHeader:()=>this.getSecurityHeader(),refreshToken:()=>Promise.reject(),resetApp:()=>console.log("resetApp")},this.getSecurityHeader=()=>this.apiKey?{thapikey:this.apiKey}:this.accessToken?{Authorization:"Bearer "+this.accessToken}:null,this.getSecurityToken=()=>this.apiKey?"token="+this.apiKey:this.accessToken?"token="+this.accessToken:null,this._appName=e;let o=n||this.defaultAccountActionControl;this.accountDataContext=new F(t,o),this.getLoginData(r),this.apiKey||this.accessToken&&this.isAccessTokenExpired&&this.resetLoginData()}resetLoginData(){this._accessToken=null,this._userId=null,this._userName=null,"undefined"!=typeof localStorage&&(localStorage.removeItem(this._appName+"_Remember"),localStorage.removeItem(this._appName+"_AccessToken"),sessionStorage.removeItem(this._appName+"_AccessToken"),localStorage.removeItem(this._appName+"_DeltaTime"),sessionStorage.removeItem(this._appName+"_DeltaTime"),localStorage.removeItem(this._appName+"_UserId"),sessionStorage.removeItem(this._appName+"_UserId"),localStorage.removeItem(this._appName+"_Username"),sessionStorage.removeItem(this._appName+"_Username"))}setLoginData(e,t){this._apiKey=null,this._accessToken=e.accessToken,this._userId=e.id,this._userName=e.name,this.deltaTime=Math.floor(Date.now()/1e3)-e.iat,"undefined"!=typeof localStorage&&(sessionStorage.setItem(this._appName+"_AccessToken",this._accessToken),sessionStorage.setItem(this._appName+"_UserId",this._userId),sessionStorage.setItem(this._appName+"_Username",this._userName),sessionStorage.setItem(this._appName+"_DeltaTime",this.deltaTime.toString()),localStorage.setItem(this._appName+"_Remember",1==t?"true":"false"),0!=t&&(localStorage.setItem(this._appName+"_AccessToken",this._accessToken),localStorage.setItem(this._appName+"_UserId",this._userId),localStorage.setItem(this._appName+"_Username",this._userName),localStorage.setItem(this._appName+"_DeltaTime",this.deltaTime.toString())))}getLoginData(e){if(e)return this.resetLoginData(),void(this._apiKey=e);if("undefined"==typeof localStorage)return;this._apiKey=null,this._accessToken=sessionStorage.getItem(this._appName+"_AccessToken"),this._userId=sessionStorage.getItem(this._appName+"_UserId"),this._userName=sessionStorage.getItem(this._appName+"_Username");let t=sessionStorage.getItem(this._appName+"_DeltaTime");this.deltaTime=t?parseInt(t):0,0!=this.remember&&(this._accessToken=localStorage.getItem(this._appName+"_AccessToken"),this._userId=localStorage.getItem(this._appName+"_UserId"),this._userName=localStorage.getItem(this._appName+"_Username"),t=localStorage.getItem(this._appName+"_DeltaTime"),this.deltaTime=t?parseInt(t):0)}get apiKey(){return this._apiKey}get accessToken(){return this._accessToken}get isAccessTokenExpired(){return!this.apiKey&&(!this.accessToken||D(this.accessToken).exp+this.deltaTime<Math.floor(Date.now()/1e3))}get isLoggedIn(){return!!this.apiKey||!!this.accessToken&&!this.isAccessTokenExpired}get remember(){return"undefined"!=typeof localStorage&&"true"==localStorage.getItem(this._appName+"_Remember")}async login(e,t,r){this._apiKey=null,this.resetLoginData();const n=await this.accountDataContext.login({username:e,password:t});return this.setLoginData(n,r),n}async logout(){try{return await this.accountDataContext.logout()}catch(e){throw e}finally{this._apiKey=null,this.resetLoginData()}}}class B{constructor(e){this.childrenSkip=0,this.childrenTotalItems=Number.MAX_SAFE_INTEGER,this.children=[],this.id="",this.creationDateTime=null,this.name="",this.kind="",this.pos=0,this.deletedStatus=0,this.deletedDateTime=null,this.publicReadClaims=0,this.publicChangeClaims=0,this.everyoneReadClaims=0,this.everyoneChangeClaims=0,this.userStatus=0,this.userRole=0,this.userVisibility=0,this.userReadClaims=0,this.userChangeClaims=0,this.usersInfos=[],this.value={},e&&(Object.assign(this,e),e.value&&(this.value=e.value))}addThingChild(e){this.children.unshift(new B(e))}collapse(){this.childrenSkip=0,this.children.splice(0,this.children.length)}shallowCopy(){let e=new B;return Object.assign(e,this),e}}class V{constructor(e){this.apiEndPointAddress="",this.apiEndPointAddress=e.api}thingsUrl(e){return this.apiEndPointAddress+"/things/"+(e||"")}thingsValueUrl(e){return this.apiEndPointAddress+"/things/"+e+"/value"}thingsCmdUrl(e){return this.apiEndPointAddress+"/things/"+e+"/cmd"}thingsPositionsUrl(){return this.apiEndPointAddress+"/things/positions"}thingChildrenUrl(e,t){return this.apiEndPointAddress+"/things/"+e+"/childrenIds/"+(t||"")}thingDeleteChildUrl(e,t){return this.apiEndPointAddress+"/things/"+e+"/childrenIds/"+t}async getThing(e){return(await T().get(this.thingsUrl(e))).data}getThings(e,t){var r=this.thingsUrl()+"?"+(e.parentThingId?"&parentThingId="+e.parentThingId:"")+(e.thingFilter?"&thingFilter="+JSON.stringify(e.thingFilter):"")+(e.valueFilter?"&valueFilter="+JSON.stringify(e.valueFilter):"")+(e.orderBy?"&orderBy="+e.orderBy:"")+(e.skip?"&skip="+e.skip:"")+(e.top?"&top="+e.top:"");return T().get(r,{cancelToken:t?t.cancelerToken:void 0}).then((function(e){return{things:e.data,itemsRange:x.getRangeItemsFromResponse(e)}})).catch((function(e){throw T().isCancel(e)&&console.log("Request canceled",e.message),e})).finally((function(){}))}async createThing(e){return(await T().post(this.thingsUrl(),e)).data}async updateThing(e,t){return(await T().put(this.thingsUrl(e),t)).data}async deleteThing(e){return(await T().delete(this.thingsUrl(e))).data}async getThingChildrenIds(e){return(await T().get(this.thingChildrenUrl(e))).data}async addChildToParent(e,t){return(await T().post(this.thingChildrenUrl(e),JSON.stringify(t))).data}async deleteThingChild(e,t){return(await T().delete(this.thingDeleteChildUrl(e,t))).data}async getThingValue(e){return(await T().get(this.thingsValueUrl(e))).data}async putThingValue(e,t,r){let n=t?this.thingsCmdUrl(e):this.thingsValueUrl(e);return(await T().put(n,r)).data}async putThingsPositions(e){return(await T().put(this.thingsPositionsUrl(),e)).data}}class H{constructor(e,t,r,n,o){this.mainThing=e,this.thingKind=t,this.thingClaims=r,this.thingsDataContext=n,this.realtimeConnector=o,this.onCreateThing=e=>{e.kind!==this.thingKind||this.mainThing.addThingChild(e)},this.onUpdateThingValue=(e,t,r)=>{let n=this.searchThingById(e);n&&(r||(n.value=t))},this.getThingsParams={parentThingId:null,thingFilter:{$and:[{kind:this.thingKind},{deletedStatus:1}]},top:10,skip:0,orderBy:null,valueFilter:null},this.getChindrenThingsParams={parentThingId:null,thingFilter:{deletedStatus:1},top:10,skip:0,orderBy:null,valueFilter:null}}reset(){this.mainThing.children.splice(0,this.mainThing.children.length),this.mainThing.childrenSkip=0,this.mainThing.childrenTotalItems=Number.MAX_SAFE_INTEGER,this.mainThing.usersInfos.splice(0,this.mainThing.usersInfos.length)}init(){this.realtimeConnector.setHook("onCreateThing",this.onCreateThing),this.realtimeConnector.setHook("onUpdateThingValue",this.onUpdateThingValue)}done(){this.realtimeConnector.remHook("onUpdateThingValue",this.onUpdateThingValue),this.realtimeConnector.remHook("onCreateThing",this.onCreateThing)}searchThingById(e){return this.mainThing.children.find((t=>t.id===e))}async getThings(e,t){let r,n=[];try{r=await this.thingsDataContext.getThings(e,t);for(let e=0;e<r.things.length;e++){var o=new B(r.things[e]);n.push(o)}}catch(e){throw e}return{things:n,itemsRange:r.itemsRange}}async getMoreThingChildren(e,t,r){t.skip=e.childrenSkip,t.parentThingId=e.id;const n=await this.getThings(t,r);e.childrenTotalItems=n.itemsRange.totalItems,e.childrenSkip=e.childrenSkip+t.top,e.childrenSkip>e.childrenTotalItems&&(e.childrenSkip=e.childrenTotalItems);for(var o=0;o<n.things.length;o++)e.children.push(n.things[o]);return n}async getMoreThings(e){let t=this;var r=await this.getMoreThingChildren(this.mainThing,this.getThingsParams,e);let n=[];for(let o=0;o<r.things.length;o++)n.push(t.getMoreThingChildren(r.things[o],t.getChindrenThingsParams,e));return Promise.all(n)}getThingsTotalItems(){return this.mainThing.childrenTotalItems}async getThing(e){const t=await this.thingsDataContext.getThing(e);return new B(t)}async putThingValue(e,t,r){return await this.thingsDataContext.putThingValue(e,t,r)}}class W{constructor(e,t){this.endPointAddress={server:"https://api.thingshub.org:3000",api:"https://api.thingshub.org:3000/api"},this.thingsManagerClaims={publicReadClaims:0,publicChangeClaims:0,everyoneReadClaims:0,everyoneChangeClaims:0,creatorUserReadClaims:65535,creatorUserChangeClaims:1048575},this.onError=e=>console.log(e),this.onConnectError=e=>console.log(e),this.onStateChanged=e=>console.log(e),this.endPointAddress.server=e+":3000",this.endPointAddress.api=e+":3000/api",this.accountManager=new M("thingshub",this.endPointAddress,t),this.realTimeConnector=new k(this.endPointAddress.server,this.accountManager.getSecurityToken,this.onError,this.onConnectError,this.onStateChanged),this.realTimeConnector.subscribe(),this.mainThing=new B,this.thingsDatacontext=new V(this.endPointAddress),this.thingsManager=new H(this.mainThing,"first thing",this.thingsManagerClaims,this.thingsDatacontext,this.realTimeConnector),this.httpRequestCanceler=new I}on(e,t){return this.realTimeConnector.setHook(e,t),this}get(){return this.thingsManager.getMoreThings(this.httpRequestCanceler).then(),this}}const L=(e,t)=>new W(e,t);(0,e.shim)()})(),i})()}));
//# sourceMappingURL=thingshub.js.map