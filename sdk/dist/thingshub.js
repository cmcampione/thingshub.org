!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("axios"),require("socket.io-client")):"function"==typeof define&&define.amd?define(["axios","socket.io-client"],t):"object"==typeof exports?exports.thingshub=t(require("axios"),require("socket.io-client")):e.thingshub=t(e.axios,e.io)}(this,(function(e,t){return(()=>{"use strict";var r={136:(e,t,r)=>{const n=r(745);t.RegisterByOnlyEmailStatus={UserAlreadyRegistered:1,ConfirmPendingEmailSent:2},t.RegisterByOnlyEmailDTO=class{constructor(e,t,r){this.email=e,this.confirmationToken=t,this.status=r}};class o{constructor(e){this.value=e.email,this.isConfimed=e.isConfimed}}t.EmailDTO=o,t.UserDTO=class{constructor(e,t){this.id=e._id,this.name=e.name,t&&(this.emails=[],this.username=e.userName,e.emails.foreach((e=>this.emails.push(new o(e)))),this.masterApiKey=e.masterApiKey)}},t.UserInfoDTO=class{constructor(){this.id="",this.name="the bees are laborious"}},t.ThingDTO=class{constructor(){this.id="",this.creationDate=null,this.name="",this.kind=n.ThingKind.genericId,this.pos=0,this.deletedStatus=n.ThingDeletedStates.NoMatter,this.deletedDate=null,this.publicReadClaims=n.ThingUserReadClaims.NoClaims,this.publicChangeClaims=n.ThingUserChangeClaims.NoClaims,this.everyoneReadClaims=n.ThingUserReadClaims.NoClaims,this.everyoneChangeClaims=n.ThingUserChangeClaims.NoClaims,this.value={},this.userStatus=n.ThingUserStates.NoMatter,this.userRole=n.ThingUserRoles.NoMatter,this.userVisibility=n.ThingUserVisibility.NoMatter,this.userReadClaims=n.ThingUserReadClaims.NoClaims,this.userChangeClaims=n.ThingUserChangeClaims.NoClaims,this.usersInfos=[]}}},745:(e,t)=>{const r={NoMatter:0,Ok:1,Deleted:2};t.ThingDeletedStates=r,t.validateThingDeletedStatus=function(e){switch(e){case r.NoMatter:case r.Ok:case r.Deleted:return!0}return!1};const n={NoMatter:0,Administrator:1,User:2};t.ThingUserRoles=n,t.validateThingUserRoles=function(e){switch(e){case n.NoMatter:case n.Administrator:case n.User:return!0}return!1};const o={NoMatter:0,Ok:1,WaitForAuth:2,Deleted:4};t.ThingUserStates=o,t.validateThingUserStatus=function(e){switch(e){case o.NoMatter:case o.Ok:case o.WaitForAuth:case o.Deleted:return!0}return!1};const i={NoMatter:0,Visible:1,Hidden:2};t.ThingUserVisibility=i,t.validateThingUserVisibility=function(e){switch(e){case i.NoMatter:case i.Visible:case i.Hidden:return!0}return!1};const a={NoClaims:0,CanReadCreationDate:2,CanReadName:4,CanReadDescription:8,CanReadKind:16,CanReadValue:32,CanReadDeletedStatus:64,CanReadPublicReadClaims:2048,CanReadPublicChangeClaims:4096,CanReadEveryoneReadClaims:8192,CanReadEveryoneChangeClaims:16384,CanReadThingUserRights:128,CanReadThingUserRole:256,CanReadThingUserStatus:512,CanReadThingUserVisibility:32768,CanReadThingUserReadClaims:1024,CanReadThingUserChangeClaims:1};a.AllClaims=a.CanReadThingUserChangeClaims|a.CanReadCreationDate|a.CanReadName|a.CanReadDescription|a.CanReadKind|a.CanReadValue|a.CanReadDeletedStatus|a.CanReadThingUserRights|a.CanReadThingUserRole|a.CanReadThingUserVisibility|a.CanReadThingUserStatus|a.CanReadThingUserReadClaims|a.CanReadPublicReadClaims|a.CanReadPublicChangeClaims|a.CanReadEveryoneReadClaims|a.CanReadEveryoneChangeClaims,t.ThingUserReadClaims=a,t.validateThingUserReadClaims=e=>e<=a.AllClaims&&e>=a.NoClaims;const s={NoClaims:0,CanDeleteThing:1,CanChangeName:2,CanChangeDescription:4,CanChangeKind:8,CanChangeValue:16,CanChangeDeletedStatus:32,CanChangePublicReadClaims:4096,CanChangePublicChangeClaims:8192,CanChangeEveryoneReadClaims:16384,CanChangeEveryoneChangeClaims:32768,CanAddThingUserRights:64,CanDeleteThingUserRights:128,CanChangeThingUserRole:256,CanChangeThingUserStatus:512,CanChangeThingUserVisibility:524288,CanChangeThingUserReadClaims:1024,CanChangeThingUserChangeClaims:2048,CanAddChildrenThing:65536,CanRemoveChildrenThing:131072,CanOtherUsersChangeMyThingPos:262144};s.AllClaims=s.CanDeleteThing|s.CanChangeName|s.CanChangeDescription|s.CanChangeKind|s.CanChangeValue|s.CanChangeDeletedStatus|s.CanAddThingUserRights|s.CanDeleteThingUserRights|s.CanChangeThingUserRole|s.CanChangeThingUserVisibility|s.CanChangeThingUserStatus|s.CanChangeThingUserReadClaims|s.CanChangeThingUserChangeClaims|s.CanChangePublicReadClaims|s.CanChangePublicChangeClaims|s.CanChangeEveryoneReadClaims|s.CanChangeEveryoneChangeClaims|s.CanAddChildrenThing|s.CanRemoveChildrenThing,t.ThingUserChangeClaims=s,t.validateThingUserChangeClaims=e=>e<=s.AllClaims&&e>=s.NoClaims,t.ThingKind={NoMatter:"0",genericId:"1",genericTxt:"the bees are laborious"};const l=Number.MAX_SAFE_INTEGER;t.DefaultThingPos=l},289:(e,t,r)=>{var n=r(215),o="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),i=Object.prototype.toString,a=Array.prototype.concat,s=Object.defineProperty,l=s&&function(){var e={};try{for(var t in s(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}(),c=function(e,t,r,n){var o;(!(t in e)||"function"==typeof(o=n)&&"[object Function]"===i.call(o)&&n())&&(l?s(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r)},u=function(e,t){var r=arguments.length>2?arguments[2]:{},i=n(t);o&&(i=a.call(i,Object.getOwnPropertySymbols(t)));for(var s=0;s<i.length;s+=1)c(e,i[s],t[i[s]],r[i[s]])};u.supportsDescriptors=!!l,e.exports=u},763:(e,t,r)=>{e.exports=r(320)},522:e=>{e.exports=function(e){return"function"==typeof e&&!!e.prototype}},776:(e,t,r)=>{var n=r(769),o=n("%Symbol.species%",!0),i=n("%TypeError%"),a=r(522),s=r(100);e.exports=function(e,t){if("Object"!==s(e))throw new i("Assertion failed: Type(O) is not Object");var r=e.constructor;if(void 0===r)return t;if("Object"!==s(r))throw new i("O.constructor is not an Object");var n=o?r[o]:void 0;if(null==n)return t;if(a(n))return n;throw new i("no constructor found")}},100:(e,t,r)=>{var n=r(276);e.exports=function(e){return"symbol"==typeof e?"Symbol":n(e)}},276:e=>{e.exports=function(e){return null===e?"Null":void 0===e?"Undefined":"function"==typeof e||"object"==typeof e?"Object":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"string"==typeof e?"String":void 0}},769:(e,t,r)=>{var n,o=TypeError,i=Object.getOwnPropertyDescriptor;if(i)try{i({},"")}catch(e){i=null}var a=function(){throw new o},s=i?function(){try{return a}catch(e){try{return i(arguments,"callee").get}catch(e){return a}}}():a,l=r(405)(),c=Object.getPrototypeOf||function(e){return e.__proto__},u=n,h="undefined"==typeof Uint8Array?n:c(Uint8Array),p={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":l?c([][Symbol.iterator]()):n,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":undefined,"%AsyncFunctionPrototype%":n,"%AsyncGenerator%":n,"%AsyncGeneratorFunction%":undefined,"%AsyncGeneratorPrototype%":n,"%AsyncIteratorPrototype%":u&&l&&Symbol.asyncIterator?u[Symbol.asyncIterator]():n,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?n:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?n:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?n:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?n:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":n,"%GeneratorFunction%":undefined,"%GeneratorPrototype%":n,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?n:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?n:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?n:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":l?c(c([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%JSONParse%":"object"==typeof JSON?JSON.parse:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&l?c((new Map)[Symbol.iterator]()):n,"%MapPrototype%":"undefined"==typeof Map?n:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%PromisePrototype%":"undefined"==typeof Promise?n:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?n:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?n:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?n:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?n:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&l?c((new Set)[Symbol.iterator]()):n,"%SetPrototype%":"undefined"==typeof Set?n:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":l?c(""[Symbol.iterator]()):n,"%StringPrototype%":String.prototype,"%Symbol%":l?Symbol:n,"%SymbolPrototype%":l?Symbol.prototype:n,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":s,"%TypedArray%":h,"%TypedArrayPrototype%":h?h.prototype:n,"%TypeError%":o,"%TypeErrorPrototype%":o.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?n:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?n:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?n:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?n:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?n:WeakSet.prototype},d=r(612).call(Function.call,String.prototype.replace),f=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,y=/\\(\\)?/g,g=function(e){var t=[];return d(e,f,(function(e,r,n,o){t[t.length]=n?d(o,y,"$1"):r||e})),t},m=function(e,t){if(!(e in p))throw new SyntaxError("intrinsic "+e+" does not exist!");if(void 0===p[e]&&!t)throw new o("intrinsic "+e+" exists, but is not available. Please file an issue!");return p[e]};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new TypeError('"allowMissing" argument must be a boolean');for(var r=g(e),n=m("%"+(r.length>0?r[0]:"")+"%",t),o=1;o<r.length;o+=1)if(null!=n)if(i&&o+1>=r.length){var a=i(n,r[o]);n=a?a.get||a.value:n[r[o]]}else n=n[r[o]];return n}},648:e=>{var t="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,n=Object.prototype.toString,o="[object Function]";e.exports=function(e){var i=this;if("function"!=typeof i||n.call(i)!==o)throw new TypeError(t+i);for(var a,s=r.call(arguments,1),l=function(){if(this instanceof a){var t=i.apply(this,s.concat(r.call(arguments)));return Object(t)===t?t:this}return i.apply(e,s.concat(r.call(arguments)))},c=Math.max(0,i.length-s.length),u=[],h=0;h<c;h++)u.push("$"+h);if(a=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(l),i.prototype){var p=function(){};p.prototype=i.prototype,a.prototype=new p,p.prototype=null}return a}},612:(e,t,r)=>{var n=r(648);e.exports=Function.prototype.bind||n},405:(e,t,r)=>{var n=r.g.Symbol,o=r(419);e.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&o()}},419:e=>{e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},320:e=>{var t=Function.prototype.toString,r=/^\s*class\b/,n=function(e){try{var n=t.call(e);return r.test(n)}catch(e){return!1}},o=Object.prototype.toString,i="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(i)return function(e){try{return!n(e)&&(t.call(e),!0)}catch(e){return!1}}(e);if(n(e))return!1;var r=o.call(e);return"[object Function]"===r||"[object GeneratorFunction]"===r}},245:(e,t,r)=>{function n(e){this.message=e}r.r(t),r.d(t,{default:()=>s,InvalidTokenError:()=>a}),n.prototype=new Error,n.prototype.name="InvalidCharacterError";var o="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,o,i=0,a=0,s="";o=t.charAt(a++);~o&&(r=i%4?64*r+o:o,i++%4)?s+=String.fromCharCode(255&r>>(-2*i&6)):0)o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(o);return s};function i(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(o(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return o(t)}}function a(e){this.message=e}a.prototype=new Error,a.prototype.name="InvalidTokenError";const s=function(e,t){if("string"!=typeof e)throw new a("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(i(e.split(".")[r]))}catch(e){throw new a("Invalid token specified: "+e.message)}}},987:(e,t,r)=>{var n;if(!Object.keys){var o=Object.prototype.hasOwnProperty,i=Object.prototype.toString,a=r(414),s=Object.prototype.propertyIsEnumerable,l=!s.call({toString:null},"toString"),c=s.call((function(){}),"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(e){var t=e.constructor;return t&&t.prototype===e},p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},d=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!p["$"+e]&&o.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{h(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();n=function(e){var t=null!==e&&"object"==typeof e,r="[object Function]"===i.call(e),n=a(e),s=t&&"[object String]"===i.call(e),p=[];if(!t&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var f=c&&r;if(s&&e.length>0&&!o.call(e,0))for(var y=0;y<e.length;++y)p.push(String(y));if(n&&e.length>0)for(var g=0;g<e.length;++g)p.push(String(g));else for(var m in e)f&&"prototype"===m||!o.call(e,m)||p.push(String(m));if(l)for(var b=function(e){if("undefined"==typeof window||!d)return h(e);try{return h(e)}catch(e){return!1}}(e),C=0;C<u.length;++C)b&&"constructor"===u[C]||!o.call(e,u[C])||p.push(u[C]);return p}}e.exports=n},215:(e,t,r)=>{var n=Array.prototype.slice,o=r(414),i=Object.keys,a=i?function(e){return i(e)}:r(987),s=Object.keys;a.shim=function(){return Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return o(e)?s(n.call(e)):s(e)}):Object.keys=a,Object.keys||a},e.exports=a},414:e=>{var t=Object.prototype.toString;e.exports=function(e){var r=t.call(e),n="[object Arguments]"===r;return n||(n="[object Array]"!==r&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),n}},385:(e,t,r)=>{r(971)();var n=r(763),o=r(776),i=r(100),a=function(e,t){return new e((function(e){e(t)}))},s=Promise,l=function(e){var t=this;if("Object"!==i(t))throw new TypeError("receiver is not an Object");var r=o(t,s),l=e,c=e;return n(e)&&(l=function(e,t){return function(r){var n=t();return a(e,n).then((function(){return r}))}}(r,e),c=function(e,t){return function(r){var n=t();return a(e,n).then((function(){throw r}))}}(r,e)),t.then(l,c)};if(Object.getOwnPropertyDescriptor){var c=Object.getOwnPropertyDescriptor(l,"name");c&&c.configurable&&Object.defineProperty(l,"name",{configurable:!0,value:"finally"})}e.exports=l},628:(e,t,r)=>{var n=r(612),o=r(289),i=r(385),a=r(76),s=r(547),l=n.call(Function.call,a());o(l,{getPolyfill:a,implementation:i,shim:s}),e.exports=l},76:(e,t,r)=>{var n=r(971),o=r(385);e.exports=function(){return n(),"function"==typeof Promise.prototype.finally?Promise.prototype.finally:o}},971:e=>{e.exports=function(){if("function"!=typeof Promise)throw new TypeError("`Promise.prototype.finally` requires a global `Promise` be available.")}},547:(e,t,r)=>{var n=r(971),o=r(76),i=r(289);e.exports=function(){n();var e=o();return i(Promise.prototype,{finally:e},{finally:function(){return Promise.prototype.finally!==e}}),e}},798:(e,t,r)=>{var n=String.prototype.replace,o=/%20/g,i=r(896),a={RFC1738:"RFC1738",RFC3986:"RFC3986"};e.exports=i.assign({default:a.RFC3986,formatters:{RFC1738:function(e){return n.call(e,o,"+")},RFC3986:function(e){return String(e)}}},a)},129:(e,t,r)=>{var n=r(261),o=r(235),i=r(798);e.exports={formats:i,parse:o,stringify:n}},235:(e,t,r)=>{var n=r(896),o=Object.prototype.hasOwnProperty,i=Array.isArray,a={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},l=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},c=function(e,t,r,n){if(e){var i=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,s=r.depth>0&&/(\[[^[\]]*])/.exec(i),c=s?i.slice(0,s.index):i,u=[];if(c){if(!r.plainObjects&&o.call(Object.prototype,c)&&!r.allowPrototypes)return;u.push(c)}for(var h=0;r.depth>0&&null!==(s=a.exec(i))&&h<r.depth;){if(h+=1,!r.plainObjects&&o.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(s[1])}return s&&u.push("["+i.slice(s.index)+"]"),function(e,t,r,n){for(var o=n?t:l(t,r),i=e.length-1;i>=0;--i){var a,s=e[i];if("[]"===s&&r.parseArrays)a=[].concat(o);else{a=r.plainObjects?Object.create(null):{};var c="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,u=parseInt(c,10);r.parseArrays||""!==c?!isNaN(u)&&s!==c&&String(u)===c&&u>=0&&r.parseArrays&&u<=r.arrayLimit?(a=[])[u]=o:a[c]=o:a={0:o}}o=a}return o}(u,t,r,n)}};e.exports=function(e,t){var r=function(e){if(!e)return a;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?a.charset:e.charset;return{allowDots:void 0===e.allowDots?a.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:a.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:a.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:a.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:a.comma,decoder:"function"==typeof e.decoder?e.decoder:a.decoder,delimiter:"string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:a.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:a.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:a.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:a.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:a.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var u="string"==typeof e?function(e,t){var r,c={},u=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,h=t.parameterLimit===1/0?void 0:t.parameterLimit,p=u.split(t.delimiter,h),d=-1,f=t.charset;if(t.charsetSentinel)for(r=0;r<p.length;++r)0===p[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===p[r]?f="utf-8":"utf8=%26%2310003%3B"===p[r]&&(f="iso-8859-1"),d=r,r=p.length);for(r=0;r<p.length;++r)if(r!==d){var y,g,m=p[r],b=m.indexOf("]="),C=-1===b?m.indexOf("="):b+1;-1===C?(y=t.decoder(m,a.decoder,f,"key"),g=t.strictNullHandling?null:""):(y=t.decoder(m.slice(0,C),a.decoder,f,"key"),g=n.maybeMap(l(m.slice(C+1),t),(function(e){return t.decoder(e,a.decoder,f,"value")}))),g&&t.interpretNumericEntities&&"iso-8859-1"===f&&(g=s(g)),m.indexOf("[]=")>-1&&(g=i(g)?[g]:g),o.call(c,y)?c[y]=n.combine(c[y],g):c[y]=g}return c}(e,r):e,h=r.plainObjects?Object.create(null):{},p=Object.keys(u),d=0;d<p.length;++d){var f=p[d],y=c(f,u[f],r,"string"==typeof e);h=n.merge(h,y,r)}return n.compact(h)}},261:(e,t,r)=>{var n=r(896),o=r(798),i=Object.prototype.hasOwnProperty,a={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},s=Array.isArray,l=Array.prototype.push,c=function(e,t){l.apply(e,s(t)?t:[t])},u=Date.prototype.toISOString,h=o.default,p={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,format:h,formatter:o.formatters[h],indices:!1,serializeDate:function(e){return u.call(e)},skipNulls:!1,strictNullHandling:!1},d=function e(t,r,o,i,a,l,u,h,d,f,y,g,m){var b,C=t;if("function"==typeof u?C=u(r,C):C instanceof Date?C=f(C):"comma"===o&&s(C)&&(C=n.maybeMap(C,(function(e){return e instanceof Date?f(e):e})).join(",")),null===C){if(i)return l&&!g?l(r,p.encoder,m,"key"):r;C=""}if("string"==typeof(b=C)||"number"==typeof b||"boolean"==typeof b||"symbol"==typeof b||"bigint"==typeof b||n.isBuffer(C))return l?[y(g?r:l(r,p.encoder,m,"key"))+"="+y(l(C,p.encoder,m,"value"))]:[y(r)+"="+y(String(C))];var v,T=[];if(void 0===C)return T;if(s(u))v=u;else{var S=Object.keys(C);v=h?S.sort(h):S}for(var k=0;k<v.length;++k){var w=v[k],P=C[w];if(!a||null!==P){var A=s(C)?"function"==typeof o?o(r,w):r:r+(d?"."+w:"["+w+"]");c(T,e(P,A,o,i,a,l,u,h,d,f,y,g,m))}}return T};e.exports=function(e,t){var r,n=e,l=function(e){if(!e)return p;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||p.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=o.default;if(void 0!==e.format){if(!i.call(o.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=o.formatters[r],a=p.filter;return("function"==typeof e.filter||s(e.filter))&&(a=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:p.addQueryPrefix,allowDots:void 0===e.allowDots?p.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:p.charsetSentinel,delimiter:void 0===e.delimiter?p.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:p.encode,encoder:"function"==typeof e.encoder?e.encoder:p.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:p.encodeValuesOnly,filter:a,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:p.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:p.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:p.strictNullHandling}}(t);"function"==typeof l.filter?n=(0,l.filter)("",n):s(l.filter)&&(r=l.filter);var u,h=[];if("object"!=typeof n||null===n)return"";u=t&&t.arrayFormat in a?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var f=a[u];r||(r=Object.keys(n)),l.sort&&r.sort(l.sort);for(var y=0;y<r.length;++y){var g=r[y];l.skipNulls&&null===n[g]||c(h,d(n[g],g,f,l.strictNullHandling,l.skipNulls,l.encode?l.encoder:null,l.filter,l.sort,l.allowDots,l.serializeDate,l.formatter,l.encodeValuesOnly,l.charset))}var m=h.join(l.delimiter),b=!0===l.addQueryPrefix?"?":"";return l.charsetSentinel&&("iso-8859-1"===l.charset?b+="utf8=%26%2310003%3B&":b+="utf8=%E2%9C%93&"),m.length>0?b+m:""}},896:e=>{var t=Object.prototype.hasOwnProperty,r=Array.isArray,n=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r};e.exports={arrayToObject:o,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],o=0;o<t.length;++o)for(var i=t[o],a=i.obj[i.prop],s=Object.keys(a),l=0;l<s.length;++l){var c=s[l],u=a[c];"object"==typeof u&&null!==u&&-1===n.indexOf(u)&&(t.push({obj:a,prop:c}),n.push(u))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(r(n)){for(var o=[],i=0;i<n.length;++i)void 0!==n[i]&&o.push(n[i]);t.obj[t.prop]=o}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r){if(0===e.length)return e;var o=e;if("symbol"==typeof e?o=Symbol.prototype.toString.call(e):"string"!=typeof e&&(o=String(e)),"iso-8859-1"===r)return escape(o).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var i="",a=0;a<o.length;++a){var s=o.charCodeAt(a);45===s||46===s||95===s||126===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122?i+=o.charAt(a):s<128?i+=n[s]:s<2048?i+=n[192|s>>6]+n[128|63&s]:s<55296||s>=57344?i+=n[224|s>>12]+n[128|s>>6&63]+n[128|63&s]:(a+=1,s=65536+((1023&s)<<10|1023&o.charCodeAt(a)),i+=n[240|s>>18]+n[128|s>>12&63]+n[128|s>>6&63]+n[128|63&s])}return i},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(r(e)){for(var n=[],o=0;o<e.length;o+=1)n.push(t(e[o]));return n}return t(e)},merge:function e(n,i,a){if(!i)return n;if("object"!=typeof i){if(r(n))n.push(i);else{if(!n||"object"!=typeof n)return[n,i];(a&&(a.plainObjects||a.allowPrototypes)||!t.call(Object.prototype,i))&&(n[i]=!0)}return n}if(!n||"object"!=typeof n)return[n].concat(i);var s=n;return r(n)&&!r(i)&&(s=o(n,a)),r(n)&&r(i)?(i.forEach((function(r,o){if(t.call(n,o)){var i=n[o];i&&"object"==typeof i&&r&&"object"==typeof r?n[o]=e(i,r,a):n.push(r)}else n[o]=r})),n):Object.keys(i).reduce((function(r,n){var o=i[n];return t.call(r,n)?r[n]=e(r[n],o,a):r[n]=o,r}),s)}}},227:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AccountDataContext=void 0;const o=r(129),i=r(376),a=r(245);t.AccountDataContext=class{constructor(e,t){this.accountActionControl=t,this.accountUrl="",this.accountUrl=e.api+"/account"}getNewAccessToken(){return this.authTokenRequest||(this.authTokenRequest=this.accountActionControl.refreshToken(),this.authTokenRequest.then((e=>{this.authTokenRequest=null})).catch((e=>{this.authTokenRequest=null}))),this.authTokenRequest}login({username:e,password:t}){return n(this,void 0,void 0,(function*(){let r={username:e,password:t};const n=yield i.default.post(this.accountUrl+"/login",o.stringify(r),{headers:{"Content-Type":"application/x-www-form-urlencoded"},__isRetryRequest:!0}),s=a.default(n.data.access_token);return{accessToken:n.data.access_token,id:s.sub,name:s.name,exp:s.exp}}))}loginBasic({username:e,password:t}){return n(this,void 0,void 0,(function*(){return(yield i.default.post(this.accountUrl+"/login","grant_type=client_credentials",{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa(e+":"+t)}})).data}))}logout(){return n(this,void 0,void 0,(function*(){return(yield i.default.get(this.accountUrl+"/logout",{headers:this.accountActionControl?this.accountActionControl.getSecurityHeader():null})).data}))}}},386:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AccountManager=void 0;const o=r(245);t.AccountManager=class{constructor(e,t,r){if(this._appName=null,this._accessToken=null,this._userId=null,this._userName=null,this.deltaTime=null,this._apiKey=null,this.getSecurityHeader=()=>this.apiKey?{thapikey:this.apiKey}:{Authorization:"Bearer "+this.accessToken},this.getSecurityToken=()=>this.apiKey?"token="+this.apiKey:"token="+this.accessToken,this._appName=e,this.accountDataContext=t,this.getLoginData(r),this.apiKey)return;if(!this.accessToken)return;const n=o.default(this.accessToken);let i=new Date;n.exp<Math.trunc(i.getTime()/1e3)&&this.resetLoginData()}resetLoginData(){this._accessToken=null,this._userId=null,this._userName=null,"undefined"!=typeof localStorage&&(localStorage.removeItem(this._appName+"_Remember"),localStorage.removeItem(this._appName+"_AccessToken"),sessionStorage.removeItem(this._appName+"_AccessToken"),localStorage.removeItem(this._appName+"_DeltaTime"),sessionStorage.removeItem(this._appName+"_DeltaTime"),localStorage.removeItem(this._appName+"_UserId"),sessionStorage.removeItem(this._appName+"_UserId"),localStorage.removeItem(this._appName+"_Username"),sessionStorage.removeItem(this._appName+"_Username"))}setLoginData(e,t){this._apiKey=null,this._accessToken=e.accessToken,this._userId=e.id,this._userName=e.name,this.deltaTime=0,"undefined"!=typeof localStorage&&(sessionStorage.setItem(this._appName+"_AccessToken",this._accessToken),sessionStorage.setItem(this._appName+"_UserId",this._userId),sessionStorage.setItem(this._appName+"_Username",this._userName),sessionStorage.setItem(this._appName+"_DeltaTime",this.deltaTime.toString()),localStorage.setItem(this._appName+"_Remember",1==t?"true":"false"),0!=t&&(localStorage.setItem(this._appName+"_AccessToken",this._accessToken),localStorage.setItem(this._appName+"_UserId",this._userId),localStorage.setItem(this._appName+"_Username",this._userName),localStorage.setItem(this._appName+"_DeltaTime",this.deltaTime.toString())))}getLoginData(e){if(e)return this.resetLoginData(),void(this._apiKey=e);"undefined"!=typeof localStorage&&(this._apiKey=null,this._accessToken=sessionStorage.getItem(this._appName+"_AccessToken"),this._userId=sessionStorage.getItem(this._appName+"_UserId"),this._userName=sessionStorage.getItem(this._appName+"_Username"),this.deltaTime=parseInt(sessionStorage.getItem(this._appName+"_DeltaTime")),0!=this.remember&&(this._accessToken=localStorage.getItem(this._appName+"_AccessToken"),this._userId=localStorage.getItem(this._appName+"_UserId"),this._userName=localStorage.getItem(this._appName+"_Username"),this.deltaTime=parseInt(localStorage.getItem(this._appName+"_DeltaTime"))))}get apiKey(){return this._apiKey}get accessToken(){return this._accessToken}get isLoggedIn(){if(this.apiKey)return!0;if(!this.accessToken)return!1;const e=o.default(this.accessToken);let t=new Date;return Math.floor(t.getTime()/1e3),!(e.exp<Math.floor(t.getTime()/1e3))}get remember(){return"undefined"!=typeof localStorage&&"true"==localStorage.getItem(this._appName+"_Remember")}login(e,t,r){return n(this,void 0,void 0,(function*(){this._apiKey=null,this.resetLoginData();const n=yield this.accountDataContext.login({username:e,password:t});return this.setLoginData(n,r),n}))}logout(){return n(this,void 0,void 0,(function*(){try{return yield this.accountDataContext.logout()}catch(e){throw e}finally{this._apiKey=null,this.resetLoginData()}}))}}},229:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},382:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Helpers=t.HttpRequestCanceler=void 0;const n=r(376);t.HttpRequestCanceler=class{constructor(){this.cancelerToken=null,this.executor=null,this.reset()}cancel(){this.executor&&this.executor()}reset(){this.executor=null,this.cancelerToken=new n.default.CancelToken((e=>{this.executor=e}))}},t.Helpers=class{static getRangeItemsFromResponse(e){var t=e.headers["content-range"],r=0,n=0,o=0;if(t){var i=t.split("/");if(0!=i.length){var a=i[0].split(" ");if(2==a.length){var s=a[1].split("-");2==s.length&&(r=parseInt(s[0]),n=parseInt(s[1]))}2==i.length&&(o=parseInt(i[1]))}}return{top:r,skip:n,totalItems:o}}}},607:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),r(628).shim(),o(r(745),t),o(r(136),t),o(r(687),t),o(r(382),t),o(r(229),t),o(r(227),t),o(r(386),t),o(r(575),t),o(r(619),t),o(r(56),t)},687:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SocketIORealtimeConnector=t.RealtimeConnector=t.RealtimeConnectionStates=void 0;const n=r(376),o=r(308);var i;(i=t.RealtimeConnectionStates||(t.RealtimeConnectionStates={}))[i.Connecting=0]="Connecting",i[i.Connected=1]="Connected",i[i.Reconnecting=2]="Reconnecting",i[i.Disconnected=4]="Disconnected";class a{constructor(e,t,r,n,o){this.connectionStatus=4,this.url="",this.authHook=null,this.errorHook=null,this.stateChangedHook=null,this.connectErrorHook=null,this.url=e,this.authHook=t,this.errorHook=r,this.connectErrorHook=n,this.stateChangedHook=o}on_connectionStatusChange(e){this.connectionStatus!=e&&(this.connectionStatus=e,this.stateChangedHook(e))}subscribe(){}unsubscribe(){}setHook(e,t){}remHook(e,t){}api(){return n.default.get(this.url+"/api").then((e=>e))}}t.RealtimeConnector=a,t.SocketIORealtimeConnector=class extends a{constructor(e,t,r,n,o){super(e,t,r,n,o),this.socket=null}on_error(e){this.errorHook&&this.errorHook(e)}on_connect_error(e){this.connectErrorHook&&this.connectErrorHook(e)}on_connect(){this.on_connectionStatusChange&&this.on_connectionStatusChange(1)}on_disconnect(e){this.on_connectionStatusChange&&this.on_connectionStatusChange(4)}subscribe(){if(this.socket)return;let e=this.url+"?"+this.authHook();this.socket=o(e),this.socket.on("error",(e=>this.on_error(e))),this.socket.on("connect_error",(e=>this.on_connect_error(e))),this.socket.on("connect",(()=>this.on_connect())),this.socket.on("disconnect",(e=>this.on_disconnect(e)))}unsubscribe(){this.socket&&(this.socket.disconnect(),this.socket=null)}setHook(e,t){this.socket.on(e,t)}remHook(e,t){this.socket&&this.socket.off(e,t)}}},575:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Thing=void 0;class r{constructor(e){this.childrenSkip=0,this.childrenTotalItems=Number.MAX_SAFE_INTEGER,this.children=[],this.id="",this.name="",this.kind="",this.pos=0,this.deletedStatus=0,this.publicReadClaims=0,this.publicChangeClaims=0,this.everyoneReadClaims=0,this.everyoneChangeClaims=0,this.userStatus=0,this.userRole=0,this.userVisibility=0,this.userReadClaims=0,this.userChangeClaims=0,this.usersInfos=[],this.value={},e&&(Object.assign(this,e),e.value&&(this.value=e.value))}addThingChild(e){this.children.unshift(new r(e))}collapse(){this.childrenSkip=0,this.children.splice(0,this.children.length)}shallowCopy(){let e=new r;return Object.assign(e,this),e}}t.Thing=r},619:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ThingsDataContext=void 0;const o=r(376),i=r(382);t.ThingsDataContext=class{constructor(e,t){this.apiEndPointAddress="",this.securityHeaderHook=null,this.apiEndPointAddress=e.api,this.securityHeaderHook=t}thingsUrl(e){return this.apiEndPointAddress+"/things/"+(e||"")}thingsValueUrl(e){return this.apiEndPointAddress+"/things/"+e+"/value"}thingsCmdUrl(e){return this.apiEndPointAddress+"/things/"+e+"/cmd"}thingsPositionsUrl(){return this.apiEndPointAddress+"/things/positions"}thingChildrenUrl(e,t){return this.apiEndPointAddress+"/things/"+e+"/childrenIds/"+(t||"")}thingDeleteChildUrl(e,t){return this.apiEndPointAddress+"/things/"+e+"/childrenIds/"+t}getThing(e){return n(this,void 0,void 0,(function*(){return(yield o.default.get(this.thingsUrl(e),{headers:this.securityHeaderHook()})).data}))}getThings(e,t){var r=this.thingsUrl()+"?"+(e.parentThingId?"&parentThingId="+e.parentThingId:"")+(e.thingFilter?"&thingFilter="+JSON.stringify(e.thingFilter):"")+(e.valueFilter?"&valueFilter="+JSON.stringify(e.valueFilter):"")+(e.orderBy?"&orderBy="+e.orderBy:"")+(e.skip?"&skip="+e.skip:"")+(e.top?"&top="+e.top:"");return o.default.get(r,{headers:this.securityHeaderHook(),cancelToken:t?t.cancelerToken:null}).then((function(e){return{things:e.data,itemsRange:i.Helpers.getRangeItemsFromResponse(e)}})).catch((function(e){throw o.default.isCancel(e)&&console.log("Request canceled",e.message),e})).finally((function(){}))}createThing(e){return n(this,void 0,void 0,(function*(){return(yield o.default.post(this.thingsUrl(),e,{headers:this.securityHeaderHook()})).data}))}updateThing(e,t){return n(this,void 0,void 0,(function*(){return(yield o.default.put(this.thingsUrl(e),t,{headers:this.securityHeaderHook()})).data}))}deleteThing(e){return n(this,void 0,void 0,(function*(){return(yield o.default.delete(this.thingsUrl(e),{headers:this.securityHeaderHook()})).data}))}getThingChildrenIds(e){return n(this,void 0,void 0,(function*(){return(yield o.default.get(this.thingChildrenUrl(e),{headers:this.securityHeaderHook()})).data}))}addChildToParent(e,t){return n(this,void 0,void 0,(function*(){return(yield o.default.post(this.thingChildrenUrl(e),JSON.stringify(t),{headers:this.securityHeaderHook()})).data}))}deleteThingChild(e,t){return n(this,void 0,void 0,(function*(){return(yield o.default.delete(this.thingDeleteChildUrl(e,t),{headers:this.securityHeaderHook()})).data}))}getThingValue(e){return n(this,void 0,void 0,(function*(){return(yield o.default.get(this.thingsValueUrl(e),{headers:this.securityHeaderHook()})).data}))}putThingValue(e,t,r){return n(this,void 0,void 0,(function*(){let n=t?this.thingsCmdUrl(e):this.thingsValueUrl(e);return(yield o.default.put(n,r,{headers:this.securityHeaderHook()})).data}))}putThingsPositions(e){return n(this,void 0,void 0,(function*(){return(yield o.default.put(this.thingsPositionsUrl(),e,{headers:this.securityHeaderHook()})).data}))}}},56:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ThingsManager=void 0;const o=r(607);t.ThingsManager=class{constructor(e,t,r,n,o){this.mainThing=e,this.thingKind=t,this.thingClaims=r,this.thingsDataContext=n,this.realtimeConnector=o,this.onCreateThing=e=>{e.kind!==this.thingKind||this.mainThing.addThingChild(e)},this.onUpdateThingValue=(e,t,r)=>{let n=this.searchThingById(e);n&&(r||(n.value=t))},this.getThingsParams={parentThingId:null,thingFilter:{$and:[{kind:this.thingKind},{deletedStatus:1}]},top:10,skip:0,orderBy:null,valueFilter:null},this.getChindrenThingsParams={parentThingId:null,thingFilter:{deletedStatus:1},top:10,skip:0,orderBy:null,valueFilter:null}}init(){this.realtimeConnector.setHook("onCreateThing",this.onCreateThing),this.realtimeConnector.setHook("onUpdateThingValue",this.onUpdateThingValue)}done(){this.realtimeConnector.remHook("onUpdateThingValue",this.onUpdateThingValue),this.realtimeConnector.remHook("onCreateThing",this.onCreateThing)}searchThingById(e){return this.mainThing.children.find((t=>t.id===e))}getThings(e,t){return n(this,void 0,void 0,(function*(){let r=null,n=[];try{r=yield this.thingsDataContext.getThings(e,t);for(let e=0;e<r.things.length;e++){var i=new o.Thing(r.things[e]);n.push(i)}}catch(e){throw e}return{things:n,itemsRange:r.itemsRange}}))}getMoreThingChildren(e,t,r){return n(this,void 0,void 0,(function*(){t.skip=e.childrenSkip,t.parentThingId=e.id;const n=yield this.getThings(t,r);e.childrenTotalItems=n.itemsRange.totalItems,e.childrenSkip=e.childrenSkip+t.top,e.childrenSkip>e.childrenTotalItems&&(e.childrenSkip=e.childrenTotalItems);for(var o=0;o<n.things.length;o++)e.children.push(n.things[o]);return n}))}getMoreThings(e){return n(this,void 0,void 0,(function*(){let t=this;var r=yield this.getMoreThingChildren(this.mainThing,this.getThingsParams,e);let n=[];for(let o=0;o<r.things.length;o++)n.push(t.getMoreThingChildren(r.things[o],t.getChindrenThingsParams,e));Promise.all(n)}))}getThingsTotalItems(){return this.mainThing.childrenTotalItems}getThing(e){return n(this,void 0,void 0,(function*(){const t=yield this.thingsDataContext.getThing(e);return new o.Thing(t)}))}putThingValue(e,t,r){return n(this,void 0,void 0,(function*(){return yield this.thingsDataContext.putThingValue(e,t,r)}))}}},376:t=>{t.exports=e},308:e=>{e.exports=t}},n={};function o(e){if(n[e])return n[e].exports;var t=n[e]={exports:{}};return r[e].call(t.exports,t,t.exports,o),t.exports}return o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o(607)})()}));
//# sourceMappingURL=thingshub.js.map