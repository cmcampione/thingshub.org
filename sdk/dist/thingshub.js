!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("axios"),require("socket.io-client")):"function"==typeof define&&define.amd?define(["axios","socket.io-client"],t):"object"==typeof exports?exports.thingshub=t(require("axios"),require("socket.io-client")):e.thingshub=t(e.axios,e.io)}(this,(function(e,t){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(t,r){t.exports=e},function(e,t,r){"use strict";e.exports=function(){if("function"!=typeof Promise)throw new TypeError("`Promise.prototype.finally` requires a global `Promise` be available.")}},function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,o=Array.isArray,i=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),a=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r};e.exports={arrayToObject:a,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],a=i.obj[i.prop],s=Object.keys(a),c=0;c<s.length;++c){var l=s[c],u=a[l];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(t.push({obj:a,prop:l}),r.push(u))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(o(r)){for(var n=[],i=0;i<r.length;++i)void 0!==r[i]&&n.push(r[i]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r){if(0===e.length)return e;var n=e;if("symbol"==typeof e?n=Symbol.prototype.toString.call(e):"string"!=typeof e&&(n=String(e)),"iso-8859-1"===r)return escape(n).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var o="",a=0;a<n.length;++a){var s=n.charCodeAt(a);45===s||46===s||95===s||126===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122?o+=n.charAt(a):s<128?o+=i[s]:s<2048?o+=i[192|s>>6]+i[128|63&s]:s<55296||s>=57344?o+=i[224|s>>12]+i[128|s>>6&63]+i[128|63&s]:(a+=1,s=65536+((1023&s)<<10|1023&n.charCodeAt(a)),o+=i[240|s>>18]+i[128|s>>12&63]+i[128|s>>6&63]+i[128|63&s])}return o},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(o(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function e(t,r,i){if(!r)return t;if("object"!=typeof r){if(o(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(i&&(i.plainObjects||i.allowPrototypes)||!n.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var s=t;return o(t)&&!o(r)&&(s=a(t,i)),o(t)&&o(r)?(r.forEach((function(r,o){if(n.call(t,o)){var a=t[o];a&&"object"==typeof a&&r&&"object"==typeof r?t[o]=e(a,r,i):t.push(r)}else t[o]=r})),t):Object.keys(r).reduce((function(t,o){var a=r[o];return n.call(t,o)?t[o]=e(t[o],a,i):t[o]=a,t}),s)}}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0});r(14).shim(),o(r(10),t),o(r(28),t),o(r(29),t),o(r(11),t),o(r(31),t),o(r(32),t),o(r(38),t),o(r(39),t),o(r(40),t),o(r(41),t)},function(e,t,r){"use strict";var n=r(15);e.exports=Function.prototype.bind||n},function(e,t,r){"use strict";var n=r(16),o="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),i=Object.prototype.toString,a=Array.prototype.concat,s=Object.defineProperty,c=s&&function(){var e={};try{for(var t in s(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}(),l=function(e,t,r,n){var o;(!(t in e)||"function"==typeof(o=n)&&"[object Function]"===i.call(o)&&n())&&(c?s(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r)},u=function(e,t){var r=arguments.length>2?arguments[2]:{},i=n(t);o&&(i=a.call(i,Object.getOwnPropertySymbols(t)));for(var s=0;s<i.length;s+=1)l(e,i[s],t[i[s]],r[i[s]])};u.supportsDescriptors=!!c,e.exports=u},function(e,t,r){"use strict";var n=Object.prototype.toString;e.exports=function(e){var t=n.call(e),r="[object Arguments]"===t;return r||(r="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===n.call(e.callee)),r}},function(e,t,r){"use strict";r(1)();var n=r(18),o=r(20),i=r(8),a=function(e,t){return new e((function(e){e(t)}))},s=Promise,c=function(e){if("Object"!==i(this))throw new TypeError("receiver is not an Object");var t=o(this,s),r=e,c=e;return n(e)&&(r=function(e,t){return function(r){var n=t();return a(e,n).then((function(){return r}))}}(t,e),c=function(e,t){return function(r){var n=t();return a(e,n).then((function(){throw r}))}}(t,e)),this.then(r,c)};if(Object.getOwnPropertyDescriptor){var l=Object.getOwnPropertyDescriptor(c,"name");l&&l.configurable&&Object.defineProperty(c,"name",{configurable:!0,value:"finally"})}e.exports=c},function(e,t,r){"use strict";var n=r(26);e.exports=function(e){return"symbol"==typeof e?"Symbol":n(e)}},function(e,t,r){"use strict";var n=r(1),o=r(7);e.exports=function(){return n(),"function"==typeof Promise.prototype.finally?Promise.prototype.finally:o}},function(e,t,r){"use strict";const n={NoMatter:0,Ok:1,Deleted:2};t.ThingDeletedStates=n,t.validateThingDeletedStatus=function(e){switch(e){case n.NoMatter:case n.Ok:case n.Deleted:return!0}return!1};const o={NoMatter:0,Administrator:1,User:2};t.ThingUserRoles=o,t.validateThingUserRoles=function(e){switch(e){case o.NoMatter:case o.Administrator:case o.User:return!0}return!1};const i={NoMatter:0,Ok:1,WaitForAuth:2,Deleted:4};t.ThingUserStates=i,t.validateThingUserStatus=function(e){switch(e){case i.NoMatter:case i.Ok:case i.WaitForAuth:case i.Deleted:return!0}return!1};const a={NoMatter:0,Visible:1,Hidden:2};t.ThingUserVisibility=a,t.validateThingUserVisibility=function(e){switch(e){case a.NoMatter:case a.Visible:case a.Hidden:return!0}return!1};const s={NoClaims:0,CanReadCreationDate:2,CanReadName:4,CanReadDescription:8,CanReadKind:16,CanReadValue:32,CanReadDeletedStatus:64,CanReadPublicReadClaims:2048,CanReadPublicChangeClaims:4096,CanReadEveryoneReadClaims:8192,CanReadEveryoneChangeClaims:16384,CanReadThingUserRights:128,CanReadThingUserRole:256,CanReadThingUserStatus:512,CanReadThingUserVisibility:32768,CanReadThingUserReadClaims:1024,CanReadThingUserChangeClaims:1};s.AllClaims=s.CanReadThingUserChangeClaims|s.CanReadCreationDate|s.CanReadName|s.CanReadDescription|s.CanReadKind|s.CanReadValue|s.CanReadDeletedStatus|s.CanReadThingUserRights|s.CanReadThingUserRole|s.CanReadThingUserVisibility|s.CanReadThingUserStatus|s.CanReadThingUserReadClaims|s.CanReadPublicReadClaims|s.CanReadPublicChangeClaims|s.CanReadEveryoneReadClaims|s.CanReadEveryoneChangeClaims,t.ThingUserReadClaims=s,t.validateThingUserReadClaims=e=>e<=s.AllClaims&&e>=s.NoClaims;const c={NoClaims:0,CanDeleteThing:1,CanChangeName:2,CanChangeDescription:4,CanChangeKind:8,CanChangeValue:16,CanChangeDeletedStatus:32,CanChangePublicReadClaims:4096,CanChangePublicChangeClaims:8192,CanChangeEveryoneReadClaims:16384,CanChangeEveryoneChangeClaims:32768,CanAddThingUserRights:64,CanDeleteThingUserRights:128,CanChangeThingUserRole:256,CanChangeThingUserStatus:512,CanChangeThingUserVisibility:524288,CanChangeThingUserReadClaims:1024,CanChangeThingUserChangeClaims:2048,CanAddChildrenThing:65536,CanRemoveChildrenThing:131072,CanOtherUsersChangeMyThingPos:262144};c.AllClaims=c.CanDeleteThing|c.CanChangeName|c.CanChangeDescription|c.CanChangeKind|c.CanChangeValue|c.CanChangeDeletedStatus|c.CanAddThingUserRights|c.CanDeleteThingUserRights|c.CanChangeThingUserRole|c.CanChangeThingUserVisibility|c.CanChangeThingUserStatus|c.CanChangeThingUserReadClaims|c.CanChangeThingUserChangeClaims|c.CanChangePublicReadClaims|c.CanChangePublicChangeClaims|c.CanChangeEveryoneReadClaims|c.CanChangeEveryoneChangeClaims|c.CanAddChildrenThing|c.CanRemoveChildrenThing,t.ThingUserChangeClaims=c,t.validateThingUserChangeClaims=e=>e<=c.AllClaims&&e>=c.NoClaims,t.ThingKind={NoMatter:"0",genericId:"1",genericTxt:"the bees are laborious"};const l=Number.MAX_SAFE_INTEGER;t.DefaultThingPos=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Helpers=t.HttpRequestCanceler=void 0;const n=r(0);t.HttpRequestCanceler=class{constructor(){this.cancelerToken=null,this.executor=null,this.reset()}cancel(){this.executor&&this.executor()}reset(){this.executor=null,this.cancelerToken=new n.default.CancelToken(e=>{this.executor=e})}};t.Helpers=class{static getRangeItemsFromResponse(e){var t=e.headers["content-range"],r=0,n=0,o=0;if(t){var i=t.split("/");if(0!=i.length){var a=i[0].split(" ");if(2==a.length){var s=a[1].split("-");2==s.length&&(r=parseInt(s[0]),n=parseInt(s[1]))}2==i.length&&(o=parseInt(i[1]))}}return{top:r,skip:n,totalItems:o}}}},function(e,t,r){"use strict";var n=String.prototype.replace,o=/%20/g,i=r(2),a={RFC1738:"RFC1738",RFC3986:"RFC3986"};e.exports=i.assign({default:a.RFC3986,formatters:{RFC1738:function(e){return n.call(e,o,"+")},RFC3986:function(e){return String(e)}}},a)},function(e,t,r){"use strict";var n=r(36);function o(e){this.message=e}o.prototype=new Error,o.prototype.name="InvalidTokenError",e.exports=function(e,t){if("string"!=typeof e)throw new o("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(n(e.split(".")[r]))}catch(e){throw new o("Invalid token specified: "+e.message)}},e.exports.InvalidTokenError=o},function(e,t,r){"use strict";var n=r(4),o=r(5),i=r(7),a=r(9),s=r(27),c=n.call(Function.call,a());o(c,{getPolyfill:a,implementation:i,shim:s}),e.exports=c},function(e,t,r){"use strict";var n="Function.prototype.bind called on incompatible ",o=Array.prototype.slice,i=Object.prototype.toString;e.exports=function(e){var t=this;if("function"!=typeof t||"[object Function]"!==i.call(t))throw new TypeError(n+t);for(var r,a=o.call(arguments,1),s=function(){if(this instanceof r){var n=t.apply(this,a.concat(o.call(arguments)));return Object(n)===n?n:this}return t.apply(e,a.concat(o.call(arguments)))},c=Math.max(0,t.length-a.length),l=[],u=0;u<c;u++)l.push("$"+u);if(r=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(s),t.prototype){var h=function(){};h.prototype=t.prototype,r.prototype=new h,h.prototype=null}return r}},function(e,t,r){"use strict";var n=Array.prototype.slice,o=r(6),i=Object.keys,a=i?function(e){return i(e)}:r(17),s=Object.keys;a.shim=function(){Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return o(e)?s(n.call(e)):s(e)}):Object.keys=a;return Object.keys||a},e.exports=a},function(e,t,r){"use strict";var n;if(!Object.keys){var o=Object.prototype.hasOwnProperty,i=Object.prototype.toString,a=r(6),s=Object.prototype.propertyIsEnumerable,c=!s.call({toString:null},"toString"),l=s.call((function(){}),"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(e){var t=e.constructor;return t&&t.prototype===e},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!d["$"+e]&&o.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{h(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();n=function(e){var t=null!==e&&"object"==typeof e,r="[object Function]"===i.call(e),n=a(e),s=t&&"[object String]"===i.call(e),d=[];if(!t&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var f=l&&r;if(s&&e.length>0&&!o.call(e,0))for(var y=0;y<e.length;++y)d.push(String(y));if(n&&e.length>0)for(var g=0;g<e.length;++g)d.push(String(g));else for(var m in e)f&&"prototype"===m||!o.call(e,m)||d.push(String(m));if(c)for(var v=function(e){if("undefined"==typeof window||!p)return h(e);try{return h(e)}catch(e){return!1}}(e),b=0;b<u.length;++b)v&&"constructor"===u[b]||!o.call(e,u[b])||d.push(u[b]);return d}}e.exports=n},function(e,t,r){"use strict";e.exports=r(19)},function(e,t,r){"use strict";var n=Function.prototype.toString,o=/^\s*class\b/,i=function(e){try{var t=n.call(e);return o.test(t)}catch(e){return!1}},a=Object.prototype.toString,s="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(s)return function(e){try{return!i(e)&&(n.call(e),!0)}catch(e){return!1}}(e);if(i(e))return!1;var t=a.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}},function(e,t,r){"use strict";var n=r(21),o=n("%Symbol.species%",!0),i=n("%TypeError%"),a=r(25),s=r(8);e.exports=function(e,t){if("Object"!==s(e))throw new i("Assertion failed: Type(O) is not Object");var r=e.constructor;if(void 0===r)return t;if("Object"!==s(r))throw new i("O.constructor is not an Object");var n=o?r[o]:void 0;if(null==n)return t;if(a(n))return n;throw new i("no constructor found")}},function(e,t,r){"use strict";var n=TypeError,o=Object.getOwnPropertyDescriptor;if(o)try{o({},"")}catch(e){o=null}var i=function(){throw new n},a=o?function(){try{return i}catch(e){try{return o(arguments,"callee").get}catch(e){return i}}}():i,s=r(22)(),c=Object.getPrototypeOf||function(e){return e.__proto__},l=void 0,u="undefined"==typeof Uint8Array?void 0:c(Uint8Array),h={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":s?c([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":l&&s&&Symbol.asyncIterator?l[Symbol.asyncIterator]():void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":s?c(c([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%JSONParse%":"object"==typeof JSON?JSON.parse:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&s?c((new Map)[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&s?c((new Set)[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":s?c(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":s?Symbol:void 0,"%SymbolPrototype%":s?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":a,"%TypedArray%":u,"%TypedArrayPrototype%":u?u.prototype:void 0,"%TypeError%":n,"%TypeErrorPrototype%":n.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype},d=r(4).call(Function.call,String.prototype.replace),p=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,f=/\\(\\)?/g,y=function(e){var t=[];return d(e,p,(function(e,r,n,o){t[t.length]=n?d(o,f,"$1"):r||e})),t},g=function(e,t){if(!(e in h))throw new SyntaxError("intrinsic "+e+" does not exist!");if(void 0===h[e]&&!t)throw new n("intrinsic "+e+" exists, but is not available. Please file an issue!");return h[e]};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new TypeError('"allowMissing" argument must be a boolean');for(var r=y(e),n=g("%"+(r.length>0?r[0]:"")+"%",t),i=1;i<r.length;i+=1)if(null!=n)if(o&&i+1>=r.length){var a=o(n,r[i]);n=a?a.get||a.value:n[r[i]]}else n=n[r[i]];return n}},function(e,t,r){"use strict";(function(t){var n=t.Symbol,o=r(24);e.exports=function(){return"function"==typeof n&&("function"==typeof Symbol&&("symbol"==typeof n("foo")&&("symbol"==typeof Symbol("bar")&&o())))}}).call(this,r(23))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},function(e,t,r){"use strict";e.exports=function(e){return"function"==typeof e&&!!e.prototype}},function(e,t,r){"use strict";e.exports=function(e){return null===e?"Null":void 0===e?"Undefined":"function"==typeof e||"object"==typeof e?"Object":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"string"==typeof e?"String":void 0}},function(e,t,r){"use strict";var n=r(1),o=r(9),i=r(5);e.exports=function(){n();var e=o();return i(Promise.prototype,{finally:e},{finally:function(){return Promise.prototype.finally!==e}}),e}},function(e,t,r){"use strict";const n=r(10);t.RegisterByOnlyEmailStatus={UserAlreadyRegistered:1,ConfirmPendingEmailSent:2};t.RegisterByOnlyEmailDTO=class{constructor(e,t,r){this.email=e,this.confirmationToken=t,this.status=r}};class o{constructor(e){this.value=e.email,this.isConfimed=e.isConfimed}}t.EmailDTO=o;t.UserDTO=class{constructor(e,t){this.id=e._id,this.name=e.name,t&&(this.emails=[],this.username=e.userName,e.emails.foreach(e=>this.emails.push(new o(e))),this.masterApiKey=e.masterApiKey)}};t.UserInfoDTO=class{constructor(){this.id="",this.name="the bees are laborious"}};t.ThingDTO=class{constructor(){this.id="",this.creationDate=null,this.name="",this.kind=n.ThingKind.genericId,this.pos=0,this.deletedStatus=n.ThingDeletedStates.NoMatter,this.deletedDate=null,this.publicReadClaims=n.ThingUserReadClaims.NoClaims,this.publicChangeClaims=n.ThingUserChangeClaims.NoClaims,this.everyoneReadClaims=n.ThingUserReadClaims.NoClaims,this.everyoneChangeClaims=n.ThingUserChangeClaims.NoClaims,this.value={},this.userStatus=n.ThingUserStates.NoMatter,this.userRole=n.ThingUserRoles.NoMatter,this.userVisibility=n.ThingUserVisibility.NoMatter,this.userReadClaims=n.ThingUserReadClaims.NoClaims,this.userChangeClaims=n.ThingUserChangeClaims.NoClaims,this.usersInfos=[]}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SocketIORealtimeConnector=t.RealtimeConnector=t.RealtimeConnectionStates=void 0;const n=r(0),o=r(30);!function(e){e[e.Connecting=0]="Connecting",e[e.Connected=1]="Connected",e[e.Reconnecting=2]="Reconnecting",e[e.Disconnected=4]="Disconnected"}(t.RealtimeConnectionStates||(t.RealtimeConnectionStates={}));class i{constructor(e,t,r,n,o){this.connectionStatus=4,this.url="",this.authHook=null,this.errorHook=null,this.stateChangedHook=null,this.connectErrorHook=null,this.url=e,this.authHook=t,this.errorHook=r,this.connectErrorHook=n,this.stateChangedHook=o}on_connectionStatusChange(e){this.connectionStatus!=e&&(this.connectionStatus=e,this.stateChangedHook(e))}subscribe(){}unsubscribe(){}setHook(e,t){}remHook(e,t){}api(){return n.default.get(this.url+"/api").then(e=>e)}}t.RealtimeConnector=i;t.SocketIORealtimeConnector=class extends i{constructor(e,t,r,n,o){super(e,t,r,n,o),this.socket=null}on_error(e){this.errorHook&&this.errorHook(e)}on_connect_error(e){this.connectErrorHook&&this.connectErrorHook(e)}on_connect(){this.on_connectionStatusChange&&this.on_connectionStatusChange(1)}on_disconnect(e){this.on_connectionStatusChange&&this.on_connectionStatusChange(4)}subscribe(){if(this.socket)return;let e=this.url+"?"+this.authHook();this.socket=o(e),this.socket.on("error",e=>this.on_error(e)),this.socket.on("connect_error",e=>this.on_connect_error(e)),this.socket.on("connect",()=>this.on_connect()),this.socket.on("disconnect",e=>this.on_disconnect(e))}unsubscribe(){this.socket&&(this.socket.disconnect(),this.socket=null)}setHook(e,t){this.socket.on(e,t)}remHook(e,t){this.socket&&this.socket.off(e,t)}}},function(e,r){e.exports=t},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AccountDataContext=void 0;const o=r(33),i=r(0),a=r(13);t.AccountDataContext=class{constructor(e,t){this.accountActionControl=t,this.accountUrl="",this.accountUrl=e.api+"/account"}getNewAccessToken(){return this.authTokenRequest||(this.authTokenRequest=this.accountActionControl.refreshToken(),this.authTokenRequest.then(e=>{this.authTokenRequest=null}).catch(e=>{this.authTokenRequest=null})),this.authTokenRequest}login({username:e,password:t}){return n(this,void 0,void 0,(function*(){let r={username:e,password:t};const n=yield i.default.post(this.accountUrl+"/login",o.stringify(r),{headers:{"Content-Type":"application/x-www-form-urlencoded"},__isRetryRequest:!0}),s=a(n.data.access_token);return{accessToken:n.data.access_token,id:s.sub,name:s.name,exp:s.exp}}))}loginBasic({username:e,password:t}){return n(this,void 0,void 0,(function*(){return(yield i.default.post(this.accountUrl+"/login","grant_type=client_credentials",{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa(e+":"+t)}})).data}))}logout(){return n(this,void 0,void 0,(function*(){return(yield i.default.get(this.accountUrl+"/logout",{headers:this.accountActionControl?this.accountActionControl.getSecurityHeader():null})).data}))}}},function(e,t,r){"use strict";var n=r(34),o=r(35),i=r(12);e.exports={formats:i,parse:o,stringify:n}},function(e,t,r){"use strict";var n=r(2),o=r(12),i=Object.prototype.hasOwnProperty,a={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},s=Array.isArray,c=Array.prototype.push,l=function(e,t){c.apply(e,s(t)?t:[t])},u=Date.prototype.toISOString,h=o.default,d={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,format:h,formatter:o.formatters[h],indices:!1,serializeDate:function(e){return u.call(e)},skipNulls:!1,strictNullHandling:!1},p=function e(t,r,o,i,a,c,u,h,p,f,y,g,m){var v,b=t;if("function"==typeof u?b=u(r,b):b instanceof Date?b=f(b):"comma"===o&&s(b)&&(b=n.maybeMap(b,(function(e){return e instanceof Date?f(e):e})).join(",")),null===b){if(i)return c&&!g?c(r,d.encoder,m,"key"):r;b=""}if("string"==typeof(v=b)||"number"==typeof v||"boolean"==typeof v||"symbol"==typeof v||"bigint"==typeof v||n.isBuffer(b))return c?[y(g?r:c(r,d.encoder,m,"key"))+"="+y(c(b,d.encoder,m,"value"))]:[y(r)+"="+y(String(b))];var C,T=[];if(void 0===b)return T;if(s(u))C=u;else{var S=Object.keys(b);C=h?S.sort(h):S}for(var k=0;k<C.length;++k){var w=C[k],P=b[w];if(!a||null!==P){var O=s(b)?"function"==typeof o?o(r,w):r:r+(p?"."+w:"["+w+"]");l(T,e(P,O,o,i,a,c,u,h,p,f,y,g,m))}}return T};e.exports=function(e,t){var r,n=e,c=function(e){if(!e)return d;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||d.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=o.default;if(void 0!==e.format){if(!i.call(o.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=o.formatters[r],a=d.filter;return("function"==typeof e.filter||s(e.filter))&&(a=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:d.addQueryPrefix,allowDots:void 0===e.allowDots?d.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:d.charsetSentinel,delimiter:void 0===e.delimiter?d.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:d.encode,encoder:"function"==typeof e.encoder?e.encoder:d.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:d.encodeValuesOnly,filter:a,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:d.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:d.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:d.strictNullHandling}}(t);"function"==typeof c.filter?n=(0,c.filter)("",n):s(c.filter)&&(r=c.filter);var u,h=[];if("object"!=typeof n||null===n)return"";u=t&&t.arrayFormat in a?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var f=a[u];r||(r=Object.keys(n)),c.sort&&r.sort(c.sort);for(var y=0;y<r.length;++y){var g=r[y];c.skipNulls&&null===n[g]||l(h,p(n[g],g,f,c.strictNullHandling,c.skipNulls,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.formatter,c.encodeValuesOnly,c.charset))}var m=h.join(c.delimiter),v=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&("iso-8859-1"===c.charset?v+="utf8=%26%2310003%3B&":v+="utf8=%E2%9C%93&"),m.length>0?v+m:""}},function(e,t,r){"use strict";var n=r(2),o=Object.prototype.hasOwnProperty,i=Array.isArray,a={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},c=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},l=function(e,t,r,n){if(e){var i=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,s=r.depth>0&&/(\[[^[\]]*])/.exec(i),l=s?i.slice(0,s.index):i,u=[];if(l){if(!r.plainObjects&&o.call(Object.prototype,l)&&!r.allowPrototypes)return;u.push(l)}for(var h=0;r.depth>0&&null!==(s=a.exec(i))&&h<r.depth;){if(h+=1,!r.plainObjects&&o.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(s[1])}return s&&u.push("["+i.slice(s.index)+"]"),function(e,t,r,n){for(var o=n?t:c(t,r),i=e.length-1;i>=0;--i){var a,s=e[i];if("[]"===s&&r.parseArrays)a=[].concat(o);else{a=r.plainObjects?Object.create(null):{};var l="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,u=parseInt(l,10);r.parseArrays||""!==l?!isNaN(u)&&s!==l&&String(u)===l&&u>=0&&r.parseArrays&&u<=r.arrayLimit?(a=[])[u]=o:a[l]=o:a={0:o}}o=a}return o}(u,t,r,n)}};e.exports=function(e,t){var r=function(e){if(!e)return a;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?a.charset:e.charset;return{allowDots:void 0===e.allowDots?a.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:a.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:a.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:a.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:a.comma,decoder:"function"==typeof e.decoder?e.decoder:a.decoder,delimiter:"string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:a.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:a.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:a.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:a.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:a.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var u="string"==typeof e?function(e,t){var r,l={},u=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,h=t.parameterLimit===1/0?void 0:t.parameterLimit,d=u.split(t.delimiter,h),p=-1,f=t.charset;if(t.charsetSentinel)for(r=0;r<d.length;++r)0===d[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[r]?f="utf-8":"utf8=%26%2310003%3B"===d[r]&&(f="iso-8859-1"),p=r,r=d.length);for(r=0;r<d.length;++r)if(r!==p){var y,g,m=d[r],v=m.indexOf("]="),b=-1===v?m.indexOf("="):v+1;-1===b?(y=t.decoder(m,a.decoder,f,"key"),g=t.strictNullHandling?null:""):(y=t.decoder(m.slice(0,b),a.decoder,f,"key"),g=n.maybeMap(c(m.slice(b+1),t),(function(e){return t.decoder(e,a.decoder,f,"value")}))),g&&t.interpretNumericEntities&&"iso-8859-1"===f&&(g=s(g)),m.indexOf("[]=")>-1&&(g=i(g)?[g]:g),o.call(l,y)?l[y]=n.combine(l[y],g):l[y]=g}return l}(e,r):e,h=r.plainObjects?Object.create(null):{},d=Object.keys(u),p=0;p<d.length;++p){var f=d[p],y=l(f,u[f],r,"string"==typeof e);h=n.merge(h,y,r)}return n.compact(h)}},function(e,t,r){var n=r(37);e.exports=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(n(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return n(t)}}},function(e,t){function r(e){this.message=e}r.prototype=new Error,r.prototype.name="InvalidCharacterError",e.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new r("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,o,i=0,a=0,s="";o=t.charAt(a++);~o&&(n=i%4?64*n+o:o,i++%4)?s+=String.fromCharCode(255&n>>(-2*i&6)):0)o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(o);return s}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AccountManager=void 0;const o=r(13);t.AccountManager=class{constructor(e,t,r){if(this._appName=null,this._accessToken=null,this._userId=null,this._userName=null,this.deltaTime=null,this._apiKey=null,this.getSecurityHeader=()=>this.apiKey?{thapikey:this.apiKey}:{Authorization:"Bearer "+this.accessToken},this.getSecurityToken=()=>this.apiKey?"token="+this.apiKey:"token="+this.accessToken,this._appName=e,this.accountDataContext=t,this.getLoginData(r),this.apiKey)return;if(!this.accessToken)return;const n=o(this.accessToken);let i=new Date;n.exp<Math.trunc(i.getTime()/1e3)&&this.resetLoginData()}resetLoginData(){this._accessToken=null,this._userId=null,this._userName=null,"undefined"!=typeof localStorage&&(localStorage.removeItem(this._appName+"_Remember"),localStorage.removeItem(this._appName+"_AccessToken"),sessionStorage.removeItem(this._appName+"_AccessToken"),localStorage.removeItem(this._appName+"_DeltaTime"),sessionStorage.removeItem(this._appName+"_DeltaTime"),localStorage.removeItem(this._appName+"_UserId"),sessionStorage.removeItem(this._appName+"_UserId"),localStorage.removeItem(this._appName+"_Username"),sessionStorage.removeItem(this._appName+"_Username"))}setLoginData(e,t){this._apiKey=null,this._accessToken=e.accessToken,this._userId=e.id,this._userName=e.name,this.deltaTime=0,"undefined"!=typeof localStorage&&(sessionStorage.setItem(this._appName+"_AccessToken",this._accessToken),sessionStorage.setItem(this._appName+"_UserId",this._userId),sessionStorage.setItem(this._appName+"_Username",this._userName),sessionStorage.setItem(this._appName+"_DeltaTime",this.deltaTime.toString()),localStorage.setItem(this._appName+"_Remember",1==t?"true":"false"),0!=t&&(localStorage.setItem(this._appName+"_AccessToken",this._accessToken),localStorage.setItem(this._appName+"_UserId",this._userId),localStorage.setItem(this._appName+"_Username",this._userName),localStorage.setItem(this._appName+"_DeltaTime",this.deltaTime.toString())))}getLoginData(e){if(e)return this.resetLoginData(),void(this._apiKey=e);"undefined"!=typeof localStorage&&(this._apiKey=null,this._accessToken=sessionStorage.getItem(this._appName+"_AccessToken"),this._userId=sessionStorage.getItem(this._appName+"_UserId"),this._userName=sessionStorage.getItem(this._appName+"_Username"),this.deltaTime=parseInt(sessionStorage.getItem(this._appName+"_DeltaTime")),0!=this.remember&&(this._accessToken=localStorage.getItem(this._appName+"_AccessToken"),this._userId=localStorage.getItem(this._appName+"_UserId"),this._userName=localStorage.getItem(this._appName+"_Username"),this.deltaTime=parseInt(localStorage.getItem(this._appName+"_DeltaTime"))))}get apiKey(){return this._apiKey}get accessToken(){return this._accessToken}get isLoggedIn(){if(this.apiKey)return!0;if(!this.accessToken)return!1;const e=o(this.accessToken);let t=new Date;Math.floor(t.getTime()/1e3);return!(e.exp<Math.floor(t.getTime()/1e3))}get remember(){return"undefined"!=typeof localStorage&&"true"==localStorage.getItem(this._appName+"_Remember")}login(e,t,r){return n(this,void 0,void 0,(function*(){this._apiKey=null,this.resetLoginData();const n=yield this.accountDataContext.login({username:e,password:t});return this.setLoginData(n,r),n}))}logout(){return n(this,void 0,void 0,(function*(){try{return yield this.accountDataContext.logout()}catch(e){throw e}finally{this._apiKey=null,this.resetLoginData()}}))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Thing=void 0;class n{constructor(e){this.childrenSkip=0,this.childrenTotalItems=Number.MAX_SAFE_INTEGER,this.children=[],this.id="",this.name="",this.kind="",this.pos=0,this.deletedStatus=0,this.publicReadClaims=0,this.publicChangeClaims=0,this.everyoneReadClaims=0,this.everyoneChangeClaims=0,this.userStatus=0,this.userRole=0,this.userVisibility=0,this.userReadClaims=0,this.userChangeClaims=0,this.usersInfos=[],this.value={},e&&(Object.assign(this,e),e.value&&(this.value=e.value))}addThingChild(e){this.children.unshift(new n(e))}collapse(){this.childrenSkip=0,this.children.splice(0,this.children.length)}shallowCopy(){let e=new n;return Object.assign(e,this),e}}t.Thing=n},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ThingsDataContext=void 0;const o=r(0),i=r(11);t.ThingsDataContext=class{constructor(e,t){this.apiEndPointAddress="",this.securityHeaderHook=null,this.apiEndPointAddress=e.api,this.securityHeaderHook=t}thingsUrl(e){return this.apiEndPointAddress+"/things/"+(e||"")}thingsValueUrl(e){return this.apiEndPointAddress+"/things/"+e+"/value"}thingsCmdUrl(e){return this.apiEndPointAddress+"/things/"+e+"/cmd"}thingsPositionsUrl(){return this.apiEndPointAddress+"/things/positions"}thingChildrenUrl(e,t){return this.apiEndPointAddress+"/things/"+e+"/childrenIds/"+(t||"")}thingDeleteChildUrl(e,t){return this.apiEndPointAddress+"/things/"+e+"/childrenIds/"+t}getThing(e){return n(this,void 0,void 0,(function*(){return(yield o.default.get(this.thingsUrl(e),{headers:this.securityHeaderHook()})).data}))}getThings(e,t){var r=this.thingsUrl()+"?"+(e.parentThingId?"&parentThingId="+e.parentThingId:"")+(e.thingFilter?"&thingFilter="+JSON.stringify(e.thingFilter):"")+(e.valueFilter?"&valueFilter="+JSON.stringify(e.valueFilter):"")+(e.orderBy?"&orderBy="+e.orderBy:"")+(e.skip?"&skip="+e.skip:"")+(e.top?"&top="+e.top:"");return o.default.get(r,{headers:this.securityHeaderHook(),cancelToken:t?t.cancelerToken:null}).then((function(e){return{things:e.data,itemsRange:i.Helpers.getRangeItemsFromResponse(e)}})).catch((function(e){throw o.default.isCancel(e)&&console.log("Request canceled",e.message),e})).finally((function(){}))}createThing(e){return n(this,void 0,void 0,(function*(){return(yield o.default.post(this.thingsUrl(),e,{headers:this.securityHeaderHook()})).data}))}updateThing(e,t){return n(this,void 0,void 0,(function*(){return(yield o.default.put(this.thingsUrl(e),t,{headers:this.securityHeaderHook()})).data}))}deleteThing(e){return n(this,void 0,void 0,(function*(){return(yield o.default.delete(this.thingsUrl(e),{headers:this.securityHeaderHook()})).data}))}getThingChildrenIds(e){return n(this,void 0,void 0,(function*(){return(yield o.default.get(this.thingChildrenUrl(e),{headers:this.securityHeaderHook()})).data}))}addChildToParent(e,t){return n(this,void 0,void 0,(function*(){return(yield o.default.post(this.thingChildrenUrl(e),JSON.stringify(t),{headers:this.securityHeaderHook()})).data}))}deleteThingChild(e,t){return n(this,void 0,void 0,(function*(){return(yield o.default.delete(this.thingDeleteChildUrl(e,t),{headers:this.securityHeaderHook()})).data}))}getThingValue(e){return n(this,void 0,void 0,(function*(){return(yield o.default.get(this.thingsValueUrl(e),{headers:this.securityHeaderHook()})).data}))}putThingValue(e,t,r){return n(this,void 0,void 0,(function*(){let n=t?this.thingsCmdUrl(e):this.thingsValueUrl(e);return(yield o.default.put(n,r,{headers:this.securityHeaderHook()})).data}))}putThingsPositions(e){return n(this,void 0,void 0,(function*(){return(yield o.default.put(this.thingsPositionsUrl(),e,{headers:this.securityHeaderHook()})).data}))}}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ThingsManager=void 0;const o=r(3);t.ThingsManager=class{constructor(e,t,r,n,o){this.mainThing=e,this.thingKind=t,this.thingClaims=r,this.thingsDataContext=n,this.realtimeConnector=o,this.onCreateThing=e=>{e.kind!==this.thingKind||this.mainThing.addThingChild(e)},this.onUpdateThingValue=(e,t,r)=>{let n=this.searchThingById(e);n&&(r||(n.value=t))},this.getThingsParams={parentThingId:null,thingFilter:{$and:[{kind:this.thingKind},{deletedStatus:1}]},top:10,skip:0,orderBy:null,valueFilter:null},this.getChindrenThingsParams={parentThingId:null,thingFilter:{deletedStatus:1},top:10,skip:0,orderBy:null,valueFilter:null}}init(){this.realtimeConnector.setHook("onCreateThing",this.onCreateThing),this.realtimeConnector.setHook("onUpdateThingValue",this.onUpdateThingValue)}done(){this.realtimeConnector.remHook("onUpdateThingValue",this.onUpdateThingValue),this.realtimeConnector.remHook("onCreateThing",this.onCreateThing)}searchThingById(e){return this.mainThing.children.find(t=>t.id===e)}getThings(e,t){return n(this,void 0,void 0,(function*(){let r=null,n=[];try{r=yield this.thingsDataContext.getThings(e,t);for(let e=0;e<r.things.length;e++){var i=new o.Thing(r.things[e]);n.push(i)}}catch(e){throw e}return{things:n,itemsRange:r.itemsRange}}))}getMoreThingChildren(e,t,r){return n(this,void 0,void 0,(function*(){t.skip=e.childrenSkip,t.parentThingId=e.id;const n=yield this.getThings(t,r);e.childrenTotalItems=n.itemsRange.totalItems,e.childrenSkip=e.childrenSkip+t.top,e.childrenSkip>e.childrenTotalItems&&(e.childrenSkip=e.childrenTotalItems);for(var o=0;o<n.things.length;o++)e.children.push(n.things[o]);return n}))}getMoreThings(e){return n(this,void 0,void 0,(function*(){let t=this;var r=yield this.getMoreThingChildren(this.mainThing,this.getThingsParams,e);let n=[];for(let o=0;o<r.things.length;o++)n.push(t.getMoreThingChildren(r.things[o],t.getChindrenThingsParams,e));Promise.all(n)}))}getThingsTotalItems(){return this.mainThing.childrenTotalItems}getThing(e){return n(this,void 0,void 0,(function*(){const t=yield this.thingsDataContext.getThing(e);return new o.Thing(t)}))}putThingValue(e,t,r){return n(this,void 0,void 0,(function*(){return yield this.thingsDataContext.putThingValue(e,t,r)}))}}}])}));
//# sourceMappingURL=thingshub.js.map